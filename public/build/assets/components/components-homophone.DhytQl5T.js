import{u as ve,j as e,y as Ke,Z as Ge,D as Ve,w as X,G as L,r as p,d as Qe,a as H,I as Je,J as I,M as Xe,i as Ze,P as es,s as ss,t as ts,n as rs,o as as,N as ee,Q as O,U as we,B as fe,S as ls,V as ns,W as is,_ as je,$ as os,a0 as cs,a1 as ds,a2 as xs,a3 as ms,a4 as Z,g as _e,a5 as us,a6 as Se,a7 as hs,a8 as gs,x as ps}from"../vendor/vendor-common.DkKXL0Tk.js";import{P as Ce,B as bs,M as K}from"./components-common.qHFXWbqp.js";function Os(){const{auth:s}=ve().props;return e.jsx(Ce,{className:"pt-6 pb-8",children:s.user?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-semibold text-gray-600",children:["Master your Khmer word usage with "," ",e.jsx("span",{className:"text-blue-500 font-semibold",children:bs.NAME.SHORT})]}),e.jsx("p",{className:"text-gray-600 mt-2 max-w-6xl mx-auto",children:"Your smart assistant that helps you avoid repeated mistakes, choose the correct homophones, and develop clearer, more confident Khmer writing."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-semibold text-gray-600",children:["Triple your productivity with the"," ",e.jsx("span",{className:"text-blue-500 font-semibold",children:"Homophone Checker"})]}),e.jsx("p",{className:"text-gray-600 mt-4 max-w-6xl mx-auto",children:"SorSer's Homophone Checker uses AI to instantly fix grammar, spelling, and punctuation mistakes. Start typing, and the AI will detect and correct errors in real time, making your writing clear, accurate, and polished."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ke,{className:"text-pink-500",size:28}),e.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"How To Use SorSer Tool"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"SorSer's AI helps you write better by detecting and fixing grammar, spelling, and punctuation mistakes as you type. It works in real time, so you can focus on your ideas while the AI takes care of corrections."}),e.jsxs("div",{className:"bg-white border rounded-2xl p-3 shadow-sm",children:[e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Sample Grammar Checker"}),e.jsxs("div",{className:"mt-1 p-3 rounded-2xl border border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-800 mb-1",children:"Typing Your Sentence:"}),e.jsx("div",{className:"text-gray-600 text-sm mb-2",children:"What key difference distinguishes isotopes from one another?"}),e.jsxs("ul",{className:"mt-2 text-sm text-gray-700 space-y-2",children:[e.jsxs("li",{children:["â€¢"," ",e.jsx("span",{className:"underline decoration-red-500 decoration-2 underline-offset-4",children:"She go"})," ","to the office every morning."]}),e.jsxs("li",{children:["â€¢"," ",e.jsxs("span",{className:"underline decoration-green-500 decoration-2 underline-offset-4",children:["She ",e.jsx("strong",{children:"goes"})]})," ","to the office every morning."]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ge,{className:"text-orange-500",size:28}),e.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Lightning Fast"})]}),e.jsx("p",{className:"text-gray-600",children:"Boost your writing speed with AI-powered grammar checking that instantly detects and fixes errors. SorSer helps you turn rough drafts into clear, polished text in seconds â€” no extra effort required"})]}),e.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ve,{className:"text-pink-500",size:28}),e.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Features for Everyone"})]}),e.jsxs("p",{className:"text-gray-600",children:["Whether you're a student, teacher, or professional, SorSer makes writing easier and more accurate."," ",e.jsx("span",{className:"text-blue-600 cursor-pointer hover:underline transition-all duration-200 ease-in-out hover:scale-105",children:"Try it out"})," ","to experience real-time grammar, spelling, and punctuation checking that helps you write with confidence."]})]})]})]})]})})}function Ws(){return e.jsx(Ce,{className:"text-left py-8"})}function ke({currentAccuracy:s,minRequired:l,bestAccuracy:n,isVisible:r,selectedArticle:i,comparisonAccuracy:d=0,currentTypingSpeed:x=0}){if(!r)return null;const c=i?.min_typed_words_percentage||l||70,m=i?.min_completion_percentage,b=i?.min_typing_speed,v=s>=c,h=m?d>=m:!0,y=b?x>=b:!0,C=v&&h&&y,_=Math.min(100,s/c*100);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-3 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Progress to Unlock"}),e.jsx("div",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${C?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:C?"âœ“ Ready":"In Progress"})]}),e.jsxs("div",{className:"relative w-full h-5 bg-gray-100 rounded-full overflow-hidden border border-gray-200 mb-2",children:[e.jsx("div",{className:`absolute top-0 left-0 h-full transition-all duration-300 ${typingMet?"bg-gradient-to-r from-green-400 to-green-500":"bg-gradient-to-r from-blue-400 to-blue-500"}`,style:{width:`${_}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-bold text-gray-700 drop-shadow-sm",children:["Typed: ",s.toFixed(1),"%"]})})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[v?e.jsx(X,{className:"w-3.5 h-3.5 text-green-600"}):e.jsx(L,{className:"w-3.5 h-3.5 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:"Typing"})]}),e.jsxs("span",{className:v?"text-green-600 font-semibold":"text-gray-600",children:[s.toFixed(1),"% / ",c,"%"]})]}),m&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1.5",children:h?e.jsx(X,{className:"w-3.5 h-3.5 text-green-600"}):e.jsx(L,{className:"w-3.5 h-3.5 text-gray-400"})}),e.jsxs("span",{className:h?"text-green-600 font-semibold":"text-gray-600",children:[d.toFixed(1),"% / ",m,"%"]})]}),b&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[y?e.jsx(X,{className:"w-3.5 h-3.5 text-green-600"}):e.jsx(L,{className:"w-3.5 h-3.5 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:"Typing Speed"})]}),e.jsxs("span",{className:y?"text-green-600 font-semibold":"text-gray-600",children:[x," / ",b," WPM"]})]})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:e.jsx("p",{className:"text-xs text-center text-gray-600",children:C?e.jsx("span",{className:"text-green-600 font-medium",children:'Click "Save" to unlock next article!'}):e.jsx("span",{children:"Complete all requirements above to unlock next article"})})})]})}function Bs({text:s="",onReplace:l,checkerId:n,comparisonResult:r,setComparisonResult:i,articleId:d,isChecking:x=!1,liveProgress:c={currentAccuracy:0,minRequired:70,bestAccuracy:0},selectedArticle:m=null,currentAccuracy:b=0}){const[v,h]=p.useState([]),[y,C]=p.useState(!1),[_,$]=p.useState(!1),[N,S]=p.useState(null),[F,W]=p.useState(null),[se,T]=p.useState(null),[te,re]=p.useState(""),[G,ae]=p.useState("idle"),[ws,_s]=p.useState(null),[Ss,Cs]=p.useState(0),[ks,As]=p.useState([]),[$s,Ms]=p.useState(""),[Ts,zs]=p.useState(null),[le,Es]=p.useState(!1),[R,ne]=p.useState(null),[Le,ie]=p.useState(null),[Fs,V]=p.useState(!1),Oe=ve(),{auth:We}=Oe.props||{},[z,oe]=p.useState(null),[ce,de]=p.useState(null),Be=t=>{if(t===0||!r)return;const o=r.comparison.filter(w=>w.type==="missing"||w.type==="replaced"||w.type==="extra");if(t>=o.length)return;const u=[o[t],...o.slice(0,t),...o.slice(t+1)],a=r.comparison.filter(w=>w.type!=="missing"&&w.type!=="replaced"&&w.type!=="extra"),j=[...u,...a];i({...r,comparison:j})},B=(t,o,g=!1)=>{if(!t||!l||!r)return;H.post("/api/track/comparison-action",{grammar_checker_id:n,article_id:d??null,action:o,comparison_type:t.type,user_word:t.user_word?.user_word||"",article_word:t.article_word?.article_word||"",word_position:t.user_word?.user_index||t.article_word?.article_index,session_id:sessionStorage.getItem("sessionId")}).catch(f=>console.error("Track comparison action error:",f));let u=[...r.comparison],a=[...r.user_words];const j=u.findIndex(f=>f===t);if(j===-1)return;if(o==="dismiss"){const f=`${t.type}-${t.user_word?.user_index||"none"}-${t.article_word?.article_index||"none"}`;h(k=>[...k,f]),u=u.filter((k,E)=>E!==j)}else if(o==="accept"){if(t.type==="missing"){const f=t.article_word.article_index;a.splice(f,0,t.actions.accept.result)}else if(t.type==="extra"){const f=t.user_word.user_index;typeof f=="number"&&a.splice(f,1)}else if(t.type==="replaced"){const f=t.user_word.user_index;typeof f=="number"&&(a[f]=t.actions.accept.result)}u=u.filter((f,k)=>k!==j)}if(u.filter(f=>f.type==="missing"||f.type==="replaced"||f.type==="extra").length===0&&!g){try{ne(q({...r,comparison:u,user_words:a}))}catch{}v.length===0&&(a=[...r.article_words]),setTimeout(()=>{i(null),h([])},500)}else i({...r,comparison:u,user_words:a});if(!g){const f=a.join("");l(f)}},Q=t=>t?t.normalize("NFD").replace(/[\u17BB-\u17D2]/g,"").replace(/\s+/g,"").toLowerCase():"",xe=async()=>{if(F)return F;$(!0);const t=["/homophones.json","/storage/homophones.json","/homophones/json"];let o=[];for(const u of t)try{const a=await H.get(u,{headers:{Accept:"application/json"}});if(o=a.data?.homophones??a.data?.data??(Array.isArray(a.data)?a.data:null)??(Array.isArray(Object.values(a.data))?Object.values(a.data):[]),o.length)break}catch{}const g={};return o.forEach(u=>{const a=u.word?.trim(),j=Q(a);a&&(g[a]=u),j&&(g[j]=u)}),W(g),$(!1),g},Ye=async(t,o=null)=>{if(!t)return;oe(o),de(t),S(null),C(!0),$(!0);const g=t.article_word&&t.article_word.article_word||t.user_word&&t.user_word.user_word||"";if(!g){S({word:"",notFound:!0}),$(!1);return}try{const u=await xe();if(u[g]){S({...u[g],displayedWord:g}),$(!1);return}const a=Q(g),j=a?u[a]:null;if(j){const f=(Array.isArray(j.homophone)?j.homophone:[]).includes(g);S(f?{...j,displayedWord:g,isHomophone:!0}:{word:g,notFound:!0})}else S({word:g,notFound:!0})}catch{S({word:g,notFound:!0})}finally{$(!1)}},Y=()=>{C(!1),S(null),oe(null),de(null)},U=()=>{ce&&z&&B(ce,z),Y()},me=async(t,o)=>{if(We?.can?.student===!0){const g=t.article_word&&t.article_word.article_word||t.user_word&&t.user_word.user_word||"";if(!g){B(t,o);return}try{const u=await xe();u[g]||u[Q(g)]?Ye(t,o):B(t,o)}catch(u){console.error("Error checking homophone:",u),B(t,o)}}else B(t,o)},q=t=>{if(!t||!Array.isArray(t.comparison))return{replaced:0,extra:0,missing:0,same:0,total:0,accuracy:null,avgPause:null};const o=t.comparison,g=o.filter(A=>A.type==="replaced").length,u=o.filter(A=>A.type==="extra").length,a=o.filter(A=>A.type==="missing").length,j=o.filter(A=>A.type==="same").length,w=Array.isArray(t.article_words)?t.article_words.length:o.length,f=w>0?Math.round(j/w*1e4)/100:null;let k=t.metadata?.avg_pause_duration??t.metadata?.avgPause??null;const E=k!=null&&!Number.isNaN(Number(k))?Math.round(Number(k)*100)/100:null;return{replaced:g,extra:u,missing:a,same:j,total:w,accuracy:f,avgPause:E}};p.useEffect(()=>{r&&ne(q(r))},[r]);const[Ds,ue]=p.useState(null),[Ps,he]=p.useState(!1);async function Re(t){if(!t||!t.trim())return null;const o=["/api/khmer-segment"];for(const g of o)try{const u=await H.post(g,{text:t},{headers:{"Content-Type":"application/json"}}),a=u.data?.tokens??u.data?.data?.tokens??(Array.isArray(u.data)?u.data:null);if(Array.isArray(a))return a}catch{}return null}const ge=t=>{const o=String(t||"").trim(),g=o.length,u=o?o.split(/\s+/).filter(Boolean).length:0,a=o?o.split(/[.!?]+/).map(A=>A.trim()).filter(Boolean).length:0,j=o?o.split(/\n+/).map(A=>A.trim()).filter(Boolean).length:0,w=u>0?Math.ceil(u/200*60):0,f=Math.floor(w/60),k=w%60,E=`${f} m ${k} s`;return{characters:g,words:u,sentences:a,paragraphs:j,readingTime:E,readingSeconds:w}};async function pe(t){const o=String(t||"").trim();if(!o)return ge(o);try{const g=await Re(o),u=Array.isArray(g)?g.length:o.split(/\s+/).filter(Boolean).length,a=o.length,j=o?o.split(/[.!?]+/).map(J=>J.trim()).filter(Boolean).length:0,w=o?o.split(/\n+/).map(J=>J.trim()).filter(Boolean).length:0,f=u>0?Math.ceil(u/200*60):0,k=Math.floor(f/60),E=f%60,A=`${k} m ${E} s`;return{characters:a,words:u,sentences:j,paragraphs:w,readingTime:A,readingSeconds:f}}catch(g){return console.error("Khmer segmentation error:",g),ge(o)}}const[Ue,be]=p.useState(!1),D=Qe.useRef(null),qe=async(t={})=>{const o=R??q(r);if(!o||o.total===0||!n&&!d)return null;const g=await pe(s),u={grammar_checker_id:n??null,article_id:d??null,accuracy:o.accuracy??null,replaced_count:o.replaced??0,extra_count:o.extra??0,missing_count:o.missing??0,avg_pause_duration:Le?.avg_pause_duration??o.avgPause??null,user_word_count:g.words??null,article_total_words:o.total??null,reading_time_seconds:g.readingSeconds??null};if(u.avg_pause_duration===null)try{const a=await ye();a&&typeof a.avg_pause_duration=="number"&&(u.avg_pause_duration=Number(a.avg_pause_duration))}catch{}if(Ue)return null;be(!0);try{return await H.post("/api/accuracy",u,{headers:{Accept:"application/json"},withCredentials:!0}),!0}catch(a){return console.error("Save accuracy error:",a?.response?.data??a),null}finally{be(!1)}},Ie=()=>{D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{qe().catch(()=>{})},700)};p.useEffect(()=>{const t=R??q(r);if(!(!t||t.total===0)&&!(!n&&!d))return Ie(),()=>{D.current&&(clearTimeout(D.current),D.current=null)}},[R,r,s,n,d]),p.useEffect(()=>{if(!le)return;ye(n).catch(()=>{});let t=!1;return he(!0),ue(null),pe(s).then(o=>{t||ue(o)}).catch(()=>{}).finally(()=>{t||he(!1)}),()=>{t=!0}},[le,R]);async function ye(t=null){V(!0),ie(null);const o=["/api/user-activity-stats","/api/user-activities/stats","/api/track/stats","/user-activity-stats"],g=typeof sessionStorage<"u"?sessionStorage.getItem("sessionId"):null;for(const u of o)try{const a={};g&&(a.session_id=g),t&&(a.grammar_checker_id=t),d&&(a.article_id=d);const j=await H.get(u,{params:a,headers:{Accept:"application/json"}}),w=j.data?.data??j.data??null;if(w&&typeof w=="object")return ie(w),V(!1),w}catch{}return V(!1),null}if(r){const t=r.comparison.filter(a=>a.type==="missing"||a.type==="replaced"||a.type==="extra"),o=Math.max(...r.comparison.filter(a=>a.type==="same"||a.type==="replaced"||a.type==="extra").map(a=>a.index_compared),-1),g=t.filter(a=>a.type!=="missing"||a.index_compared<=o),u=r?.stats?(r.stats.same||0)/(r.article_words?.length||1)*100:0;return e.jsxs("div",{className:"w-96 rounded-xl border border-gray-200 bg-white h-[75vh] flex flex-col overflow-hidden transition-shadow duration-200 hover:shadow-sm",children:[e.jsxs("div",{className:"px-6 pt-4 pb-2 border-gray-200",children:[m&&e.jsx("div",{className:"mb-3",children:e.jsx(ke,{currentAccuracy:c.currentAccuracy,minRequired:c.minRequired,bestAccuracy:c.bestAccuracy,isVisible:!0,selectedArticle:m,comparisonAccuracy:u})}),x?e.jsxs("div",{className:"flex justify-between items-center border border-gray-200 rounded-xl px-4 py-2 bg-white shadow-sm animate-pulse mb-3",children:[e.jsx("div",{className:"h-4 w-40 bg-slate-200 rounded"}),e.jsx("div",{className:"h-6 w-20 bg-slate-300 rounded-full"})]}):e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:"text-gray-800 text-base font-semibold",children:"Comparison Results"})}),x?e.jsxs("div",{className:"flex items-center space-x-2 animate-pulse mb-1",children:[e.jsx("div",{className:"h-8 w-20 bg-slate-200 rounded-xl"}),e.jsx("div",{className:"h-8 w-28 bg-slate-200 rounded-xl"})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"text-sm text-blue-900 px-3 py-1.5 font-medium flex items-center hover:bg-gray-100 rounded-xl transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:["All"," ",e.jsx("span",{className:"text-xs bg-gray-200 rounded-full px-2 py-0.5 ml-2",children:g.length})]}),e.jsxs("button",{className:"text-sm text-green-600 px-3 py-1.5 font-medium flex items-center hover:bg-gray-100 rounded-xl transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:["Differences"," ",e.jsx("span",{className:"text-xs bg-gray-200 rounded-full px-2 py-0.5 ml-2",children:g.length})]})]}),e.jsx("div",{className:"border-b"})]}),e.jsx("div",{className:"space-y-2 px-4 py-0 mb-2 flex-1 overflow-y-auto hide-scrollbar",children:x?e.jsxs("div",{className:"space-y-4 animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-center border border-gray-200 rounded-xl px-4 py-2 bg-white transition-shadow duration-200 hover:shadow-sm",children:[e.jsx("div",{className:"h-4 w-40 bg-slate-200 rounded"}),e.jsx("div",{className:"h-6 w-20 bg-slate-300 rounded-full"})]}),[...Array(3)].map((a,j)=>e.jsxs("div",{className:"bg-white rounded-xl p-3 border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"h-3 w-24 bg-slate-200 rounded mb-3"}),e.jsxs("div",{className:"flex space-x-2 mb-4",children:[e.jsx("div",{className:"h-4 w-16 bg-slate-300 rounded"}),e.jsx("div",{className:"h-4 w-20 bg-slate-200 rounded"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"h-6 w-20 bg-slate-300 rounded-full"}),e.jsx("div",{className:"h-6 w-20 bg-slate-200 rounded-full"}),e.jsx("div",{className:"h-6 w-20 bg-slate-200 rounded-full"})]})]},j))]}):e.jsxs(e.Fragment,{children:[g.length>0&&e.jsx("div",{className:"flex justify-between items-center border border-gray-200 rounded-xl px-4 py-2 bg-white transition-shadow duration-200 hover:shadow-sm",children:e.jsxs("span",{className:"flex items-center",children:[e.jsxs("span",{className:"text-red-500 text-sm font-semibold",children:[g.length," ","differences"]}),e.jsx("span",{className:"text-gray-600 text-sm ml-1",children:"found"})]})}),g.map((a,j)=>e.jsxs("div",{onClick:()=>Be(j),className:`bg-white rounded-xl p-3 border transition-shadow duration-200 hover:shadow-sm cursor-pointer transition ${j===0?"border-blue-500 border-2":"border-gray-200"}`,children:[e.jsxs("p",{className:"text-xs text-gray-500 font-medium mb-2",children:[a.type==="missing"&&"Missing Word (Expected word is missing)",a.type==="replaced"&&"Incorrect Word",a.type==="extra"&&"Extra Word (Unmatched in the article)"]}),e.jsxs("div",{className:`${a.type!=="missing"?"gap-2 ":""} mb-3 flex items-center `,children:[e.jsx("span",{className:`${a.type!=="missing"?"line-through ":""}text-base ${j===0?"text-red-500":"text-gray-500"}`,children:typeof a.user_word?.user_word=="string"&&a.user_word.user_word!==""?a.user_word.user_word:""}),e.jsx("span",{children:a.type!=="missing"&&e.jsx(Je,{className:"w-4 h-4 text-slate-500"})}),e.jsx("span",{className:`text-base font-semibold ${j===0?"text-green-600":"text-green-700"}`,children:a.article_word?.article_word||"Removed"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"bg-green-600 hover:bg-green-700 hover:scale-105 hover:shadow-sm text-white px-3 py-1.5 rounded-full flex items-center text-xs font-medium transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",onClick:w=>{w.stopPropagation(),me(a,"accept")},children:[e.jsx(I,{className:"w-3.5 h-3.5 mr-1"})," ","Accept"]}),e.jsxs("button",{className:"flex items-center text-gray-700  px-3 rounded-full border-2 hover:bg-red-50 text-xs font-medium transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",onClick:w=>{w.stopPropagation(),me(a,"dismiss")},children:[e.jsx(Xe,{className:"w-3.5 h-3.5 mr-1"})," ","Ignore"]})]})]},`${a.index_compared}-${a.type}`)),g.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{className:"mt-20 w-12 h-12 text-green-500 mx-auto mb-3"}),e.jsx("h5",{className:"text-base font-semibold text-gray-700 mb-1",children:"Perfect Match!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your text matches the article exactly."})]})]})}),e.jsx(K,{show:y,onClose:Y,maxWidth:"xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:_?e.jsx("div",{className:"py-2 text-center",children:"Loadingâ€¦"}):N?N.notFound?"Are You Sure?":"Explanation":e.jsx(e.Fragment,{children:" "})}),e.jsx("button",{className:"text-gray-500 ",onClick:Y,"aria-label":"Close",children:"âœ•"})]})}),_?e.jsx("div",{className:"py-8 text-center",children:"Loadingâ€¦"}):N?e.jsx("div",{className:"space-y-3 text-sm text-gray-700",children:N.notFound?e.jsxs("div",{children:[z==="accept"&&e.jsxs("div",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to continue with the word"," ",e.jsx("span",{className:"font-semibold text-green-600",children:N.word})]}),z==="dismiss"&&e.jsxs("div",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to ignore the word"," ",e.jsx("span",{className:"text-red-600 font-semibold",children:N.word})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 gap-3",children:[e.jsx("button",{type:"button",onClick:Y,className:"rounded-xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95 font-semibold",children:"Close"}),z==="accept"&&e.jsx("button",{type:"button",onClick:U,className:"rounded-xl px-9 py-1 bg-green-600 text-white font-semibold hover:bg-green-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:"Accept"}),z==="dismiss"&&e.jsx("button",{type:"button",onClick:U,className:"rounded-xl px-9 py-1 bg-red-600 text-white font-semibold hover:bg-red-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:"Ignore"})]})]}):e.jsxs(e.Fragment,{children:[N.displayedWord&&e.jsx("div",{children:e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-lg",children:N.displayedWord}),N.isHomophone&&e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(homophone of"," ",e.jsx("strong",{children:N.word}),")"]})," â€” ",N.shortDescription||`This word is commonly used to describe or refer to ${N.word}.`]})}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-medium text-slate-500",children:"Part of Speech"}),e.jsx("div",{className:"text-sm",children:N.pos||"â€”"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-medium text-slate-500",children:"Pronunciation"}),e.jsx("div",{className:"text-sm",children:N.pro||N.phoneme||"â€”"})]})]}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-medium text-slate-500",children:"Homophones"}),e.jsx("div",{className:"text-sm",children:Array.isArray(N.homophone)?N.homophone.join(", "):"â€”"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-medium text-slate-500",children:"phoneme"}),e.jsx("div",{className:"text-sm",children:typeof N.phoneme=="string"&&N.phoneme.trim()?N.phoneme:Array.isArray(N.phoneme)&&N.phoneme.length?N.phoneme.join(", "):"â€”"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-slate-500",children:"Definition"}),e.jsx("div",{className:"text-sm",children:N.definition||"â€”"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-slate-500",children:"Example"}),e.jsx("div",{className:"text-sm",children:N.example||"â€”"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 gap-3",children:[e.jsx("button",{type:"button",onClick:Y,className:"rounded-xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95 font-semibold",children:"Close"}),z==="accept"&&e.jsx("button",{type:"button",onClick:U,className:"rounded-xl px-9 py-1 bg-green-600 text-white font-semibold hover:bg-green-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95 disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:scale-100",children:"Accept"}),z==="dismiss"&&e.jsx("button",{type:"button",onClick:U,className:"rounded-xl px-9 py-1 bg-red-600 text-white font-semibold hover:bg-red-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:"Ignore"})]})]})}):e.jsx("div",{className:"py-6 text-center text-sm text-gray-500",children:"No data available."})]})})]})}return e.jsxs("div",{className:"w-96 rounded-xl border border-gray-200 bg-white h-[75vh] flex flex-col overflow-hidden transition-shadow duration-200 hover:shadow-sm",children:[e.jsxs("div",{className:"px-6 pt-4 pb-2 border-gray-200",children:[x?e.jsxs("div",{className:"flex justify-between items-center border border-gray-200 rounded-xl px-4 py-2 bg-white shadow-sm animate-pulse mb-3",children:[e.jsx("div",{className:"h-4 w-40 bg-slate-200 rounded"}),e.jsx("div",{className:"h-6 w-20 bg-slate-300 rounded-full"})]}):e.jsx("div",{className:"flex items-center justify-between font-semibold mb-3",children:s.split(" ").filter(t=>t.trim()).length<25?`Enter at least 25 words (${s.split(" ").filter(t=>t.trim()).length}/25)`:"Grammar Check Results"}),x?e.jsxs("div",{className:"flex items-center space-x-2 animate-pulse mb-1",children:[e.jsx("div",{className:"h-8 w-20 bg-slate-200 rounded-xl"}),e.jsx("div",{className:"h-8 w-28 bg-slate-200 rounded-xl"})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{className:"text-sm text-blue-900 px-3 py-1.5 font-medium flex items-center hover:bg-gray-100 hover:scale-105 hover:shadow-sm rounded-xl transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:["All"," ",e.jsx("span",{className:"text-xs bg-gray-200 rounded-full px-2 py-0.5 ml-2",children:"0"})]}),e.jsxs("button",{className:"text-sm text-green-600 px-3 py-1.5 font-medium flex items-center hover:bg-gray-100 hover:scale-105 hover:shadow-sm rounded-xl transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:["Grammar"," ",e.jsx("span",{className:"text-xs bg-gray-200 rounded-full px-2 py-0.5 ml-2",children:"0"})]})]}),e.jsx("div",{className:"border-b"})]}),e.jsx("div",{className:"space-y-2 px-4 py-0 mb-2 flex-1 overflow-y-auto hide-scrollbar",children:x?e.jsxs("div",{className:"space-y-4 animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-center border border-gray-200 rounded-xl px-4 py-2 bg-white transition-shadow duration-200 hover:shadow-sm",children:[e.jsx("div",{className:"h-4 w-40 bg-slate-200 rounded"}),e.jsx("div",{className:"h-6 w-20 bg-slate-300 rounded-full"})]}),[...Array(3)].map((t,o)=>e.jsxs("div",{className:"bg-white rounded-xl p-3 border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"h-3 w-24 bg-slate-200 rounded mb-3"}),e.jsxs("div",{className:"flex space-x-2 mb-4",children:[e.jsx("div",{className:"h-4 w-16 bg-slate-300 rounded"}),e.jsx("div",{className:"h-4 w-20 bg-slate-200 rounded"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"h-6 w-20 bg-slate-300 rounded-full"}),e.jsx("div",{className:"h-6 w-20 bg-slate-200 rounded-full"}),e.jsx("div",{className:"h-6 w-20 bg-slate-200 rounded-full"})]})]},o))]}):e.jsxs("div",{className:"text-center flex flex-col items-center justify-center h-full",children:[e.jsx("img",{src:"/images/binoculars-see.svg",alt:"Icon",className:"w-16 h-16"}),e.jsx("h5",{className:"text-base font-semibold text-gray-700",children:"Nothing to check yet!"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get started by adding text to the editor"})]})})]})}const Ys=async s=>{if(!s||!s.trim())return 0;try{const l=await H.post("/api/khmer-segment",{text:s},{headers:{"Content-Type":"application/json"}});return l.data&&Array.isArray(l.data.tokens)?l.data.tokens.length:s.trim().split(/\s+/).length}catch(l){return console.error("Khmer segment API error:",l),s.trim().split(/\s+/).length}},Rs=s=>Math.ceil(s/200*60),ys=s=>{const l=["replaced","missing","extra"],n={replaced_accept:"#34d399",replaced_dismiss:"#f87171",missing_accept:"#60a5fa",missing_dismiss:"#fbbf24",extra_accept:"#a78bfa",extra_dismiss:"#f472b6"},r=[];return l.forEach(i=>{const d=s.filter(c=>c.comparison_type===i&&c.action==="accept").length,x=s.filter(c=>c.comparison_type===i&&c.action==="dismiss").length;r.push({name:i==="replaced"?"Incorrect Accept":`${i.charAt(0).toUpperCase()+i.slice(1)} Accept`,value:d,color:n[`${i}_accept`]}),r.push({name:i==="replaced"?"Incorrect Dismiss":`${i.charAt(0).toUpperCase()+i.slice(1)} Dismiss`,value:x,color:n[`${i}_dismiss`]})}),r.filter(i=>i.value>0)},P=(s,l,n)=>s.filter(r=>r.comparison_type===l&&r.action===n).length,Ne=(s,l)=>s.filter(n=>n.activity_type===l).length;function Ae({comparisonActivities:s=[],accuracyStats:l=null,activityStats:n=null,audioActivities:r=[],loadingAccuracyStats:i=!1,loadingActivityStats:d=!1,loadingAudioActivities:x=!1}){const c=ys(s);return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Distribution Actions"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Share of action by group"})]}),e.jsx(Ze,{width:"100%",height:280,children:e.jsxs(es,{children:[e.jsx(ss,{data:c,cx:"50%",cy:"50%",outerRadius:90,dataKey:"value",labelLine:!1,children:c.map((m,b)=>e.jsx(ts,{fill:m.color},`cell-${b}`))}),e.jsx(rs,{formatter:(m,b)=>[`${m}`,b]}),e.jsx(as,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm text-slate-600 mt-4",children:[e.jsxs("div",{children:["Replaced:"," ",e.jsx("span",{className:"font-medium text-green-700",children:P(s,"replaced","accept")}),e.jsx("span",{className:"text-gray-400",children:" (a) / "}),e.jsx("span",{className:"font-medium text-red-700",children:P(s,"replaced","dismiss")}),e.jsx("span",{className:"text-gray-400",children:" (d)"})]}),e.jsxs("div",{children:["Missing:"," ",e.jsx("span",{className:"font-medium text-green-700",children:P(s,"missing","accept")}),e.jsx("span",{className:"text-gray-400",children:" (a) / "}),e.jsx("span",{className:"font-medium text-red-700",children:P(s,"missing","dismiss")}),e.jsx("span",{className:"text-gray-400",children:" (d)"})]}),e.jsxs("div",{children:["Extra:"," ",e.jsx("span",{className:"font-medium text-green-700",children:P(s,"extra","accept")}),e.jsx("span",{className:"text-gray-400",children:" (a) / "}),e.jsx("span",{className:"font-medium text-red-700",children:P(s,"extra","dismiss")}),e.jsx("span",{className:"text-gray-400",children:" (d)"})]}),e.jsxs("div",{children:["Accuracy:"," ",e.jsx("span",{className:"font-medium text-gray-800",children:i?"â€¦":l?.accuracy!=null?`${Number(l.accuracy).toFixed(2)}%`:"0%"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm text-slate-600 mt-4",children:[e.jsxs("div",{children:["Avg Pause (s):"," ",e.jsx("span",{className:"font-medium text-gray-800",children:d?"â€¦":n?.avg_pause_duration!=null?Number(n.avg_pause_duration).toFixed(2):"0"})]}),e.jsxs("div",{children:["Audio Plays:"," ",e.jsx("span",{className:"font-medium text-blue-700",children:x?"â€¦":Ne(r,"audio_play")||"0"})]}),e.jsxs("div",{children:["Audio Pauses:"," ",e.jsx("span",{className:"font-medium text-orange-700",children:x?"â€¦":Ne(r,"audio_pause")||"0"})]}),e.jsxs("div",{children:["Reading Time (s):"," ",e.jsx("span",{className:"font-medium text-gray-800",children:l?.reading_time_seconds??"0"})]})]})]})}function fs({show:s,onClose:l,docTitle:n,paragraph:r,lastSavedAt:i,statsData:d}){return e.jsx(K,{show:s,onClose:l,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6 flex flex-col",style:{maxHeight:"80vh"},children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Article Name: ",n||"Untitled document"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Date:"," ",i?new Date(i).toLocaleDateString():"â€”"]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4 text-sm text-gray-700",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-500",children:"Your Article"}),e.jsx("div",{className:"mt-1 bg-slate-50 p-3 rounded text-sm leading-relaxed whitespace-pre-wrap break-words max-h-60 overflow-auto",children:r||""})]})}),e.jsx(Ae,{...d})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:l,className:"rounded-xl border-2 border-gray-300 px-6 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",children:"Close"})})]})})}const Us=Object.freeze(Object.defineProperty({__proto__:null,default:fs},Symbol.toStringTag,{value:"Module"}));function js({show:s,onClose:l,historyItems:n=[],loading:r=!1,onViewItem:i}){return e.jsx(K,{show:s,onClose:l,maxWidth:"2xl",children:e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 px-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Homophone History"}),e.jsx("button",{className:"text-gray-500  text-lg mr-2",onClick:l,children:"âœ•"})]}),r?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading history..."})}):n.length===0?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"No Homophone found."})}):e.jsx("div",{className:"overflow-x-auto max-h-[50vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Words"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Reading Time"}),e.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:n.map((d,x)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-all duration-200 ease-in-out",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-600",children:x+1}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:d.title||"Untitled document"}),e.jsx("td",{className:"px-4 py-3 text-gray-700",children:new Date(d.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-700",children:d.word_count??"0"}),e.jsxs("td",{className:"px-4 py-3 text-center text-gray-700",children:[d.reading_time??"0","s"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button",className:"rounded-xl border-2 border-blue-500 px-3 py-1 text-blue-700 hover:bg-blue-500  transition font-medium",onClick:()=>i(d),children:"View"})})]},d.id))})]})}),e.jsx("div",{className:"mt-6 flex justify-end px-6",children:e.jsx("button",{onClick:l,className:"rounded-xl border-2 border-gray-500 px-4 py-1 text-gray-600 hover:bg-gray-500  transition font-medium",children:"Close"})})]})})}const qs=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"}));function Ns({show:s,onClose:l,historyItem:n,statsData:r}){return n?e.jsx(K,{show:s,onClose:l,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6 flex flex-col",style:{maxHeight:"80vh"},children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Article Name: ",n.title||"Untitled document"]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Date:"," ",n.created_at?new Date(n.created_at).toLocaleDateString():"N/A"]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4 text-sm text-gray-700",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-500",children:"Your Article"}),e.jsx("div",{className:"mt-1 bg-slate-50 p-3 rounded text-sm leading-relaxed whitespace-pre-wrap break-words max-h-60 overflow-auto",children:n.paragraph||""})]})}),e.jsx(Ae,{...r})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:l,className:"rounded-xl border-2 border-gray-300 px-6 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",children:"Close"})})]})}):null}const Is=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"}));function vs({show:s,completionData:l,onClose:n}){return!s||!l?null:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-10 w-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Article Completed!"}),e.jsxs("div",{className:"my-6",children:[e.jsxs("div",{className:"text-6xl font-bold text-blue-600 mb-2",children:[typeof l.accuracy=="number"?l.accuracy.toFixed(1):l.accuracy,"%"]}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Accuracy Score"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:l.totalTimeSpent?`${Math.floor(l.totalTimeSpent/60)}:${(l.totalTimeSpent%60).toString().padStart(2,"0")}`:"0:00"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Total Time"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-800",children:l.deletedCharsCount||0}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Deleted Chars"})]})]}),l.deletedCharsDetail&&l.deletedCharsDetail.length>0&&e.jsxs("details",{className:"mb-6 text-left",children:[e.jsxs("summary",{className:"cursor-pointer text-sm text-gray-700 font-medium ",children:["View Deleted Characters Detail (",l.deletedCharsDetail.length," deletions)"]}),e.jsx("div",{className:"mt-3 max-h-32 overflow-y-auto bg-gray-50 rounded-xl p-3 space-y-2",children:l.deletedCharsDetail.map((r,i)=>e.jsxs("div",{className:"text-xs text-gray-600 border-b border-gray-200 pb-2 last:border-0",children:[e.jsxs("span",{className:"font-mono bg-red-100 text-red-700 px-1 rounded",children:['"',r.characters,'"']}),e.jsxs("span",{className:"ml-2 text-gray-500",children:["(",r.count," chars at position ",r.position,")"]})]},i))})]}),e.jsx("p",{className:"text-gray-700 mb-6 text-sm leading-relaxed",children:l.message}),l.unlocked_next&&l.next_article&&e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:[e.jsx("div",{className:"text-sm text-blue-900 font-semibold mb-1",children:"ðŸŽ‰ New Article Unlocked!"}),e.jsx("div",{className:"text-blue-800 font-medium",children:l.next_article.title})]}),!l.unlocked_next&&e.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"text-sm text-yellow-900",children:["You need ",e.jsxs("strong",{children:[l.min_required,"%"]})," to unlock the next article.",e.jsx("br",{}),"Keep practicing to improve your score!"]})}),e.jsx("button",{onClick:()=>{n(),setTimeout(()=>{l.redirect_url?window.location.href=l.redirect_url:window.location.reload()},300)},className:"w-full px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-semibold transition-all duration-200 ease-in-out",children:"Continue"})]})})})}const Ks=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"})),$e=p.memo(({article:s,isSelected:l=!1,isCompleted:n=!1,isLocked:r=!1,onClick:i})=>{const d=()=>{!r&&i&&i(s)};return e.jsxs("div",{onClick:d,className:`
                p-4 rounded-xl border-2 transition-all cursor-pointer
                ${l?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}
                ${r?"opacity-50 cursor-not-allowed":"hover:shadow-sm"}
            `,role:"button",tabIndex:r?-1:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),d())},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2",children:s.title}),s.category&&e.jsx("span",{className:"inline-block mt-2 px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:s.category}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-sm text-gray-600",children:[s.word_count&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{size:14}),s.word_count," words"]}),s.reading_time&&e.jsxs("span",{children:["~",s.reading_time," min"]})]})]}),e.jsxs("div",{className:"ml-3 flex-shrink-0",children:[n&&e.jsx(O,{className:"text-green-500",size:24}),r&&e.jsx(we,{className:"text-gray-400",size:24})]})]}),s.description&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:s.description}),s.accuracy!==void 0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Best Accuracy:"}),e.jsxs("span",{className:`font-semibold ${s.accuracy>=80?"text-green-600":s.accuracy>=60?"text-yellow-600":"text-red-600"}`,children:[s.accuracy,"%"]})]})})]})});$e.displayName="ArticleCard";const Me=p.memo(({articles:s=[],selectedArticle:l=null,onSelectArticle:n,loading:r=!1,completedArticleIds:i=[],lockedArticleIds:d=[]})=>{const[x,c]=p.useState(""),[m,b]=p.useState("all"),v=s.filter(y=>{const C=x===""||y.title.toLowerCase().includes(x.toLowerCase())||y.category?.toLowerCase().includes(x.toLowerCase()),_=i.includes(y.id);return C&&(m==="all"||m==="completed"&&_||m==="incomplete"&&!_)}),h={total:s.length,completed:i.length,incomplete:s.length-i.length};return e.jsxs("div",{className:"h-full flex flex-col bg-gray-50 border-r border-gray-200",children:[e.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(fe,{className:"text-blue-600",size:24}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Articles"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-bold text-gray-900",children:h.total}),e.jsx("div",{className:"text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"text-center p-2 bg-green-50 rounded",children:[e.jsx("div",{className:"font-bold text-green-700",children:h.completed}),e.jsx("div",{className:"text-green-600",children:"Done"})]}),e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[e.jsx("div",{className:"font-bold text-blue-700",children:h.incomplete}),e.jsx("div",{className:"text-blue-600",children:"Todo"})]})]})]}),e.jsx("div",{className:"p-4 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search articles...",value:x,onChange:y=>c(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{size:16,className:"text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"})]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:()=>b("all"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded transition-all duration-200 ease-in-out ${m==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),e.jsxs("button",{onClick:()=>b("completed"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded transition-all duration-200 ease-in-out flex items-center justify-center gap-1 ${m==="completed"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(O,{size:12}),"Done"]}),e.jsxs("button",{onClick:()=>b("incomplete"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded transition-all duration-200 ease-in-out flex items-center justify-center gap-1 ${m==="incomplete"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(we,{size:12}),"Todo"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading articles..."})]}):v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(fe,{className:"mx-auto text-gray-400 mb-2",size:48}),e.jsx("p",{className:"text-sm text-gray-600",children:x||m!=="all"?"No articles match your filters":"No articles available"}),(x||m!=="all")&&e.jsx("button",{onClick:()=>{c(""),b("all")},className:"mt-3 text-sm text-blue-600 ",children:"Clear filters"})]}):v.map(y=>e.jsx($e,{article:y,isSelected:l?.id===y.id,isCompleted:i.includes(y.id),isLocked:d.includes(y.id),onClick:n},y.id))}),e.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["Showing ",v.length," of ",s.length," articles"]})})]})});Me.displayName="ArticleSelectionSidebar";const Gs=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"})),Te=p.memo(({title:s,wordCount:l=0,targetWordCount:n=0,isSaving:r=!1,lastSavedAt:i=null,readingTime:d=0,onTitleChange:x,readOnly:c=!1})=>{const m=v=>{if(!v)return"Not saved";const h=Date.now()-new Date(v).getTime(),y=Math.floor(h/1e3);return y<60?"Just now":y<3600?`${Math.floor(y/60)}m ago`:y<86400?`${Math.floor(y/3600)}h ago`:new Date(v).toLocaleDateString()},b=n>0?Math.min(l/n*100,100):0;return e.jsxs("div",{className:"bg-white border-b border-gray-200 p-4",children:[e.jsx("div",{className:"mb-3",children:c?e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s}):e.jsx("input",{type:"text",value:s,onChange:v=>x?.(v.target.value),placeholder:"Enter article title...",className:"text-2xl font-bold text-gray-900 w-full border-0 focus:ring-0 p-0"})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(is,{size:16}),e.jsxs("span",{children:[l," ",l===1?"word":"words"]}),n>0&&e.jsxs("span",{className:"text-gray-400",children:["/ ",n]})]}),d>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{size:16}),e.jsxs("span",{children:["~",d," min read"]})]}),n>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${b>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${b}%`}})}),e.jsxs("span",{className:"text-xs",children:[Math.round(b),"%"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:r?e.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(je,{size:16,className:"animate-pulse"}),e.jsx("span",{children:"Saving..."})]}):i?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(I,{size:16}),e.jsx("span",{children:m(i)})]}):e.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[e.jsx(je,{size:16}),e.jsx("span",{children:"Not saved"})]})})]})]})});Te.displayName="EditorHeader";const ze=p.memo(({value:s,onChange:l,placeholder:n="Start typing here...",disabled:r=!1,autoSave:i=!0,onSave:d,isZoomed:x=!1,onToggleZoom:c,minHeight:m="300px",maxHeight:b="600px"})=>{const v=p.useRef(null),h=p.useRef(null);p.useEffect(()=>{if(!(!i||!d))return h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{s&&d(s)},2e3),()=>{h.current&&clearTimeout(h.current)}},[s,i,d]),p.useEffect(()=>{v.current&&!r&&v.current.focus()},[r]);const y=_=>{r||l?.(_.target.value)},C=_=>{_.key==="Enter"&&_.ctrlKey&&d&&(_.preventDefault(),d(s))};return e.jsxs("div",{className:`relative ${x?"fixed inset-0 z-50 bg-white":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 border-b border-gray-200 px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(os,{size:16}),e.jsx("span",{children:"Text Editor"}),i&&e.jsx("span",{className:"text-xs text-gray-500",children:"(Auto-save enabled)"})]}),c&&e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-200 hover:scale-105 hover:shadow-sm rounded transition-all duration-200 ease-in-out",title:x?"Exit fullscreen":"Enter fullscreen",type:"button",children:x?e.jsx(cs,{size:18}):e.jsx(ds,{size:18})})]}),e.jsx("div",{className:`${x?"p-8 h-full overflow-auto":""}`,children:e.jsx("textarea",{ref:v,value:s,onChange:y,onKeyDown:C,placeholder:n,disabled:r,className:`
                        w-full p-4 border-0 focus:ring-0 resize-none font-mono text-base
                        ${r?"bg-gray-50 cursor-not-allowed":"bg-white"}
                        ${x?"h-full":""}
                    `,style:{minHeight:x?"100%":m,maxHeight:x?"none":b},spellCheck:!1})}),e.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[e.jsx("div",{children:s.trim()?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-medium",children:[s.trim().split(/\s+/).length," words"]}),e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsxs("span",{children:[s.length," characters"]})]}):e.jsx("span",{children:"0 words, 0 characters"})}),!r&&e.jsxs("div",{className:"text-gray-500",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-xs",children:"Ctrl"})," + ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-200 rounded text-xs",children:"Enter"})," to save"]})]})})]})});ze.displayName="TextEditor";const Ee=p.memo(({article:s,title:l,userText:n,onTitleChange:r,onTextChange:i,onSave:d,isSaving:x=!1,lastSavedAt:c=null,isZoomed:m=!1,onToggleZoom:b,onCheckText:v,isChecking:h=!1,canCheck:y=!0,showProgress:C=!0,progress:_={currentAccuracy:0,minRequired:70,bestAccuracy:0,comparisonAccuracy:0,currentTypingSpeed:0},autoSave:$=!0,selectedArticle:N=null})=>{const[S,F]=p.useState(0),[W,se]=p.useState(0);p.useEffect(()=>{const G=n.trim()?n.trim().split(/\s+/).length:0;F(G);const ae=Math.ceil(G/200);se(ae)},[n]);const T=s?.word_count||0;s?.content;const te=()=>{y&&v&&!h&&v()},re=()=>{confirm("Are you sure you want to reset? This will clear all your text.")&&i("")};return e.jsxs("div",{className:"h-full flex flex-col bg-white",children:[e.jsx(Te,{title:l,wordCount:S,targetWordCount:T,isSaving:x,lastSavedAt:c,readingTime:W,onTitleChange:r,readOnly:!s}),C&&s&&e.jsx(ke,{currentAccuracy:_.currentAccuracy,minRequired:_.minRequired,bestAccuracy:_.bestAccuracy,comparisonAccuracy:_.comparisonAccuracy,currentTypingSpeed:_.currentTypingSpeed,selectedArticle:N,isVisible:!0,className:"border-b border-gray-200"}),e.jsx("div",{className:"flex-1 overflow-hidden",children:s?e.jsx(ze,{value:n,onChange:i,placeholder:`Start typing the article: "${s.title}"...

Original text has ${T} words.`,disabled:h,autoSave:$,onSave:d,isZoomed:m,onToggleZoom:b,minHeight:"400px"}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx(xs,{size:64,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"Select an article to start typing"})]})})}),s&&e.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:S>0?e.jsxs("span",{children:["Progress: ",S," / ",T," words",T>0&&e.jsxs("span",{className:"ml-2",children:["(",Math.min(Math.round(S/T*100),100),"%)"]})]}):e.jsx("span",{children:"Start typing to begin..."})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:re,disabled:!n||h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out flex items-center gap-2",type:"button",children:[e.jsx(ms,{size:16}),"Reset"]}),e.jsx("button",{onClick:te,disabled:!y||h||!n.trim(),className:`
                                    px-6 py-2 text-sm font-medium rounded-xl
                                    transition-all duration-200 ease-in-out flex items-center gap-2
                                    ${y&&!h&&n.trim()?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}
                                `,type:"button",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Checking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{size:16}),"Check Text"]})})]})]}),!n&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-xl",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"}),' Type the article text as accurately as possible. Your accuracy will be compared with the original text when you click "Check Text".']})}),n&&S<T*.8&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-xl",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:["âš ï¸ ",e.jsx("strong",{children:"Notice:"})," You've typed ",S," words, but the article has ",T," words. Try to type the complete article for best results."]})})]})]})});Ee.displayName="EditorSection";const Vs=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"})),M=p.memo(({label:s,value:l,icon:n,color:r="blue",suffix:i="",trend:d=null,size:x="md"})=>{const c={blue:"bg-blue-50 border-blue-200 text-blue-700",green:"bg-green-50 border-green-200 text-green-700",red:"bg-red-50 border-red-200 text-red-700",yellow:"bg-yellow-50 border-yellow-200 text-yellow-700",gray:"bg-gray-50 border-gray-200 text-gray-700"},m={sm:"p-3",md:"p-4",lg:"p-6"},b={sm:"text-xl",md:"text-2xl",lg:"text-3xl"};return e.jsx("div",{className:`border rounded-xl ${m[x]} ${c[r]}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium opacity-75",children:s}),e.jsxs("p",{className:`${b[x]} font-bold mt-1`,children:[l,i]}),d&&e.jsx("span",{className:`text-xs mt-1 inline-block ${d==="up"?"text-green-600":"text-red-600"}`,children:d==="up"?"â†‘":"â†“"})]}),n&&e.jsx("div",{className:"text-3xl opacity-50",children:n})]})})});M.displayName="MetricCard";const Fe=p.memo(({accuracy:s=0,totalWords:l=0,correctWords:n=0,incorrectWords:r=0,missingWords:i=0,extraWords:d=0,onAccept:x,onDismiss:c,canAccept:m=!0,isProcessing:b=!1})=>{const h=s>=90?{label:"Excellent",color:"green",icon:e.jsx(Z,{})}:s>=80?{label:"Good",color:"blue",icon:e.jsx(_e,{})}:s>=70?{label:"Fair",color:"yellow",icon:e.jsx(O,{})}:{label:"Needs Improvement",color:"red",icon:e.jsx(L,{})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Comparison Results"}),e.jsx("p",{className:"text-gray-600",children:"Your typing has been compared with the original text"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:`
                    inline-flex flex-col items-center justify-center
                    w-40 h-40 rounded-full border-8
                    ${h.color==="green"?"border-green-500 bg-green-50":h.color==="blue"?"border-blue-500 bg-blue-50":h.color==="yellow"?"border-yellow-500 bg-yellow-50":"border-red-500 bg-red-50"}
                `,children:[e.jsx("div",{className:"text-4xl mb-1",children:h.icon}),e.jsxs("div",{className:`text-4xl font-bold ${h.color==="green"?"text-green-700":h.color==="blue"?"text-blue-700":h.color==="yellow"?"text-yellow-700":"text-red-700"}`,children:[s.toFixed(1),"%"]}),e.jsx("div",{className:`text-sm font-medium ${h.color==="green"?"text-green-600":h.color==="blue"?"text-blue-600":h.color==="yellow"?"text-yellow-600":"text-red-600"}`,children:h.label})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(M,{label:"Total Words",value:l,color:"gray",size:"md"}),e.jsx(M,{label:"Correct Words",value:n,color:"green",icon:e.jsx(O,{}),size:"md"}),e.jsx(M,{label:"Incorrect Words",value:r,color:"red",icon:e.jsx(L,{}),size:"md"}),e.jsx(M,{label:"Missing Words",value:i,color:"yellow",size:"md"})]}),d>0&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:e.jsx("div",{className:"flex items-center gap-2 text-orange-700",children:e.jsxs("span",{className:"text-sm font-medium",children:["You typed ",d," extra word",d!==1?"s":""]})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:x,disabled:!m||b,className:`
                        flex-1 py-3 px-4 rounded-xl font-medium text-white
                        transition-all duration-200 ease-in-out flex items-center justify-center gap-2
                        ${m&&!b?"bg-green-600 hover:bg-green-700 cursor-pointer":"bg-gray-300 cursor-not-allowed"}
                    `,children:[e.jsx(O,{size:20}),e.jsx("span",{children:b?"Processing...":"Accept & Continue"})]}),e.jsxs("button",{onClick:c,disabled:b,className:`
                        flex-1 py-3 px-4 rounded-xl font-medium
                        transition-all duration-200 ease-in-out flex items-center justify-center gap-2
                        ${b?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50"}
                    `,children:[e.jsx(L,{size:20}),e.jsx("span",{children:"Dismiss"})]})]}),s<70&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-yellow-800 text-center",children:[e.jsx("strong",{children:"Note:"})," You need at least 70% accuracy to unlock the next article."," ","You're ",(70-s).toFixed(1),"% away from the goal."]})}),s>=70&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-green-800 text-center",children:[e.jsx("strong",{children:"Great job!"})," You've met the minimum requirement.",s>=90&&" You achieved excellent accuracy!"]})})]})});Fe.displayName="ComparisonResults";const De=p.memo(({originalWords:s=[],userWords:l=[],differences:n=[],onWordClick:r})=>{const i=c=>{const m=n.find(b=>b.index===c);return m?m.type:"same"},d=c=>{switch(c){case"same":return"bg-green-100 text-green-800 border-green-300";case"different":return"bg-red-100 text-red-800 border-red-300";case"missing":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"extra":return"bg-orange-100 text-orange-800 border-orange-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},x=c=>{switch(c){case"same":return e.jsx(I,{size:14,className:"inline"});case"different":return e.jsx(Se,{size:14,className:"inline"});case"missing":case"extra":return e.jsx(us,{size:14,className:"inline"});default:return null}};return Math.max(s.length,l.length),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded"}),e.jsx("span",{className:"text-gray-700",children:"Correct"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 border border-red-300 rounded"}),e.jsx("span",{className:"text-gray-700",children:"Incorrect"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-100 border border-yellow-300 rounded"}),e.jsx("span",{className:"text-gray-700",children:"Missing"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-100 border border-orange-300 rounded"}),e.jsx("span",{className:"text-gray-700",children:"Extra"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Original Text"]}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200 min-h-[200px]",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((c,m)=>{const b=i(m);return e.jsx("span",{className:`
                                            px-2 py-1 rounded border text-sm font-mono
                                            ${d(b)}
                                            ${r?"cursor-pointer hover:opacity-75":""}
                                        `,onClick:()=>r?.(m,"original"),title:`Word ${m+1}: ${c}`,children:c},m)})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Your Text"]}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200 min-h-[200px]",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((c,m)=>{const b=i(m);return e.jsx("span",{className:`
                                            px-2 py-1 rounded border text-sm font-mono
                                            ${d(b)}
                                            ${r?"cursor-pointer hover:opacity-75":""}
                                        `,onClick:()=>r?.(m,"user"),title:`Word ${m+1}: ${c}`,children:c},m)})})})]})]}),n.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Differences (",n.length,")"]}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:n.map((c,m)=>e.jsxs("div",{className:`p-2 rounded border text-sm ${d(c.type)}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x(c.type),e.jsxs("span",{className:"font-medium",children:["Position ",c.index+1]})]}),e.jsx("div",{className:"text-xs opacity-75",children:c.type})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"font-mono",children:["Expected: ",e.jsx("strong",{children:c.expected||"(none)"})]}),e.jsx("span",{children:"â†’"}),e.jsxs("span",{className:"font-mono",children:["Got: ",e.jsx("strong",{children:c.actual||"(none)"})]})]})]},m))})]})]})});De.displayName="WordDiffViewer";const Pe=p.memo(({comparisonData:s,onAccept:l,onDismiss:n,onClose:r,isProcessing:i=!1})=>{const[d,x]=p.useState("summary");if(!s)return null;const{accuracy:c=0,stats:m={},article_words:b=[],user_words:v=[],differences:h=[]}=s,y=b.length,C=m.same||0,_=m.different||0,$=m.missing||0,N=m.extra||0,S=c>=70;return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Comparison Results"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>x("summary"),className:`
                                    px-3 py-1.5 text-sm font-medium rounded transition-all duration-200 ease-in-out
                                    flex items-center gap-1
                                    ${d==="summary"?"bg-white text-gray-900 shadow":"text-gray-600 "}
                                `,children:[e.jsx(hs,{size:16}),"Summary"]}),e.jsxs("button",{onClick:()=>x("detailed"),className:`
                                    px-3 py-1.5 text-sm font-medium rounded transition-all duration-200 ease-in-out
                                    flex items-center gap-1
                                    ${d==="detailed"?"bg-white text-gray-900 shadow":"text-gray-600 "}
                                `,children:[e.jsx(gs,{size:16}),"Detailed"]})]}),r&&e.jsx("button",{onClick:r,className:"p-2 text-gray-400  rounded-xl hover:bg-gray-100 transition-all duration-200 ease-in-out","aria-label":"Close",children:e.jsx(Se,{size:24})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d==="summary"?e.jsx(Fe,{accuracy:c,totalWords:y,correctWords:C,incorrectWords:_,missingWords:$,extraWords:N,onAccept:l,onDismiss:n,canAccept:S,isProcessing:i}):e.jsx(De,{originalWords:b,userWords:v,differences:h,onWordClick:(F,W)=>{console.log("Word clicked:",{index:F,type:W})}})}),d==="detailed"&&e.jsxs("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Overall Accuracy: ",e.jsxs("strong",{className:`
                                    ${c>=90?"text-green-600":c>=80?"text-blue-600":c>=70?"text-yellow-600":"text-red-600"}
                                `,children:[c.toFixed(1),"%"]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:l,disabled:!S||i,className:`
                                    flex-1 py-3 px-4 rounded-xl font-medium text-white
                                    transition-all duration-200 ease-in-out flex items-center justify-center gap-2
                                    ${S&&!i?"bg-green-600 hover:bg-green-700":"bg-gray-300 cursor-not-allowed"}
                                `,children:i?"Processing...":"Accept & Continue"}),e.jsx("button",{onClick:n,disabled:i,className:`
                                    flex-1 py-3 px-4 rounded-xl font-medium
                                    transition-all duration-200 ease-in-out
                                    ${i?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-white border-2 border-gray-300 text-gray-700 hover:bg-gray-50"}
                                `,children:"Dismiss"})]}),!S&&e.jsxs("p",{className:"mt-3 text-xs text-center text-yellow-700 bg-yellow-50 p-2 rounded",children:["Need ",(70-c).toFixed(1),"% more to unlock next article"]})]})]})})});Pe.displayName="ComparisonSection";const Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"})),He=p.memo(({currentAccuracy:s=0,bestAccuracy:l=0,totalWords:n=0,correctWords:r=0,incorrectWords:i=0,timeSpent:d=0,minRequired:x=70,showTarget:c=!0})=>{const m=h=>{if(h<60)return`${h}s`;const y=Math.floor(h/60),C=h%60;return`${y}m ${C}s`},b=h=>h>=90?"green":h>=80?"blue":h>=70?"yellow":"red",v=s>=x;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Session Statistics"}),c&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Target: ",x,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(M,{label:"Current Accuracy",value:s.toFixed(1),suffix:"%",color:b(s),icon:e.jsx(ps,{}),size:"lg"}),e.jsx(M,{label:"Best Accuracy",value:l.toFixed(1),suffix:"%",color:"green",icon:e.jsx(Z,{}),size:"lg",trend:s>l?"up":null})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(M,{label:"Total Words",value:n,color:"gray",size:"sm"}),e.jsx(M,{label:"Correct",value:r,color:"green",size:"sm"}),e.jsx(M,{label:"Incorrect",value:i,color:"red",size:"sm"})]}),e.jsx(M,{label:"Time Spent",value:m(d),color:"blue",icon:e.jsx(ee,{}),size:"md"}),c&&e.jsx("div",{className:`p-4 rounded-xl border-2 ${v?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:e.jsx("div",{className:"flex items-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"text-green-600",size:20}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["âœ“ Meets minimum requirement (",x,"%)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"text-yellow-600",size:20}),e.jsxs("span",{className:"text-sm font-medium text-yellow-700",children:["Need ",(x-s).toFixed(1),"% more to unlock next article"]})]})})}),n>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Progress Breakdown"}),e.jsxs("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"bg-green-500 transition-all",style:{width:`${r/n*100}%`},title:`${r} correct words`}),e.jsx("div",{className:"bg-red-500 transition-all",style:{width:`${i/n*100}%`},title:`${i} incorrect words`})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:[r," correct"]}),e.jsxs("span",{children:[i," incorrect"]})]})]})]})});He.displayName="StatisticsPanel";const Js=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"}));export{Gs as A,Ks as C,Us as D,Vs as E,Os as H,Js as S,Bs as a,Ws as b,Ys as c,Rs as d,qs as e,Is as f,Qs as g};
