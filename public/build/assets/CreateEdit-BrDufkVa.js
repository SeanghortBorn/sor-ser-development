import{G as v,r as d,j as e,S as N,x as k}from"./app-eDJyDaFf.js";import{B as C}from"./Breadcrumb-DGuLlkMK.js";import{I as i}from"./InputError-Bk_2lqUO.js";import{A as E}from"./AdminLayout-3-Aho6EH.js";function L({user:s,roles:m}){s=s||{id:null,name:"",email:"",roles:[],created_at:null};const{data:o,setData:l,post:h,patch:g,errors:t,reset:x,processing:b,recentlySuccessful:S}=v({name:s.name??"",email:s.email??"",roles:Array.isArray(s.roles)&&s.roles.length>0?s.roles.map(r=>r.id):[],password:""}),[a,c]=d.useState(!1),u=d.useRef(null);d.useEffect(()=>{if(!a)return;function r(j){u.current&&!u.current.contains(j.target)&&c(!1)}return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[a]);const p=d.useMemo(()=>m.find(r=>r.id===o.roles[0]),[m,o.roles]),f=r=>{l("roles",r?[r]:[]),c(!1)},y=r=>{r.preventDefault(),s.id?g(route("users.update",s.id),{preserveState:!0,onFinish:()=>x()}):h(route("users.store"),{preserveState:!0,onFinish:()=>x()})},n=s.id?"User Edit":"User Create",w=[{title:"Home",url:"/"},{title:n,url:""}];return e.jsxs(E,{breadcrumb:e.jsx(C,{header:n,links:w}),children:[e.jsx(N,{title:n}),e.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50/30 mb-12",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:n}),e.jsx("p",{className:"text-gray-500",children:s?"Update user details":"Create a new user for your system"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{id:"name",name:"name",type:"text",placeholder:"Enter user name",value:o.name,onChange:r=>l("name",r.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-xl border ${t.name?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(i,{message:t.name,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",placeholder:"Enter email",value:o.email,onChange:r=>l("email",r.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-xl border ${t.email?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(i,{message:t.email,className:"mt-1 text-sm text-red-600"})]}),!s.id&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",placeholder:"Enter password",value:o.password,onChange:r=>l("password",r.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-xl border ${t.password?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(i,{message:t.password,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"roles",className:"block text-sm font-medium text-gray-700 mb-1",children:"Roles"}),e.jsxs("div",{className:"relative w-1/3",ref:u,children:[e.jsxs("button",{type:"button",className:`w-full px-3 py-2 text-sm rounded-xl border bg-white shadow-sm text-left flex justify-between items-center focus:outline-none focus:ring-2 ${t.roles?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"}`,onClick:()=>c(!a),children:[p?p.name:"Select a Role (optional)",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${a?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&e.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-full bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-60 overflow-y-auto hide-scrollbar",children:e.jsxs("div",{className:"px-2 py-2 space-y-1",children:[e.jsx("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-4 py-2 text-sm rounded-lg transition ${o.roles[0]?"hover:bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700 font-bold"}`,onClick:()=>f(null),children:"Select a Roles (Optional)"}),m.map(r=>e.jsx("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-4 py-2 text-sm rounded-lg transition ${o.roles[0]===r.id?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>f(r.id),children:r.name},r.id))]})})]}),e.jsx(i,{message:t.roles,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx(k,{href:route("users.index"),className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-xl text-gray-600 border-2 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 transition duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"inline-flex items-center justify-center px-6 py-2 text-sm font-medium rounded-xl text-white bg-gradient-to-r from-blue-500 to-blue-500 shadow-sm transition duration-200 hover:from-blue-500 hover:to-blue-600 disabled:opacity-70 disabled:cursor-not-allowed",children:b?s.id?"Updating...":"Saving...":s.id?"Update User":"Save User"})]})]})]})})})]})}export{L as default};
