import{v as Ne,r as n,j as e,a9 as ee,L as oe,u as be,aE as we,as as _e,a3 as ke,ad as Se,aF as Ce,aG as Ae,Q as je,aa as M,i as F,k as ce,l as D,X as T,Y as I,n as B,o as O,q as xe,ay as pe,az as J,W as fe,S as Ee,aH as Pe,aI as $e,aJ as Re,aK as me,g as ge,aw as Le,ax as he,a5 as Ue,aL as Fe,aM as De}from"../vendor/vendor-common.DkKXL0Tk.js";import{e as de,b as se,m as Te,S as Ie,c as Z,d as Be,C as Oe,M as ue}from"../components/components-common.qHFXWbqp.js";import{A as te,u as ze,a as Ke}from"./page-articles.DcfUkLYT.js";function qe({user:c,roles:m}){c=c||{id:null,name:"",email:"",roles:[],created_at:null};const{data:u,setData:i,post:v,patch:h,errors:d,reset:l,processing:p,recentlySuccessful:g}=Ne({name:c.name??"",email:c.email??"",roles:Array.isArray(c.roles)&&c.roles.length>0?c.roles.map(o=>o.id):[],password:""}),[b,N]=n.useState(!1),k=n.useRef(null);n.useEffect(()=>{if(!b)return;function o(A){k.current&&!k.current.contains(A.target)&&N(!1)}return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[b]);const r=n.useMemo(()=>m.find(o=>o.id===u.roles[0]),[m,u.roles]),S=o=>{i("roles",o?[o]:[]),N(!1)},E=o=>{o.preventDefault(),c.id?h(route("users.update",c.id),{preserveState:!0,onFinish:()=>l()}):v(route("users.store"),{preserveState:!0,onFinish:()=>l()})},_=c.id?"User Edit":"User Create",C=[{title:"Home",url:"/"},{title:_,url:""}];return e.jsxs(te,{breadcrumb:e.jsx(se,{header:_,links:C}),children:[e.jsx(ee,{title:_}),e.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50/30 mb-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:_}),e.jsx("p",{className:"text-gray-500",children:c?"Update user details":"Create a new user for your system"})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{id:"name",name:"name",type:"text",placeholder:"Enter user name",value:u.name,onChange:o=>i("name",o.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-2xl border ${d.name?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(de,{message:d.name,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",placeholder:"Enter email",value:u.email,onChange:o=>i("email",o.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-2xl border ${d.email?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(de,{message:d.email,className:"mt-1 text-sm text-red-600"})]}),!c.id&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",placeholder:"Enter password",value:u.password,onChange:o=>i("password",o.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-2xl border ${d.password?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(de,{message:d.password,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"roles",className:"block text-sm font-medium text-gray-700 mb-1",children:"Roles"}),e.jsxs("div",{className:"relative w-1/3",ref:k,children:[e.jsxs("button",{type:"button",className:`w-full px-3 py-2 text-sm rounded-2xl border bg-white shadow-sm text-left flex justify-between items-center focus:outline-none focus:ring-2 transition-all duration-200 ${d.roles?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"}`,onClick:()=>N(!b),children:[r?r.name:"Select a Role (optional)",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${b?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&e.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-full bg-white border border-gray-200 rounded-2xl shadow-sm z-50 max-h-60 overflow-y-auto hide-scrollbar",children:e.jsxs("div",{className:"px-2 py-2 space-y-1",children:[e.jsx("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-4 py-2 text-sm rounded-2xl transition-all duration-200 ${u.roles[0]?"hover:bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700 font-bold"}`,onClick:()=>S(null),children:"Select a Roles (Optional)"}),m.map(o=>e.jsx("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-4 py-2 text-sm rounded-2xl transition-all duration-200 ${u.roles[0]===o.id?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>S(o.id),children:o.name},o.id))]})})]}),e.jsx(de,{message:d.roles,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx(oe,{href:route("users.index"),className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-2xl text-gray-600 border-2 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 ease-in-out hover:shadow-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"inline-flex items-center justify-center px-6 py-2 text-sm font-medium rounded-2xl text-white bg-gradient-to-r from-blue-500 to-blue-500 shadow-sm transition-all duration-200 ease-in-out hover:from-blue-500 hover:to-blue-600 hover:scale-105 hover:shadow-md active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed disabled:hover:scale-100",children:p?c.id?"Updating...":"Saving...":c.id?"Update User":"Save User"})]})]})]})})})]})}const Ye=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));function Me({users:c,permissions:m=[],search:u="",userStats:i={},showTrashed:v=!1}){const{auth:h}=be().props,d=h?.can??{},{searchTerm:l,handleSearch:p}=ze("users.index",u),[g,b]=n.useState(!1),[N,k]=n.useState(null),[r,S]=n.useState([]),[E,_]=n.useState(!1),[C,o]=n.useState(!1),[A,ae]=n.useState(null),[w,$]=n.useState(""),[P,z]=n.useState(!1),[W,R]=n.useState(""),y=Ke(t=>{const x=t.blocked?route("users.unblock",t.id):route("users.block",t.id);return window.axios.post(x).then(()=>{M.reload({only:["users","userStats"]})})}),V=n.useMemo(()=>{const t=i&&Object.keys(i).length>0?i:{total:c.data?.length||0,employees:c.data?.filter(x=>x.roles?.length>0).length||0,students:c.data?.filter(x=>x.permissions?.length>0&&(!x.roles||x.roles.length===0)).length||0,normal:c.data?.filter(x=>(!x.permissions||x.permissions.length===0)&&(!x.roles||x.roles.length===0)).length||0};return[{label:"Total Users",value:t.total,icon:"UsersRound",color:"text-blue-500",borderColor:"border-blue-100",bgColor:"bg-blue-50",description:"All users registered in the system"},{label:"Employees",value:t.employees,icon:"UserCheck",color:"text-green-500",borderColor:"border-green-100",bgColor:"bg-green-50",description:"All verified staff or employee accounts"},{label:"Experiment Group",value:t.students,icon:"GraduationCap",color:"text-orange-500",borderColor:"border-orange-100",bgColor:"bg-orange-50",description:"All student accounts currently active"},{label:"Control Group",value:t.normal,icon:"User",color:"text-purple-500",borderColor:"border-purple-100",bgColor:"bg-purple-50",description:"All users without special roles"}]},[i,c.data]),K=t=>{k(t);const x=t.permissions?t.permissions.map(L=>L.id):[],G=m.find(L=>L.name==="student")?.id;S(x.length>0?x:G?[G]:[]),b(!0)},X=t=>{t.preventDefault(),N&&(_(!0),window.axios.patch(route("users.update-permissions",N.id),{permissions:r}).then(()=>{_(!1),b(!1),M.reload({only:["users","userStats"]})}).catch(()=>_(!1)))},H=t=>{t.preventDefault(),N&&(_(!0),window.axios.patch(route("users.update-permissions",N.id),{permissions:[]}).then(()=>{_(!1),b(!1),M.reload({only:["users","userStats"]})}).catch(()=>_(!1)))},q=t=>{ae(t),$(""),R(""),o(!0)},le=t=>{if(t.preventDefault(),!A||!w.trim()){R("Password is required.");return}z(!0),R(""),window.axios.post(route("users.reset-password",A.id),{password:w}).then(()=>{o(!1),ae(null),$(""),z(!1),M.reload({only:["users"]})}).catch(x=>{z(!1),R(x?.response?.data?.message||"Failed to reset password.")})},f=()=>{M.get(route("users.index"),{search:l,trashed:v?0:1},{preserveState:!0,replace:!0})},re=t=>{M.post(route("users.restore",t),{},{preserveScroll:!0,onSuccess:()=>M.reload({only:["users","userStats"]})})},Y="User List",ne=[{title:"Home",url:"/"},{title:Y,url:""}];return e.jsxs(te,{breadcrumb:e.jsx(se,{header:Y,links:ne}),children:[e.jsx(ee,{title:Y}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:V.map((t,x)=>e.jsx(Te,{...t},x))}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:v?"Deleted Users":"Active Users"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(Ie,{value:l,onChange:p,placeholder:"Search users..."}),e.jsx("button",{onClick:f,className:"inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-semibold text-sm text-white bg-gray-600 hover:bg-gray-500 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:v?"View Active":"View Deleted"}),d["user-create"]&&!v&&e.jsxs(oe,{href:route("users.create"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-semibold text-sm text-white bg-green-600 hover:bg-green-500 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:[e.jsx(we,{className:"w-4 h-4"}),"Add User"]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Roles"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Permissions"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"text-sm divide-y divide-gray-200 bg-white",children:c.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:v?"No deleted users found":"No users found"})}):c.data.map(t=>e.jsxs("tr",{className:"hover:bg-blue-50 transition-all duration-200",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.id}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:t.email}),e.jsx("td",{className:"px-6 py-4",children:t.roles?.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles.map(x=>e.jsx("span",{className:"px-2.5 py-1 bg-blue-100 text-blue-700 rounded-2xl text-xs font-semibold",children:x.name},x.id))}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No roles"})}),e.jsx("td",{className:"px-6 py-4",children:t.permissions?.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.permissions.slice(0,2).map(x=>e.jsx("span",{className:"px-2.5 py-1 bg-green-100 text-green-700 rounded-2xl text-xs font-semibold",children:x.name},x.id)),t.permissions.length>2&&e.jsxs("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 rounded-2xl text-xs font-semibold",children:["+",t.permissions.length-2]})]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No permissions"})}),e.jsx("td",{className:"px-6 py-4",children:t.blocked?e.jsx("span",{className:"px-2.5 py-1 bg-red-100 text-red-700 rounded-2xl text-xs font-semibold",children:"Blocked"}):e.jsx("span",{className:"px-2.5 py-1 bg-green-100 text-green-700 rounded-2xl text-xs font-semibold",children:"Active"})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:_e(t.created_at).format("MMM D, YYYY")}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:v?e.jsx(Z,{onClick:()=>re(t.id),icon:ke,tooltip:"Restore User",variant:"green"}):e.jsxs(e.Fragment,{children:[d["user-edit"]&&e.jsx(oe,{href:route("users.edit",t.id),children:e.jsx(Z,{icon:Se,tooltip:"Edit User",variant:"blue"})}),d["user-permissions"]&&e.jsx(Z,{onClick:()=>K(t),icon:Ce,tooltip:"Manage Permissions",variant:"green"}),d["user-block"]&&e.jsx(Z,{onClick:()=>y.openModal(t),icon:Ae,tooltip:t.blocked?"Unblock User":"Block User",variant:t.blocked?"green":"red"}),d["user-reset-password"]&&e.jsx(Z,{onClick:()=>q(t),icon:je,tooltip:"Reset Password",variant:"yellow"})]})})})]},t.id))})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(Be,{links:c.links})})]}),e.jsx(Oe,{show:y.showModal,onClose:y.closeModal,onConfirm:y.confirm,title:y.target?.blocked?"Unblock User":"Block User",message:y.target?.blocked?`Are you sure you want to unblock ${y.target?.name}?`:`Are you sure you want to block ${y.target?.name}? They will not be able to access the system.`,confirmText:y.target?.blocked?"Unblock":"Block",confirmStyle:y.target?.blocked?"success":"danger",processing:y.processing}),e.jsx(ue,{show:g,onClose:()=>b(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Manage Permissions for ",N?.name]}),e.jsxs("form",{onSubmit:X,children:[e.jsx("div",{className:"space-y-2 mb-4",children:m.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.includes(t.id),onChange:x=>{x.target.checked?S([...r,t.id]):S(r.filter(G=>G!==t.id))},className:"rounded-2xl border-gray-300 text-blue-600 focus:ring-blue-500 transition-all duration-200"}),e.jsx("span",{className:"text-sm text-gray-700",children:t.name})]},t.id))}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:H,className:"rounded-2xl border-2 border-red-300 px-6 py-1 text-red-600 hover:bg-red-50 transition-all duration-200 ease-in-out hover:shadow-sm font-semibold",disabled:E,children:"Remove All"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"rounded-2xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition-all duration-200 ease-in-out hover:shadow-sm font-semibold",disabled:E,children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-2xl px-9 py-1 bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",disabled:E,children:E?"Saving...":"Save"})]})]})]})]})}),e.jsx(ue,{show:C,onClose:()=>o(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Reset Password for ",A?.name]}),e.jsxs("form",{onSubmit:le,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:w,onChange:t=>$(t.target.value),className:"w-full rounded-2xl border-gray-300 focus:border-blue-500 focus:ring-blue-500 transition-all duration-200",placeholder:"Enter new password"}),W&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:W})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"rounded-2xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition-all duration-200 ease-in-out hover:shadow-sm font-semibold",disabled:P,children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-2xl px-9 py-1 bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",disabled:P,children:P?"Resetting...":"Reset Password"})]})]})]})})]})}const Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"}));function We({auth:c,user:m,articlesAttempted:u,accuracyTrends:i,correctionPatterns:v,typingActivity:h,audioBehavior:d,learningMetrics:l}){const p=[{title:"Home",url:"/"},{title:"Users",url:route("users.index")},{title:`${m.name} Progress`,url:""}];return e.jsxs(te,{breadcrumb:e.jsx(se,{header:`${m.name} - Progress`,links:p}),children:[e.jsx(ee,{title:`${m.name} - Progress Dashboard`}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"mb-8 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"User Profile"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),e.jsx("p",{className:"font-semibold",children:m.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-semibold",children:m.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-2xl ${m.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Roles"}),e.jsx("p",{className:"font-semibold",children:m.roles.length>0?m.roles.join(", "):"No roles"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Registered"}),e.jsx("p",{className:"font-semibold",children:m.created_at})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Checks"}),e.jsx("p",{className:"font-semibold",children:m.total_checks})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl p-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overall Accuracy"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[l.overall_accuracy,"%"]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl p-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Progress Trend"}),e.jsx("p",{className:`text-2xl font-bold ${l.progress_trend==="Improving"?"text-green-600":l.progress_trend==="Declining"?"text-red-600":"text-gray-600"}`,children:l.progress_trend})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl p-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Attempts"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:l.total_attempts})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl p-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Improvement Rate"}),e.jsxs("p",{className:`text-2xl font-bold ${l.improvement_rate>0?"text-green-600":"text-red-600"}`,children:[l.improvement_rate>0?"+":"",l.improvement_rate,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-700",children:"Strengths"}),l.strengths.length>0?e.jsx("ul",{className:"space-y-2",children:l.strengths.map((g,b)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),g]},b))}):e.jsx("p",{className:"text-gray-500",children:"Not enough data yet"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-700",children:"Areas for Improvement"}),l.weaknesses.length>0?e.jsx("ul",{className:"space-y-2",children:l.weaknesses.map((g,b)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),g]},b))}):e.jsx("p",{className:"text-gray-500",children:"Excellent performance across all areas!"})]})})]}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl mb-8",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Daily Accuracy Trends (Last 30 Days)"}),i.length>0?e.jsx(F,{width:"100%",height:300,children:e.jsxs(ce,{data:i,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"date"}),e.jsx(I,{domain:[0,100]}),e.jsx(B,{}),e.jsx(O,{}),e.jsx(xe,{type:"monotone",dataKey:"accuracy",stroke:"#3B82F6",strokeWidth:2,name:"Accuracy (%)"})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No accuracy data available for the last 30 days"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl mb-8",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Correction Patterns (Accept vs Reject)"}),v.length>0?e.jsx(F,{width:"100%",height:300,children:e.jsxs(pe,{data:v,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"date"}),e.jsx(I,{}),e.jsx(B,{}),e.jsx(O,{}),e.jsx(J,{dataKey:"accepted",fill:"#10B981",name:"Accepted"}),e.jsx(J,{dataKey:"rejected",fill:"#EF4444",name:"Rejected"})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No correction data available"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl mb-8",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Typing Activity"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Characters Typed"}),e.jsx("p",{className:"text-2xl font-bold",children:h.total_characters.toLocaleString()})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Per Session"}),e.jsx("p",{className:"text-2xl font-bold",children:h.average_per_session})]})]}),h.daily.length>0?e.jsx(F,{width:"100%",height:250,children:e.jsxs(ce,{data:h.daily,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"date"}),e.jsx(I,{}),e.jsx(B,{}),e.jsx(O,{}),e.jsx(xe,{type:"monotone",dataKey:"characters",stroke:"#8B5CF6",strokeWidth:2,name:"Characters Typed"})]})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No typing data available"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl mb-8",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Audio Listening Behavior"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Plays"}),e.jsx("p",{className:"text-2xl font-bold",children:d.total_plays})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rewinds"}),e.jsx("p",{className:"text-2xl font-bold",children:d.total_rewinds})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Fast Forwards"}),e.jsx("p",{className:"text-2xl font-bold",children:d.total_forwards})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Position"}),e.jsxs("p",{className:"text-2xl font-bold",children:[d.avg_playback_position,"s"]})]})]}),d.daily.length>0&&e.jsx(F,{width:"100%",height:250,children:e.jsxs(pe,{data:d.daily,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"date"}),e.jsx(I,{}),e.jsx(B,{}),e.jsx(O,{}),e.jsx(J,{dataKey:"plays",fill:"#F59E0B",name:"Audio Plays"})]})})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Articles Attempted"}),u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Article Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attempts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Best Accuracy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Accuracy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Latest Attempt"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(g=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.attempts}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-2xl ${g.best_accuracy>=80?"bg-green-100 text-green-800":g.best_accuracy>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[g.best_accuracy,"%"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[g.average_accuracy,"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.latest_attempt}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(oe,{href:route("users.articles.details",{userId:m.id,articleId:g.article_id}),className:"inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-2xl transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-md active:scale-95 shadow-sm",children:[e.jsx(fe,{className:"w-4 h-4 mr-1.5"}),"View Details"]})})]},g.article_id))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No articles attempted yet"})]})})]})]})}const Ze=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));function He(){const{analytics:c=[]}=be().props,m=[{value:"",label:"All Experience"},{value:"None",label:"None"},{value:"Beginner",label:"Beginner"},{value:"Intermediate",label:"Intermediate"},{value:"Advanced",label:"Advanced"},{value:"Expert",label:"Expert"}],u=[{value:"",label:"All Education"},{value:"Primary",label:"Primary"},{value:"Secondary",label:"Secondary"},{value:"High School",label:"High School"},{value:"Bachelor",label:"Bachelor"},{value:"Master",label:"Master"},{value:"Doctorate",label:"Doctorate"},{value:"Other",label:"Other"}],[i,v]=n.useState(""),[h,d]=n.useState(""),[l,p]=n.useState(""),[g,b]=n.useState(!1),[N,k]=n.useState(!1),[r,S]=n.useState(!1),[E,_]=n.useState(""),[C,o]=n.useState("json"),[A,ae]=n.useState(!1),[w,$]=n.useState([]),[P,z]=n.useState("filtered"),W=n.useRef(null),R=n.useRef(null);n.useEffect(()=>{const s=j=>{W.current&&!W.current.contains(j.target)&&b(!1),R.current&&!R.current.contains(j.target)&&k(!1)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);const y=n.useMemo(()=>c.filter(s=>{const j=i.trim().toLowerCase();if(j){const a=String(s.name||"").toLowerCase().includes(j),U=String(s.email||"").toLowerCase().includes(j);if(!a&&!U)return!1}return!(h&&String(s.experience||"")!==h||l&&String(s.education||"")!==l)}),[c,i,h,l]),V=15,[K,X]=n.useState(1);n.useEffect(()=>X(1),[i,h,l]);const H=Math.max(1,Math.ceil(y.length/V)),q=y.slice((K-1)*V,K*V);n.useEffect(()=>{$(s=>s.filter(j=>y.some(a=>a.id===j)))},[y]);const le=(s,j,a)=>{const U=new Blob([s],{type:a}),ie=URL.createObjectURL(U),Q=document.createElement("a");Q.href=ie,Q.download=j,Q.click(),URL.revokeObjectURL(ie)},f=s=>String(s??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),re=s=>`<?xml version="1.0" encoding="UTF-8"?>
<Students>
${s.map(a=>`   
            <Student>
                <id>${f(a.id)}</id>
                <name>${f(a.name)}</name>
                <email>${f(a.email)}</email>
                <role>${f(a.role)}</role>
                <age>${f(a.age)}</age>
                <education>${f(a.education)}</education>
                <experience>${f(a.experience)}</experience>
                <total_articles>${f(a.total_articles)}</total_articles>
                <total_quizzes>${f(a.total_quizzes)}</total_quizzes>
                <total_questions>${f(a.total_questions)}</total_questions>
                <incorrect_questions>${f(a.incorrect_questions)}</incorrect_questions>
                <accepts>${f(a.accepts)}</accepts>
                <dismiss>${f(a.dismiss)}</dismiss>
                <total_typings>${f(a.total_typings)}</total_typings>
                <incorrect_typings>${f(a.incorrect_typings)}</incorrect_typings>
                <homo_avg>${f(a.homo_avg)}</homo_avg>
                <avg_score>${f(a.avg_score||"N/A")}</avg_score>
                <avg_pause>${f(a.avg_pause)}</avg_pause>
            </Student>`).join(`
`)}
</Students>`,Y=()=>{let s=[];if(P==="selected"&&w.length>0?s=c.filter(ve=>w.includes(ve.id)):s=y,s.length===0){alert("No data to export!");return}const j=new Date().toISOString().slice(0,19).replace("T","_").replace(/:/g,"-"),a=P==="selected"?`selected_${s.length}_students_${j}`:`all_filtered_${s.length}_students_${j}`,ie=`${E.trim()||a}.${C==="json"?"json":"xml"}`,Q=C==="json"?JSON.stringify(s,null,2):re(s);le(Q,ie,C==="json"?"application/json;charset=utf-8":"application/xml;charset=utf-8"),S(!1),_("")},ne=s=>{const a=`${(s.name||`student_${s.id}`).replace(/[^\w\-_. ]/g,"_")}_${s.id}.${C==="json"?"json":"xml"}`,U=C==="json"?JSON.stringify(s,null,2):re([s]);le(U,a,C==="json"?"application/json":"application/xml")},t=s=>{$(j=>j.includes(s)?j.filter(a=>a!==s):[...j,s])},x=()=>{const s=q.map(a=>a.id),j=s.every(a=>w.includes(a));$(j?a=>a.filter(U=>!s.includes(U)):a=>[...new Set([...a,...s])])},G=q.length>0&&q.every(s=>w.includes(s.id)),L="Student Analytics",ye=[{title:"Home",url:"/"},{title:L,url:""}];return e.jsxs(te,{breadcrumb:e.jsx(se,{header:L,links:ye}),children:[e.jsx(ee,{title:L}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"bg-white shadow-sm rounded-2xl overflow-hidden border border-gray-200 mb-12",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex flex-col md:flex-row justify-between items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-semibold",children:L}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsxs("div",{className:"relative",ref:W,children:[e.jsxs("button",{type:"button",className:"w-[180px] px-3 py-2 text-sm rounded-2xl border bg-white shadow-sm flex justify-between items-center focus:outline-none transition-all duration-200",onClick:()=>b(!g),children:[m.find(s=>s.value===h)?.label||"Select Experience Level",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"absolute left-0 top-full mt-2 w-[180px] bg-white border border-gray-200 rounded-2xl shadow-sm z-50 max-h-44 overflow-y-auto",children:e.jsx("div",{className:"px-2 py-2 space-y-1",children:m.map(s=>e.jsx("button",{type:"button",className:`w-full text-left px-4 py-2 text-[14px] rounded-2xl transition-all duration-200 ${h===s.value?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>{d(s.value),b(!1)},children:s.label},s.value))})})]}),e.jsxs("div",{className:"relative",ref:R,children:[e.jsxs("button",{type:"button",className:"w-[180px] px-3 py-2 text-sm rounded-2xl border bg-white shadow-sm flex justify-between items-center focus:outline-none transition-all duration-200",onClick:()=>k(!N),children:[u.find(s=>s.value===l)?.label||"Select Education Level",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${N?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),N&&e.jsx("div",{className:"absolute left-0 top-full mt-2 w-[180px] bg-white border border-gray-200 rounded-2xl shadow-sm z-50 max-h-44 overflow-y-auto",children:e.jsx("div",{className:"px-2 py-2 space-y-1",children:u.map(s=>e.jsx("button",{type:"button",className:`w-full text-left px-4 py-2 text-[14px] rounded-2xl transition-all duration-200 ${l===s.value?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>{p(s.value),k(!1)},children:s.label},s.value))})})]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 rounded-2xl border hover:shadow-sm transition-all duration-200 text-sm bg-white",children:[e.jsx(Ee,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:i,onChange:s=>v(s.target.value),type:"text",placeholder:"Search by name or email",className:"px-2 outline-none border-none bg-transparent text-sm placeholder-gray-400 w-full min-w-[150px]"})]}),e.jsx("button",{onClick:()=>ae(!A),className:"w-28 px-3 py-2 text-sm font-medium rounded-2xl bg-blue-600 text-white hover:bg-blue-500 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95 flex items-center justify-center gap-2",children:A?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"}),"Unselect"]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-4 h-4"}),"Select"]})}),e.jsxs("button",{onClick:()=>{z(w.length>0?"selected":"filtered"),S(!0)},className:"inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-semibold text-sm text-white bg-green-600 hover:bg-green-500 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:[e.jsx(Re,{className:"w-4 h-4"})," Export",w.length>0&&` (${w.length})`]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-max text-left border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsxs("tr",{children:[A&&e.jsx("th",{className:"py-3 px-6",children:e.jsx("input",{type:"checkbox",checked:G,onChange:x,className:"w-4 h-4 rounded-2xl border-gray-300 transition-all duration-200"})}),e.jsx("th",{className:"py-3 px-8",children:"#ID"}),e.jsx("th",{className:"py-3 px-8",children:"Name"}),e.jsx("th",{className:"py-3 px-8",children:"Email"}),e.jsx("th",{className:"py-3 px-8",children:"Role"}),e.jsx("th",{className:"py-3 px-8",children:"Age"}),e.jsx("th",{className:"py-3 px-8",children:"Education"}),e.jsx("th",{className:"py-3 px-8",children:"Experience"}),e.jsx("th",{className:"py-3 px-8",children:"Total Articles"}),e.jsx("th",{className:"py-3 px-8",children:"Total Quizzes"}),e.jsx("th",{className:"py-3 px-8",children:"Total Questions"}),e.jsx("th",{className:"py-3 px-8",children:"Incorrect Questions"}),e.jsx("th",{className:"py-3 px-8",children:"Accepts"}),e.jsx("th",{className:"py-3 px-8",children:"Dismiss"}),e.jsx("th",{className:"py-3 px-8",children:"Total Typings"}),e.jsx("th",{className:"py-3 px-8",children:"Incorrect Typings"}),e.jsx("th",{className:"py-3 px-8",children:"Avg Accuracy (%)"}),e.jsx("th",{className:"py-3 px-8",children:"Avg Score (%)"}),e.jsx("th",{className:"py-3 px-8",children:"Avg Pause (s)"}),e.jsx("th",{className:"py-3 px-8",children:"Actions"})]})}),e.jsx("tbody",{className:"text-gray-700",children:q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:A?20:19,className:"py-12 text-center text-gray-500",children:"No analytics data available."})}):q.map(s=>e.jsxs("tr",{className:"border-t hover:bg-blue-50 transition-all duration-200",children:[A&&e.jsx("td",{className:"py-3 px-6",children:e.jsx("input",{type:"checkbox",checked:w.includes(s.id),onChange:()=>t(s.id),className:"w-4 h-4 rounded-2xl border-gray-300 transition-all duration-200"})}),e.jsx("td",{className:"py-3 px-8",children:s.id}),e.jsx("td",{className:"py-3 px-8",children:s.name}),e.jsx("td",{className:"py-3 px-8",children:s.email}),e.jsx("td",{className:"py-3 px-8",children:s.role}),e.jsx("td",{className:"py-3 px-8",children:s.age||"N/A"}),e.jsx("td",{className:"py-3 px-8",children:s.education||"N/A"}),e.jsx("td",{className:"py-3 px-8",children:s.experience||"N/A"}),e.jsx("td",{className:"py-3 px-8",children:s.total_articles}),e.jsx("td",{className:"py-3 px-8",children:s.total_quizzes??"N/A"}),e.jsx("td",{className:"py-3 px-8",children:s.total_questions??"N/A"}),e.jsx("td",{className:"py-3 px-8",children:s.incorrect_questions??"N/A"}),e.jsx("td",{className:"py-3 px-8",children:s.accepts}),e.jsx("td",{className:"py-3 px-8",children:s.dismiss}),e.jsx("td",{className:"py-3 px-8",children:s.total_typings}),e.jsx("td",{className:"py-3 px-8",children:s.incorrect_typings}),e.jsx("td",{className:"py-3 px-8",children:s.homo_avg||"N/A"}),e.jsx("td",{className:"py-3 px-8",children:s.avg_score}),e.jsx("td",{className:"py-3 px-8",children:s.avg_pause||"N/A"}),e.jsx("td",{className:"py-3 px-8",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ne(s),className:"px-2 py-1 rounded-2xl text-sm border bg-green-500 hover:bg-green-600 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95 text-gray-50",children:"JSON"}),e.jsx("button",{onClick:()=>{o("xml"),ne(s)},className:"px-2 py-1 rounded-2xl text-sm border bg-green-500 hover:bg-green-600 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95 text-gray-50",children:"XML"})]})})]},s.id))})]})}),e.jsx("div",{className:"mt-4 px-6 py-3 border-t border-gray-100",children:H>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>X(s=>Math.max(1,s-1)),disabled:K===1,className:"px-3 py-1 border rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95 disabled:hover:scale-100",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1",children:["Page ",K," of ",H]}),e.jsx("button",{onClick:()=>X(s=>Math.min(H,s+1)),disabled:K===H,className:"px-3 py-1 border rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95 disabled:hover:scale-100",children:"Next"})]})})]})})}),e.jsx(ue,{show:r,onClose:()=>S(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export Student Analytics Data"}),e.jsxs("div",{className:"mb-3 text-sm text-gray-600",children:["Selected: ",e.jsx("strong",{children:w.length})," — Filtered: ",e.jsx("strong",{children:y.length})]}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Name"}),e.jsx("input",{type:"text",value:E,onChange:s=>_(s.target.value),placeholder:"Enter file name",className:"w-full px-3 py-2 border rounded-2xl focus:ring-1 focus:ring-blue-500 transition-all duration-200"})]}),e.jsxs("div",{className:"w-40",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Type"}),e.jsxs("select",{value:C,onChange:s=>o(s.target.value),className:"w-full px-3 py-2 border rounded-2xl transition-all duration-200",children:[e.jsx("option",{value:"json",children:"JSON"}),e.jsx("option",{value:"xml",children:"XML"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium mb-3",children:"Export scope:"}),e.jsxs("div",{className:"space-x-6",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"scope",checked:P==="selected",onChange:()=>z("selected"),disabled:w.length===0,className:"mr-2"}),e.jsxs("span",{children:["Selected (",w.length,")"]})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"scope",checked:P==="filtered",onChange:()=>z("filtered"),className:"mr-2"}),e.jsxs("span",{children:["All Filtered (",y.length,")"]})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-1 border-2 border-gray-300 rounded-2xl text-gray-700 hover:bg-gray-100 transition-all duration-200 ease-in-out hover:shadow-sm font-semibold",children:"Cancel"}),e.jsxs("button",{onClick:Y,className:"px-4 py-1 bg-green-600 text-white rounded-2xl font-semibold hover:bg-green-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:["Export ",P==="selected"?"Selected":"All"]})]})]})})]})}const es=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"}));function Ge({auth:c,user:m,article:u,summaryMetrics:i,sessionTimeline:v,errorAnalysis:h,keystrokePatterns:d,audioBehavior:l,comparisonMetrics:p,temporalProgression:g}){const b=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=r=>r>=80?"text-green-600 bg-green-50":r>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",k=r=>r>5?e.jsx(ge,{className:"w-5 h-5 text-green-600"}):r<-5?e.jsx(Fe,{className:"w-5 h-5 text-red-600"}):e.jsx(De,{className:"w-5 h-5 text-gray-600"});return e.jsxs(te,{breadcrumb:e.jsx(se,{header:`${u.title} - ${m.name}`,links:[{title:"Home",url:"/"},{title:"Users",url:route("users.index")},{title:"Article Detail",url:""}]}),children:[e.jsx(ee,{title:`${u.title} - ${m.name} Detail`}),e.jsxs("div",{className:"pt-6 pb-8",children:[e.jsxs("div",{className:"flex space-x-2 mb-6",children:[e.jsxs("a",{href:route("users.articles.export",{userId:m.id,articleId:u.id,format:"csv"}),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 hover:scale-105 hover:shadow-md text-white hover:text-white transition-all duration-200 ease-in-out shadow-sm rounded-2xl",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs("a",{href:route("users.articles.export",{userId:m.id,articleId:u.id,format:"json"}),className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 hover:scale-105 hover:shadow-md text-white hover:text-white transition-all duration-200 ease-in-out shadow-sm rounded-2xl",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export JSON"]}),e.jsxs("a",{href:route("users.articles.export",{userId:m.id,articleId:u.id,format:"xml"}),className:"inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 hover:scale-105 hover:shadow-md text-white hover:text-white transition-all duration-200 ease-in-out shadow-sm rounded-2xl",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Export XML"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Attempts"}),e.jsx(fe,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:i.total_attempts})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Learning Gain"}),k(i.learning_gain)]}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.learning_gain>=0?"+":"",i.learning_gain,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.first_attempt_accuracy,"% → ",i.last_attempt_accuracy,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Best Accuracy"}),e.jsx(je,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[i.best_accuracy,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Avg Accuracy"})}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.avg_accuracy,"%"]})]})]}),p.has_comparison&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(ge,{className:"w-5 h-5 mr-2 text-blue-600"}),"First vs Latest Attempt Comparison"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Accuracy Improvement"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[p.accuracy_comparison.improvement>=0?"+":"",p.accuracy_comparison.improvement,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["From ",p.accuracy_comparison.first,"% to ",p.accuracy_comparison.last,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Error Reduction"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["-",p.error_comparison.reduction_percent,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["From ",p.error_comparison.first," to ",p.error_comparison.last," errors"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Effect Size (Cohen's d)"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.effect_size_cohens_d}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:p.effect_size_cohens_d>.8?"Large effect":p.effect_size_cohens_d>.5?"Medium effect":"Small effect"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Learning Curve: Accuracy Progression"}),e.jsx(F,{width:"100%",height:300,children:e.jsxs(ce,{data:v,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"attempt_number",label:{value:"Attempt Number",position:"insideBottom",offset:-5}}),e.jsx(I,{label:{value:"Accuracy (%)",angle:-90,position:"insideLeft"},domain:[0,100]}),e.jsx(B,{}),e.jsx(O,{}),e.jsx(xe,{type:"monotone",dataKey:"accuracy_percent",stroke:"#3B82F6",strokeWidth:3,name:"Accuracy %",dot:{r:5}})]})}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600 bg-blue-50 p-3 rounded-2xl",children:[e.jsx("strong",{children:"Interpretation:"})," ",i.learning_gain>0?`Positive learning trajectory with ${i.learning_gain}% improvement. This indicates successful skill acquisition.`:"Performance remains stable or declined. May need additional support or practice."]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Error Pattern Evolution"}),e.jsx(F,{width:"100%",height:300,children:e.jsxs(Le,{data:h.error_evolution,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"attempt",label:{value:"Attempt Number",position:"insideBottom",offset:-5}}),e.jsx(I,{label:{value:"Error Count",angle:-90,position:"insideLeft"}}),e.jsx(B,{}),e.jsx(O,{}),e.jsx(he,{type:"monotone",dataKey:"replaced",stackId:"1",stroke:"#F59E0B",fill:"#F59E0B",name:"Replaced Errors"}),e.jsx(he,{type:"monotone",dataKey:"extra",stackId:"1",stroke:"#FBBF24",fill:"#FBBF24",name:"Extra Errors"}),e.jsx(he,{type:"monotone",dataKey:"missing",stackId:"1",stroke:"#EF4444",fill:"#EF4444",name:"Missing Errors"})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Error Reduction"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[h.error_reduction.reduction_percent,"%"]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[h.error_reduction.first_attempt_errors," → ",h.error_reduction.last_attempt_errors]})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Repeated Errors"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[h.repeated_error_analysis.repeated_error_rate_percent,"%"]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[h.repeated_error_analysis.errors_repeated," of ",h.repeated_error_analysis.unique_errors," unique errors"]})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Total Unique Errors"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.repeated_error_analysis.unique_errors}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Across all attempts"})]})]})]}),d.typing_evolution&&d.typing_evolution.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Typing Fluency Evolution"}),e.jsx(F,{width:"100%",height:300,children:e.jsxs(ce,{data:d.typing_evolution,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"attempt",label:{value:"Attempt Number",position:"insideBottom",offset:-5}}),e.jsx(I,{label:{value:"Speed (WPM)",angle:-90,position:"insideLeft"}}),e.jsx(B,{}),e.jsx(O,{}),e.jsx(xe,{type:"monotone",dataKey:"typing_speed_wpm",stroke:"#8B5CF6",strokeWidth:2,name:"Typing Speed (WPM)",dot:{r:4}})]})}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Speed Improvement"}),e.jsxs("div",{className:"text-xl font-bold text-purple-600",children:[d.trends.typing_speed_improvement_percent>=0?"+":"",d.trends.typing_speed_improvement_percent,"%"]})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Backspace Reduction"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["-",d.trends.backspace_reduction_percent,"%"]})]})]})]}),l.audio_evolution&&l.audio_evolution.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Audio Listening Behavior"}),e.jsx(F,{width:"100%",height:300,children:e.jsxs(pe,{data:l.audio_evolution,children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"attempt",label:{value:"Attempt Number",position:"insideBottom",offset:-5}}),e.jsx(I,{label:{value:"Count",angle:-90,position:"insideLeft"}}),e.jsx(B,{}),e.jsx(O,{}),e.jsx(J,{dataKey:"plays",fill:"#F59E0B",name:"Audio Plays"}),e.jsx(J,{dataKey:"rewinds",fill:"#EF4444",name:"Rewinds"}),e.jsx(J,{dataKey:"forwards",fill:"#10B981",name:"Forwards"})]})}),e.jsxs("div",{className:"mt-3 bg-yellow-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Dependency Trend"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`px-3 py-1 rounded-2xl text-sm font-medium ${l.dependency_trend.trend==="declining"?"bg-green-100 text-green-700":l.dependency_trend.trend==="increasing"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:l.dependency_trend.trend.charAt(0).toUpperCase()+l.dependency_trend.trend.slice(1)}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",l.dependency_trend.change_percent>=0?"+":"",l.dependency_trend.change_percent,"% from first to last)"]})]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:l.dependency_trend.trend==="declining"?"âœ… Positive trend: User is becoming more independent from audio support":l.dependency_trend.trend==="increasing"?"â ï¸ Increasing reliance on audio may indicate difficulty":"Stable audio usage across attempts"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Detailed Session History"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attempt"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accuracy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Errors"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Typing Speed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acceptance Rate"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",r.attempt_number]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b(r.session_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-2xl text-xs font-medium ${N(r.accuracy_percent)}`,children:[r.accuracy_percent,"%"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[r.total_errors,e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(R:",r.replaced_errors," E:",r.extra_errors," M:",r.missing_errors,")"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.typing_speed_wpm?`${r.typing_speed_wpm} WPM`:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.session_duration_minutes?`${r.session_duration_minutes} min`:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.acceptance_rate_percent?`${r.acceptance_rate_percent}%`:"N/A"})]},r.attempt_number))})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ue,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Key Insights for Thesis Analysis"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"H2.1 (Learning Gains):"})," ",i.learning_gain>15?`âœ… Substantial improvement of ${i.learning_gain}% exceeds typical learning curves`:"Moderate improvement observed. Consider intervention duration or support level."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"H2.2 (Error Reduction):"})," ",h.repeated_error_analysis.repeated_error_rate_percent<30?`âœ… Low repeated error rate (${h.repeated_error_analysis.repeated_error_rate_percent}%) indicates effective learning`:"â ï¸ High repeated error rate suggests need for targeted remediation"]}),p.has_comparison&&e.jsxs("p",{children:[e.jsx("strong",{children:"Effect Size:"})," Cohen's d = ",p.effect_size_cohens_d,p.effect_size_cohens_d>.8?" (Large effect - strong intervention impact)":p.effect_size_cohens_d>.5?" (Medium effect)":" (Small effect)"]}),e.jsx("p",{className:"text-xs text-gray-600 italic mt-3",children:"💡 Export data above for statistical analysis in SPSS, R, or Python. Use temporal progression to analyze spaced repetition effects."})]})]})]})]})}const ss=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"}));export{Ye as C,Qe as I,Ze as P,es as U,ss as a};
