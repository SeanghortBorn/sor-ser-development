import{t as De,r as o,j as e,a7 as ne,L as he,u as we,aC as Fe,aq as Le,a1 as Ie,ab as Te,aD as Oe,aE as ze,M as _e,a8 as J,h as O,i as pe,k as z,X as B,Y as K,l as M,n as q,o as ue,aw as je,ax as Z,U as ke,S as Be,aF as Ke,aG as Me,aH as qe,aI as be,g as Ne,au as We,av as fe,a3 as He,aJ as Je,aK as Ve}from"../vendor/vendor-common.CH-fBE_6.js";import{e as me,b as oe,m as Ge,S as Xe,c as le,d as Ye,C as Qe,M as ye}from"../components/components-common.D7W8eAaP.js";import{A as ie,u as Ze,a as es}from"./page-articles.CZ8cW0dp.js";function ss({user:n,roles:h}){n=n||{id:null,name:"",email:"",roles:[],created_at:null};const{data:b,setData:m,post:_,patch:p,errors:c,reset:l,processing:u,recentlySuccessful:j}=De({name:n.name??"",email:n.email??"",roles:Array.isArray(n.roles)&&n.roles.length>0?n.roles.map(x=>x.id):[],password:""}),[f,k]=o.useState(!1),E=o.useRef(null);o.useEffect(()=>{if(!f)return;function x(y){E.current&&!E.current.contains(y.target)&&k(!1)}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[f]);const i=o.useMemo(()=>h.find(x=>x.id===b.roles[0]),[h,b.roles]),R=x=>{m("roles",x?[x]:[]),k(!1)},L=x=>{x.preventDefault(),n.id?p(route("users.update",n.id),{preserveState:!0,onFinish:()=>l()}):_(route("users.store"),{preserveState:!0,onFinish:()=>l()})},N=n.id?"User Edit":"User Create",W=[{title:"Home",url:"/"},{title:N,url:""}];return e.jsxs(ie,{breadcrumb:e.jsx(oe,{header:N,links:W}),children:[e.jsx(ne,{title:N}),e.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50/30 mb-12",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:N}),e.jsx("p",{className:"text-gray-500",children:n?"Update user details":"Create a new user for your system"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{id:"name",name:"name",type:"text",placeholder:"Enter user name",value:b.name,onChange:x=>m("name",x.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-2xl border ${c.name?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(me,{message:c.name,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",placeholder:"Enter email",value:b.email,onChange:x=>m("email",x.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-2xl border ${c.email?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(me,{message:c.email,className:"mt-1 text-sm text-red-600"})]}),!n.id&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",placeholder:"Enter password",value:b.password,onChange:x=>m("password",x.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-2xl border ${c.password?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),e.jsx(me,{message:c.password,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"roles",className:"block text-sm font-medium text-gray-700 mb-1",children:"Roles"}),e.jsxs("div",{className:"relative w-1/3",ref:E,children:[e.jsxs("button",{type:"button",className:`w-full px-3 py-2 text-sm rounded-2xl border bg-white shadow-sm text-left flex justify-between items-center focus:outline-none focus:ring-2 transition-all duration-200 ${c.roles?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"}`,onClick:()=>k(!f),children:[i?i.name:"Select a Role (optional)",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${f?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&e.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-full bg-white border border-gray-200 rounded-2xl shadow-sm z-50 max-h-60 overflow-y-auto hide-scrollbar",children:e.jsxs("div",{className:"px-2 py-2 space-y-1",children:[e.jsx("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-4 py-2 text-sm rounded-2xl transition-all duration-200 ${b.roles[0]?"hover:bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700 font-bold"}`,onClick:()=>R(null),children:"Select a Roles (Optional)"}),h.map(x=>e.jsx("button",{type:"button",className:`flex items-center gap-2 w-full text-left px-4 py-2 text-sm rounded-2xl transition-all duration-200 ${b.roles[0]===x.id?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>R(x.id),children:x.name},x.id))]})})]}),e.jsx(me,{message:c.roles,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx(he,{href:route("users.index"),className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-2xl text-gray-600 border-2 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 ease-in-out hover:shadow-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"inline-flex items-center justify-center px-6 py-2 text-sm font-medium rounded-2xl text-white bg-gradient-to-r from-blue-500 to-blue-500 shadow-sm transition-all duration-200 ease-in-out hover:from-blue-500 hover:to-blue-600 hover:scale-105 hover:shadow-md active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed disabled:hover:scale-100",children:u?n.id?"Updating...":"Saving...":n.id?"Update User":"Save User"})]})]})]})})})]})}const cs=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"}));function ts({users:n,permissions:h=[],search:b="",userStats:m={},showTrashed:_=!1}){const{auth:p}=we().props,c=p?.can??{},{searchTerm:l,handleSearch:u}=Ze("users.index",b),[j,f]=o.useState(!1),[k,E]=o.useState(null),[i,R]=o.useState([]),[L,N]=o.useState(!1),[W,x]=o.useState(!1),[y,ee]=o.useState(null),[U,se]=o.useState(""),[S,I]=o.useState(!1),[de,V]=o.useState(""),g=es(t=>{const d=t.blocked?route("users.unblock",t.id):route("users.block",t.id);return window.axios.post(d).then(()=>{J.reload({only:["users","userStats"]})})}),T=o.useMemo(()=>{const t=m&&Object.keys(m).length>0?m:{total:n.data?.length||0,employees:n.data?.filter(d=>d.roles?.length>0).length||0,students:n.data?.filter(d=>d.permissions?.length>0&&(!d.roles||d.roles.length===0)).length||0,normal:n.data?.filter(d=>(!d.permissions||d.permissions.length===0)&&(!d.roles||d.roles.length===0)).length||0};return[{label:"Total Users",value:t.total,icon:"UsersRound",color:"text-blue-500",borderColor:"border-blue-100",bgColor:"bg-blue-50",description:"All users registered in the system"},{label:"Employees",value:t.employees,icon:"UserCheck",color:"text-green-500",borderColor:"border-green-100",bgColor:"bg-green-50",description:"All verified staff or employee accounts"},{label:"Experiment Group",value:t.students,icon:"GraduationCap",color:"text-orange-500",borderColor:"border-orange-100",bgColor:"bg-orange-50",description:"All student accounts currently active"},{label:"Control Group",value:t.normal,icon:"User",color:"text-purple-500",borderColor:"border-purple-100",bgColor:"bg-purple-50",description:"All users without special roles"}]},[m,n.data]),w=t=>{E(t);const d=t.permissions?t.permissions.map(D=>D.id):[],P=h.find(D=>D.name==="student")?.id;R(d.length>0?d:P?[P]:[]),f(!0)},H=t=>{t.preventDefault(),k&&(N(!0),window.axios.patch(route("users.update-permissions",k.id),{permissions:i}).then(()=>{N(!1),f(!1),J.reload({only:["users","userStats"]})}).catch(()=>N(!1)))},G=t=>{t.preventDefault(),k&&(N(!0),window.axios.patch(route("users.update-permissions",k.id),{permissions:[]}).then(()=>{N(!1),f(!1),J.reload({only:["users","userStats"]})}).catch(()=>N(!1)))},X=t=>{ee(t),se(""),V(""),x(!0)},Y=t=>{if(t.preventDefault(),!y||!U.trim()){V("Password is required.");return}I(!0),V(""),window.axios.post(route("users.reset-password",y.id),{password:U}).then(()=>{x(!1),ee(null),se(""),I(!1),J.reload({only:["users"]})}).catch(d=>{I(!1),V(d?.response?.data?.message||"Failed to reset password.")})},Q=()=>{J.get(route("users.index"),{search:l,trashed:_?0:1},{preserveState:!0,replace:!0})},te=t=>{J.post(route("users.restore",t),{},{preserveScroll:!0,onSuccess:()=>J.reload({only:["users","userStats"]})})},$="User List",ae=[{title:"Home",url:"/"},{title:$,url:""}];return e.jsxs(ie,{breadcrumb:e.jsx(oe,{header:$,links:ae}),children:[e.jsx(ne,{title:$}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:T.map((t,d)=>e.jsx(Ge,{...t},d))}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:_?"Deleted Users":"Active Users"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(Xe,{value:l,onChange:u,placeholder:"Search users..."}),e.jsx("button",{onClick:Q,className:"inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-semibold text-sm text-white bg-gray-600 hover:bg-gray-500 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:_?"View Active":"View Deleted"}),c["user-create"]&&!_&&e.jsxs(he,{href:route("users.create"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-2xl font-semibold text-sm text-white bg-green-600 hover:bg-green-500 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Add User"]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"ID"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Roles"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Permissions"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Joined"}),e.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"text-sm divide-y divide-gray-200 bg-white",children:n.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:_?"No deleted users found":"No users found"})}):n.data.map(t=>e.jsxs("tr",{className:"hover:bg-blue-50 transition-all duration-200",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.id}),e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:t.email}),e.jsx("td",{className:"px-6 py-4",children:t.roles?.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles.map(d=>e.jsx("span",{className:"px-2.5 py-1 bg-blue-100 text-blue-700 rounded-2xl text-xs font-semibold",children:d.name},d.id))}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No roles"})}),e.jsx("td",{className:"px-6 py-4",children:t.permissions?.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.permissions.slice(0,2).map(d=>e.jsx("span",{className:"px-2.5 py-1 bg-green-100 text-green-700 rounded-2xl text-xs font-semibold",children:d.name},d.id)),t.permissions.length>2&&e.jsxs("span",{className:"px-2.5 py-1 bg-gray-100 text-gray-700 rounded-2xl text-xs font-semibold",children:["+",t.permissions.length-2]})]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"No permissions"})}),e.jsx("td",{className:"px-6 py-4",children:t.blocked?e.jsx("span",{className:"px-2.5 py-1 bg-red-100 text-red-700 rounded-2xl text-xs font-semibold",children:"Blocked"}):e.jsx("span",{className:"px-2.5 py-1 bg-green-100 text-green-700 rounded-2xl text-xs font-semibold",children:"Active"})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:Le(t.created_at).format("MMM D, YYYY")}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:_?e.jsx(le,{onClick:()=>te(t.id),icon:Ie,tooltip:"Restore User",variant:"green"}):e.jsxs(e.Fragment,{children:[c["user-edit"]&&e.jsx(he,{href:route("users.edit",t.id),children:e.jsx(le,{icon:Te,tooltip:"Edit User",variant:"blue"})}),c["user-permissions"]&&e.jsx(le,{onClick:()=>w(t),icon:Oe,tooltip:"Manage Permissions",variant:"green"}),c["user-block"]&&e.jsx(le,{onClick:()=>g.openModal(t),icon:ze,tooltip:t.blocked?"Unblock User":"Block User",variant:t.blocked?"green":"red"}),c["user-reset-password"]&&e.jsx(le,{onClick:()=>X(t),icon:_e,tooltip:"Reset Password",variant:"yellow"})]})})})]},t.id))})]})}),e.jsx("div",{className:"mt-6",children:e.jsx(Ye,{links:n.links})})]}),e.jsx(Qe,{show:g.showModal,onClose:g.closeModal,onConfirm:g.confirm,title:g.target?.blocked?"Unblock User":"Block User",message:g.target?.blocked?`Are you sure you want to unblock ${g.target?.name}?`:`Are you sure you want to block ${g.target?.name}? They will not be able to access the system.`,confirmText:g.target?.blocked?"Unblock":"Block",confirmStyle:g.target?.blocked?"success":"danger",processing:g.processing}),e.jsx(ye,{show:j,onClose:()=>f(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Manage Permissions for ",k?.name]}),e.jsxs("form",{onSubmit:H,children:[e.jsx("div",{className:"space-y-2 mb-4",children:h.map(t=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.includes(t.id),onChange:d=>{d.target.checked?R([...i,t.id]):R(i.filter(P=>P!==t.id))},className:"rounded-2xl border-gray-300 text-blue-600 focus:ring-blue-500 transition-all duration-200"}),e.jsx("span",{className:"text-sm text-gray-700",children:t.name})]},t.id))}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:G,className:"rounded-2xl border-2 border-red-300 px-6 py-1 text-red-600 hover:bg-red-50 transition-all duration-200 ease-in-out hover:shadow-sm font-semibold",disabled:L,children:"Remove All"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"rounded-2xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition-all duration-200 ease-in-out hover:shadow-sm font-semibold",disabled:L,children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-2xl px-9 py-1 bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",disabled:L,children:L?"Saving...":"Save"})]})]})]})]})}),e.jsx(ye,{show:W,onClose:()=>x(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Reset Password for ",y?.name]}),e.jsxs("form",{onSubmit:Y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:U,onChange:t=>se(t.target.value),className:"w-full rounded-2xl border-gray-300 focus:border-blue-500 focus:ring-blue-500 transition-all duration-200",placeholder:"Enter new password"}),de&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:de})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"rounded-2xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition-all duration-200 ease-in-out hover:shadow-sm font-semibold",disabled:S,children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-2xl px-9 py-1 bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",disabled:S,children:S?"Resetting...":"Reset Password"})]})]})]})})]})}const xs=Object.freeze(Object.defineProperty({__proto__:null,default:ts},Symbol.toStringTag,{value:"Module"}));function as({auth:n,user:h,articlesAttempted:b,accuracyTrends:m,correctionPatterns:_,typingActivity:p,audioBehavior:c,learningMetrics:l}){const u=[{title:"Home",url:"/"},{title:"Users",url:route("users.index")},{title:`${h.name} Progress`,url:""}];return e.jsxs(ie,{breadcrumb:e.jsx(oe,{header:`${h.name} - Progress`,links:u}),children:[e.jsx(ne,{title:`${h.name} - Progress Dashboard`}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"mb-8 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"User Profile"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),e.jsx("p",{className:"font-semibold",children:h.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-semibold",children:h.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-2xl ${h.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:h.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Roles"}),e.jsx("p",{className:"font-semibold",children:h.roles.length>0?h.roles.join(", "):"No roles"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Registered"}),e.jsx("p",{className:"font-semibold",children:h.created_at})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Checks"}),e.jsx("p",{className:"font-semibold",children:h.total_checks})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl p-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overall Accuracy"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[l.overall_accuracy,"%"]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl p-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Progress Trend"}),e.jsx("p",{className:`text-2xl font-bold ${l.progress_trend==="Improving"?"text-green-600":l.progress_trend==="Declining"?"text-red-600":"text-gray-600"}`,children:l.progress_trend})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl p-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Attempts"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:l.total_attempts})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl p-8",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Improvement Rate"}),e.jsxs("p",{className:`text-2xl font-bold ${l.improvement_rate>0?"text-green-600":"text-red-600"}`,children:[l.improvement_rate>0?"+":"",l.improvement_rate,"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-700",children:"Strengths"}),l.strengths.length>0?e.jsx("ul",{className:"space-y-2",children:l.strengths.map((j,f)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),j]},f))}):e.jsx("p",{className:"text-gray-500",children:"Not enough data yet"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-700",children:"Areas for Improvement"}),l.weaknesses.length>0?e.jsx("ul",{className:"space-y-2",children:l.weaknesses.map((j,f)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),j]},f))}):e.jsx("p",{className:"text-gray-500",children:"Excellent performance across all areas!"})]})})]}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl mb-8",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Daily Accuracy Trends (Last 30 Days)"}),m.length>0?e.jsx(O,{width:"100%",height:300,children:e.jsxs(pe,{data:m,children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date"}),e.jsx(K,{domain:[0,100]}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(ue,{type:"monotone",dataKey:"accuracy",stroke:"#3B82F6",strokeWidth:2,name:"Accuracy (%)"})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No accuracy data available for the last 30 days"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl mb-8",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Correction Patterns (Accept vs Reject)"}),_.length>0?e.jsx(O,{width:"100%",height:300,children:e.jsxs(je,{data:_,children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date"}),e.jsx(K,{}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(Z,{dataKey:"accepted",fill:"#10B981",name:"Accepted"}),e.jsx(Z,{dataKey:"rejected",fill:"#EF4444",name:"Rejected"})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No correction data available"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl mb-8",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Typing Activity"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Characters Typed"}),e.jsx("p",{className:"text-2xl font-bold",children:p.total_characters.toLocaleString()})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Per Session"}),e.jsx("p",{className:"text-2xl font-bold",children:p.average_per_session})]})]}),p.daily.length>0?e.jsx(O,{width:"100%",height:250,children:e.jsxs(pe,{data:p.daily,children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date"}),e.jsx(K,{}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(ue,{type:"monotone",dataKey:"characters",stroke:"#8B5CF6",strokeWidth:2,name:"Characters Typed"})]})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No typing data available"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl mb-8",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Audio Listening Behavior"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Plays"}),e.jsx("p",{className:"text-2xl font-bold",children:c.total_plays})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rewinds"}),e.jsx("p",{className:"text-2xl font-bold",children:c.total_rewinds})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Fast Forwards"}),e.jsx("p",{className:"text-2xl font-bold",children:c.total_forwards})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Position"}),e.jsxs("p",{className:"text-2xl font-bold",children:[c.avg_playback_position,"s"]})]})]}),c.daily.length>0&&e.jsx(O,{width:"100%",height:250,children:e.jsxs(je,{data:c.daily,children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"date"}),e.jsx(K,{}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(Z,{dataKey:"plays",fill:"#F59E0B",name:"Audio Plays"})]})})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 rounded-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Articles Attempted"}),b.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Article Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attempts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Best Accuracy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Accuracy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Latest Attempt"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(j=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.attempts}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-2xl ${j.best_accuracy>=80?"bg-green-100 text-green-800":j.best_accuracy>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[j.best_accuracy,"%"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[j.average_accuracy,"%"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.latest_attempt}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(he,{href:route("users.articles.details",{userId:h.id,articleId:j.article_id}),className:"inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-2xl transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-md active:scale-95 shadow-sm",children:[e.jsx(ke,{className:"w-4 h-4 mr-1.5"}),"View Details"]})})]},j.article_id))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No articles attempted yet"})]})})]})]})}const ms=Object.freeze(Object.defineProperty({__proto__:null,default:as},Symbol.toStringTag,{value:"Module"}));function rs(){const{analytics:n=[]}=we().props,h=[{value:"",label:"All Experience"},{value:"None",label:"None"},{value:"Beginner",label:"Beginner"},{value:"Intermediate",label:"Intermediate"},{value:"Advanced",label:"Advanced"},{value:"Expert",label:"Expert"}],b=[{value:"",label:"All Education"},{value:"Primary",label:"Primary"},{value:"Secondary",label:"Secondary"},{value:"High School",label:"High School"},{value:"Bachelor",label:"Bachelor"},{value:"Master",label:"Master"},{value:"Doctorate",label:"Doctorate"},{value:"Other",label:"Other"}],[m,_]=o.useState(""),[p,c]=o.useState(""),[l,u]=o.useState(""),[j,f]=o.useState(!1),[k,E]=o.useState(!1),[i,R]=o.useState(!1),[L,N]=o.useState(!1),[W,x]=o.useState(""),[y,ee]=o.useState("json"),[U,se]=o.useState(!1),[S,I]=o.useState([]),[de,V]=o.useState("filtered"),[g,T]=o.useState(!1),[w,H]=o.useState("filtered"),[G,X]=o.useState(""),[Y,Q]=o.useState(""),te=o.useRef(null);o.useEffect(()=>{const s=r=>{te.current&&!te.current.contains(r.target)&&f(!1)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);const $=o.useMemo(()=>n.filter(s=>{const r=m.trim().toLowerCase();if(r){const a=String(s.name||"").toLowerCase().includes(r),C=String(s.email||"").toLowerCase().includes(r);if(!a&&!C)return!1}return!(p&&String(s.experience||"")!==p||l&&String(s.education||"")!==l)}),[n,m,p,l]),ae=15,[t,d]=o.useState(1);o.useEffect(()=>d(1),[m,p,l]);const P=Math.max(1,Math.ceil($.length/ae)),D=$.slice((t-1)*ae,t*ae);o.useEffect(()=>{I(s=>s.filter(r=>$.some(a=>a.id===r)))},[$]);const ce=(s,r,a)=>{const C=new Blob([s],{type:a}),F=URL.createObjectURL(C),A=document.createElement("a");A.href=F,A.download=r,A.click(),URL.revokeObjectURL(F)},v=s=>String(s??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),xe=s=>`<?xml version="1.0" encoding="UTF-8"?>
<Students>
${s.map(a=>`   
            <Student>
                <id>${v(a.id)}</id>
                <name>${v(a.name)}</name>
                <email>${v(a.email)}</email>
                <role>${v(a.role)}</role>
                <age>${v(a.age)}</age>
                <education>${v(a.education)}</education>
                <experience>${v(a.experience)}</experience>
                <total_articles>${v(a.total_articles)}</total_articles>
                <total_quizzes>${v(a.total_quizzes)}</total_quizzes>
                <total_questions>${v(a.total_questions)}</total_questions>
                <incorrect_questions>${v(a.incorrect_questions)}</incorrect_questions>
                <accepts>${v(a.accepts)}</accepts>
                <dismiss>${v(a.dismiss)}</dismiss>
                <total_typings>${v(a.total_typings)}</total_typings>
                <incorrect_typings>${v(a.incorrect_typings)}</incorrect_typings>
                <homo_avg>${v(a.homo_avg)}</homo_avg>
                <avg_score>${v(a.avg_score||"N/A")}</avg_score>
                <avg_pause>${v(a.avg_pause)}</avg_pause>
            </Student>`).join(`
`)}
</Students>`,Se=async()=>{let s=[];if(w==="selected"&&S.length>0?s=n.filter(r=>S.includes(r.id)):w==="role"&&G?s=n.filter(r=>r.role===G):w==="specific"&&Y?s=n.filter(r=>r.id===parseInt(Y)):w==="all"?s=n:s=$,s.length===0){alert("No data to export! Please select a valid export option.");return}T(!0);try{const r=s.map(Ue=>Ue.id);console.log("Attempting to export users:",r);const a=await window.axios.post("/api/user-analytics/export",{user_ids:r});console.log("Export successful:",a);const C=a.data,F=new Date().toISOString().slice(0,19).replace("T","_").replace(/:/g,"-");let A="";w==="selected"?A=`selected_${s.length}`:w==="role"?A=`role_${G}_${s.length}`:w==="specific"?A=`user_${Y}`:w==="all"?A=`all_users_${s.length}`:A=`filtered_${s.length}`;const re=`${A}_users_detailed_${F}`,Pe=`${W.trim()||re}.${y==="json"?"json":"xml"}`,Re=y==="json"?JSON.stringify(C,null,2):xe(C);ce(Re,Pe,y==="json"?"application/json;charset=utf-8":"application/xml;charset=utf-8"),N(!1),x(""),T(!1)}catch(r){console.error("Export error:",r),r.response&&(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status),console.error("Response headers:",r.response.headers),console.error("Full response:",JSON.stringify(r.response.data,null,2))),console.warn("Using fallback basic export due to API error"),alert("Note: Exporting basic data. Detailed export failed with server error. Check console for details.");const a=new Date().toISOString().slice(0,19).replace("T","_").replace(/:/g,"-"),C=de==="selected"?`selected_${s.length}_students_${a}`:`all_filtered_${s.length}_students_${a}`,A=`${W.trim()||C}.${y==="json"?"json":"xml"}`,re=y==="json"?JSON.stringify(s,null,2):xe(s);ce(re,A,y==="json"?"application/json;charset=utf-8":"application/xml;charset=utf-8"),N(!1),x(""),T(!1)}},ve=async s=>{T(!0);try{const a=(await window.axios.post("/api/user-analytics/export",{user_ids:[s.id]})).data,C=(s.name||`student_${s.id}`).replace(/[^\w\-_. ]/g,"_"),F=new Date().toISOString().slice(0,19).replace("T","_").replace(/:/g,"-"),A=`${C}_${s.id}_detailed_${F}.${y==="json"?"json":"xml"}`,re=y==="json"?JSON.stringify(a[0],null,2):xe(a);ce(re,A,y==="json"?"application/json":"application/xml"),T(!1)}catch(r){console.error("Single export error:",r),alert("Failed to export detailed data. Exporting basic data instead.");const C=`${(s.name||`student_${s.id}`).replace(/[^\w\-_. ]/g,"_")}_${s.id}.${y==="json"?"json":"xml"}`,F=y==="json"?JSON.stringify(s,null,2):xe([s]);ce(F,C,y==="json"?"application/json":"application/xml"),T(!1)}},Ce=s=>{I(r=>r.includes(s)?r.filter(a=>a!==s):[...r,s])},Ae=()=>{const s=D.map(a=>a.id),r=s.every(a=>S.includes(a));I(r?a=>a.filter(C=>!s.includes(C)):a=>[...new Set([...a,...s])])},Ee=D.length>0&&D.every(s=>S.includes(s.id)),ge="User Analytics",$e=[{title:"Home",url:"/"},{title:ge,url:""}];return e.jsxs(ie,{breadcrumb:e.jsx(oe,{header:ge,links:$e}),children:[e.jsx(ne,{title:ge}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"bg-white shadow-sm rounded-2xl overflow-hidden border border-gray-100 mb-12",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-3 flex-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 rounded-xl border border-gray-300 hover:border-gray-400 hover:shadow-sm transition text-sm bg-white",children:[e.jsx(Be,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:m,onChange:s=>_(s.target.value),type:"text",placeholder:"Search by name or email",className:"px-2 w-[220px] py-2 rounded-xl border-none text-sm focus:outline-none focus:ring-0"})]}),e.jsxs("div",{className:"relative filter-dropdown-parent",ref:te,children:[e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-sm bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",onClick:()=>f(s=>!s),children:[e.jsx("i",{className:"fas fa-filter w-4 h-4"}),e.jsx("span",{children:"Filter"}),e.jsx("i",{className:`fas fa-chevron-down transition-transform duration-300 ${j?"rotate-180":""}`})]}),j&&e.jsx("div",{className:"absolute left-0 mt-2 w-80 bg-white border border-gray-200 rounded-xl shadow-lg z-50 animate-fade-in",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Experience Level"}),e.jsxs("button",{type:"button",onClick:()=>E(!k),className:"w-full px-3 py-2 border border-gray-300 rounded-xl bg-white cursor-pointer focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm font-medium text-gray-700 transition-all duration-200 hover:border-purple-400 flex items-center justify-between",children:[e.jsx("span",{children:h.find(s=>s.value===p)?.label||"All Experience"}),e.jsx("i",{className:`fas fa-chevron-down transition-transform duration-200 ${k?"rotate-180":""}`})]}),k&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg max-h-48 overflow-y-auto animate-fade-in",children:h.map(s=>e.jsx("div",{onClick:()=>{c(s.value),E(!1)},className:`px-3 py-2 text-sm font-medium cursor-pointer transition-colors duration-150 ${p===s.value?"bg-purple-50 text-purple-700":"text-gray-700 hover:bg-purple-50"}`,children:s.label},s.value))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Education Level"}),e.jsxs("button",{type:"button",onClick:()=>R(!i),className:"w-full px-3 py-2 border border-gray-300 rounded-xl bg-white cursor-pointer focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm font-medium text-gray-700 transition-all duration-200 hover:border-purple-400 flex items-center justify-between",children:[e.jsx("span",{children:b.find(s=>s.value===l)?.label||"All Education"}),e.jsx("i",{className:`fas fa-chevron-down transition-transform duration-200 ${i?"rotate-180":""}`})]}),i&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg max-h-48 overflow-y-auto animate-fade-in",children:b.map(s=>e.jsx("div",{onClick:()=>{u(s.value),R(!1)},className:`px-3 py-2 text-sm font-medium cursor-pointer transition-colors duration-150 ${l===s.value?"bg-purple-50 text-purple-700":"text-gray-700 hover:bg-purple-50"}`,children:s.label},s.value))})]}),e.jsxs("button",{type:"button",onClick:()=>{c(""),u(""),f(!1)},className:"w-full px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 rounded-xl transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-times-circle"}),"Clear Filters"]})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsx("button",{onClick:()=>se(!U),className:"inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-semibold rounded-xl bg-blue-600 text-white hover:bg-blue-500 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",children:U?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-4 h-4"}),"Unselect"]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4"}),"Select"]})}),e.jsx("button",{onClick:()=>{V(S.length>0?"selected":"filtered"),N(!0)},disabled:g,className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-sm text-white transition-all duration-200 ease-in-out ${g?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-500 hover:scale-105 hover:shadow-lg active:scale-95"}`,children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-4 h-4"})," Export",S.length>0&&` (${S.length})`]})})]})]})}),e.jsx("div",{className:"overflow-x-auto border border-gray-100",children:e.jsxs("table",{className:"min-w-full table-auto text-left",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm",children:e.jsxs("tr",{children:[U&&e.jsx("th",{className:"py-3 px-5 font-semibold",children:e.jsx("input",{type:"checkbox",checked:Ee,onChange:Ae,className:"w-4 h-4 rounded-2xl border-gray-300 transition-all duration-200"})}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"#ID"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Name"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Email"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Role"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Age"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Education"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Experience"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Total Articles"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Total Quizzes"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Total Questions"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Incorrect Questions"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Accepts"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Dismiss"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Total Typings"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Incorrect Typings"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Avg Accuracy (%)"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Avg Score (%)"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Avg Pause (s)"}),e.jsx("th",{className:"py-3 px-6 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{className:"text-gray-700 text-sm bg-white",children:D.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:U?20:19,className:"py-12 text-center text-gray-500",children:"No analytics data available."})}):D.map(s=>e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-blue-50 transition-all duration-200",children:[U&&e.jsx("td",{className:"py-3 px-5",children:e.jsx("input",{type:"checkbox",checked:S.includes(s.id),onChange:()=>Ce(s.id),className:"w-4 h-4 rounded-2xl border-gray-300 transition-all duration-200"})}),e.jsx("td",{className:"py-3 px-6 font-medium text-gray-900",children:s.id}),e.jsx("td",{className:"py-3 px-6 font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.email}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.role}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.age||"N/A"}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.education||"N/A"}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.experience||"N/A"}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.total_articles}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.total_quizzes??"N/A"}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.total_questions??"N/A"}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.incorrect_questions??"N/A"}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.accepts}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.dismiss}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.total_typings}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.incorrect_typings}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.homo_avg||"N/A"}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.avg_score}),e.jsx("td",{className:"py-3 px-6 text-gray-700",children:s.avg_pause||"N/A"}),e.jsx("td",{className:"py-3 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ve(s),className:"px-2.5 py-1.5 rounded-xl text-xs font-semibold border bg-green-600 hover:bg-green-500 text-white transition-all duration-200 ease-in-out hover:shadow-sm active:scale-95",children:"JSON"}),e.jsx("button",{onClick:()=>{ee("xml"),ve(s)},className:"px-2.5 py-1.5 rounded-xl text-xs font-semibold border bg-green-600 hover:bg-green-500 text-white transition-all duration-200 ease-in-out hover:shadow-sm active:scale-95",children:"XML"})]})})]},s.id))})]})}),P>1&&e.jsx("div",{className:"mt-6 mb-6",children:e.jsxs("nav",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>d(s=>Math.max(1,s-1)),disabled:t===1,className:`px-4 py-2 font-medium text-sm transition-all duration-200 ease-in-out rounded-2xl ${t===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400 hover:shadow-sm"}`,children:"← Previous"}),Array.from({length:P},(s,r)=>r+1).map(s=>e.jsx("button",{onClick:()=>d(s),className:`px-4 py-2 font-medium text-sm transition-all duration-200 ease-in-out rounded-2xl ${s===t?"bg-blue-600 text-white shadow-sm":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400 hover:shadow-sm"}`,children:s},s)),e.jsx("button",{onClick:()=>d(s=>Math.min(P,s+1)),disabled:t===P,className:`px-4 py-2 font-medium text-sm transition-all duration-200 ease-in-out rounded-2xl ${t===P?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:border-gray-400 hover:shadow-sm"}`,children:"Next →"})]})})]})})}),e.jsx(ye,{show:L,onClose:()=>!g&&N(!1),closeable:!g,children:e.jsxs("div",{className:"p-6 max-w-2xl max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export User Analytics Data"}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"What would you like to export?"}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-all",children:[e.jsx("input",{type:"radio",name:"exportMode",checked:w==="all",onChange:()=>{H("all"),X(""),Q("")},className:"mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"All Users"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Export all ",n.length," users in the system"]})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-all",children:[e.jsx("input",{type:"radio",name:"exportMode",checked:w==="role",onChange:()=>H("role"),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"By Role/Group"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Export users with a specific role"}),w==="role"&&e.jsxs("select",{value:G,onChange:s=>X(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-xl text-sm",children:[e.jsx("option",{value:"",children:"Select a role..."}),[...new Set(n.map(s=>s.role))].map(s=>e.jsxs("option",{value:s,children:[s," (",n.filter(r=>r.role===s).length,")"]},s))]})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-all",children:[e.jsx("input",{type:"radio",name:"exportMode",checked:w==="specific",onChange:()=>H("specific"),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Specific Person"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Export data for a specific user"}),w==="specific"&&e.jsxs("select",{value:Y,onChange:s=>Q(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-xl text-sm",children:[e.jsx("option",{value:"",children:"Select a person..."}),n.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]})]})]}),S.length>0&&e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-all",children:[e.jsx("input",{type:"radio",name:"exportMode",checked:w==="selected",onChange:()=>{H("selected"),X(""),Q("")},className:"mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Selected Users"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Export ",S.length," selected users"]})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-all",children:[e.jsx("input",{type:"radio",name:"exportMode",checked:w==="filtered",onChange:()=>{H("filtered"),X(""),Q("")},className:"mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Current Filters"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Export ",$.length," users matching current filters"]})]})]})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Name"}),e.jsx("input",{type:"text",value:W,onChange:s=>x(s.target.value),placeholder:"Leave empty for auto-generated name",className:"w-full px-3 py-2 border rounded-xl focus:ring-1 focus:ring-blue-500 transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Format"}),e.jsxs("select",{value:y,onChange:s=>ee(s.target.value),className:"w-full px-3 py-2 border rounded-xl transition-all duration-200",children:[e.jsx("option",{value:"json",children:"JSON"}),e.jsx("option",{value:"xml",children:"XML"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-600",children:"All user-related data will be included (typing activities, deleted characters, comparison activities, pause counts, etc.)"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>N(!1),disabled:g,className:"px-4 py-2 border-2 border-gray-300 rounded-xl text-gray-700 hover:bg-gray-100 transition-all duration-200 ease-in-out hover:shadow-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsxs("button",{onClick:Se,disabled:g,className:`px-6 py-2 rounded-xl font-semibold transition-all duration-200 ease-in-out flex items-center gap-2 ${g?"bg-gray-400 text-white cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 hover:scale-105 hover:shadow-sm active:scale-95"}`,children:[g&&e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g?"Exporting...":"Export Data"]})]})]})})]})}const hs=Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"}));function ls({auth:n,user:h,article:b,summaryMetrics:m,sessionTimeline:_,errorAnalysis:p,keystrokePatterns:c,audioBehavior:l,comparisonMetrics:u,temporalProgression:j}){const f=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=i=>i>=80?"text-green-600 bg-green-50":i>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",E=i=>i>5?e.jsx(Ne,{className:"w-5 h-5 text-green-600"}):i<-5?e.jsx(Je,{className:"w-5 h-5 text-red-600"}):e.jsx(Ve,{className:"w-5 h-5 text-gray-600"});return e.jsxs(ie,{breadcrumb:e.jsx(oe,{header:`${b.title} - ${h.name}`,links:[{title:"Home",url:"/"},{title:"Users",url:route("users.index")},{title:"Article Detail",url:""}]}),children:[e.jsx(ne,{title:`${b.title} - ${h.name} Detail`}),e.jsxs("div",{className:"pt-6 pb-8",children:[e.jsxs("div",{className:"flex space-x-2 mb-6",children:[e.jsxs("a",{href:route("users.articles.export",{userId:h.id,articleId:b.id,format:"csv"}),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 hover:scale-105 hover:shadow-md text-white hover:text-white transition-all duration-200 ease-in-out shadow-sm rounded-2xl",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsxs("a",{href:route("users.articles.export",{userId:h.id,articleId:b.id,format:"json"}),className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 hover:scale-105 hover:shadow-md text-white hover:text-white transition-all duration-200 ease-in-out shadow-sm rounded-2xl",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Export JSON"]}),e.jsxs("a",{href:route("users.articles.export",{userId:h.id,articleId:b.id,format:"xml"}),className:"inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 hover:scale-105 hover:shadow-md text-white hover:text-white transition-all duration-200 ease-in-out shadow-sm rounded-2xl",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Export XML"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Attempts"}),e.jsx(ke,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:m.total_attempts})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Learning Gain"}),E(m.learning_gain)]}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[m.learning_gain>=0?"+":"",m.learning_gain,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[m.first_attempt_accuracy,"% → ",m.last_attempt_accuracy,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Best Accuracy"}),e.jsx(_e,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[m.best_accuracy,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Avg Accuracy"})}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[m.avg_accuracy,"%"]})]})]}),u.has_comparison&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ne,{className:"w-5 h-5 mr-2 text-blue-600"}),"First vs Latest Attempt Comparison"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Accuracy Improvement"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[u.accuracy_comparison.improvement>=0?"+":"",u.accuracy_comparison.improvement,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["From ",u.accuracy_comparison.first,"% to ",u.accuracy_comparison.last,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Error Reduction"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["-",u.error_comparison.reduction_percent,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["From ",u.error_comparison.first," to ",u.error_comparison.last," errors"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"Effect Size (Cohen's d)"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u.effect_size_cohens_d}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:u.effect_size_cohens_d>.8?"Large effect":u.effect_size_cohens_d>.5?"Medium effect":"Small effect"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Learning Curve: Accuracy Progression"}),e.jsx(O,{width:"100%",height:300,children:e.jsxs(pe,{data:_,children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"attempt_number",label:{value:"Attempt Number",position:"insideBottom",offset:-5}}),e.jsx(K,{label:{value:"Accuracy (%)",angle:-90,position:"insideLeft"},domain:[0,100]}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(ue,{type:"monotone",dataKey:"accuracy_percent",stroke:"#3B82F6",strokeWidth:3,name:"Accuracy %",dot:{r:5}})]})}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600 bg-blue-50 p-3 rounded-2xl",children:[e.jsx("strong",{children:"Interpretation:"})," ",m.learning_gain>0?`Positive learning trajectory with ${m.learning_gain}% improvement. This indicates successful skill acquisition.`:"Performance remains stable or declined. May need additional support or practice."]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Error Pattern Evolution"}),e.jsx(O,{width:"100%",height:300,children:e.jsxs(We,{data:p.error_evolution,children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"attempt",label:{value:"Attempt Number",position:"insideBottom",offset:-5}}),e.jsx(K,{label:{value:"Error Count",angle:-90,position:"insideLeft"}}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(fe,{type:"monotone",dataKey:"replaced",stackId:"1",stroke:"#F59E0B",fill:"#F59E0B",name:"Replaced Errors"}),e.jsx(fe,{type:"monotone",dataKey:"extra",stackId:"1",stroke:"#FBBF24",fill:"#FBBF24",name:"Extra Errors"}),e.jsx(fe,{type:"monotone",dataKey:"missing",stackId:"1",stroke:"#EF4444",fill:"#EF4444",name:"Missing Errors"})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Error Reduction"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[p.error_reduction.reduction_percent,"%"]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[p.error_reduction.first_attempt_errors," → ",p.error_reduction.last_attempt_errors]})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Repeated Errors"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[p.repeated_error_analysis.repeated_error_rate_percent,"%"]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[p.repeated_error_analysis.errors_repeated," of ",p.repeated_error_analysis.unique_errors," unique errors"]})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Total Unique Errors"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.repeated_error_analysis.unique_errors}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Across all attempts"})]})]})]}),c.typing_evolution&&c.typing_evolution.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Typing Fluency Evolution"}),e.jsx(O,{width:"100%",height:300,children:e.jsxs(pe,{data:c.typing_evolution,children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"attempt",label:{value:"Attempt Number",position:"insideBottom",offset:-5}}),e.jsx(K,{label:{value:"Speed (WPM)",angle:-90,position:"insideLeft"}}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(ue,{type:"monotone",dataKey:"typing_speed_wpm",stroke:"#8B5CF6",strokeWidth:2,name:"Typing Speed (WPM)",dot:{r:4}})]})}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Speed Improvement"}),e.jsxs("div",{className:"text-xl font-bold text-purple-600",children:[c.trends.typing_speed_improvement_percent>=0?"+":"",c.trends.typing_speed_improvement_percent,"%"]})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Backspace Reduction"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["-",c.trends.backspace_reduction_percent,"%"]})]})]})]}),l.audio_evolution&&l.audio_evolution.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Audio Listening Behavior"}),e.jsx(O,{width:"100%",height:300,children:e.jsxs(je,{data:l.audio_evolution,children:[e.jsx(z,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"attempt",label:{value:"Attempt Number",position:"insideBottom",offset:-5}}),e.jsx(K,{label:{value:"Count",angle:-90,position:"insideLeft"}}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(Z,{dataKey:"plays",fill:"#F59E0B",name:"Audio Plays"}),e.jsx(Z,{dataKey:"rewinds",fill:"#EF4444",name:"Rewinds"}),e.jsx(Z,{dataKey:"forwards",fill:"#10B981",name:"Forwards"})]})}),e.jsxs("div",{className:"mt-3 bg-yellow-50 p-3 rounded-2xl",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Dependency Trend"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`px-3 py-1 rounded-2xl text-sm font-medium ${l.dependency_trend.trend==="declining"?"bg-green-100 text-green-700":l.dependency_trend.trend==="increasing"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:l.dependency_trend.trend.charAt(0).toUpperCase()+l.dependency_trend.trend.slice(1)}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",l.dependency_trend.change_percent>=0?"+":"",l.dependency_trend.change_percent,"% from first to last)"]})]}),e.jsx("div",{className:"text-xs text-gray-600 mt-2",children:l.dependency_trend.trend==="declining"?"âœ… Positive trend: User is becoming more independent from audio support":l.dependency_trend.trend==="increasing"?"â ï¸ Increasing reliance on audio may indicate difficulty":"Stable audio usage across attempts"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Detailed Session History"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attempt"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accuracy"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Errors"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Typing Speed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acceptance Rate"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",i.attempt_number]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(i.session_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-2xl text-xs font-medium ${k(i.accuracy_percent)}`,children:[i.accuracy_percent,"%"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[i.total_errors,e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(R:",i.replaced_errors," E:",i.extra_errors," M:",i.missing_errors,")"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.typing_speed_wpm?`${i.typing_speed_wpm} WPM`:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.session_duration_minutes?`${i.session_duration_minutes} min`:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.acceptance_rate_percent?`${i.acceptance_rate_percent}%`:"N/A"})]},i.attempt_number))})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx(He,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Key Insights for Thesis Analysis"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"H2.1 (Learning Gains):"})," ",m.learning_gain>15?`âœ… Substantial improvement of ${m.learning_gain}% exceeds typical learning curves`:"Moderate improvement observed. Consider intervention duration or support level."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"H2.2 (Error Reduction):"})," ",p.repeated_error_analysis.repeated_error_rate_percent<30?`âœ… Low repeated error rate (${p.repeated_error_analysis.repeated_error_rate_percent}%) indicates effective learning`:"â ï¸ High repeated error rate suggests need for targeted remediation"]}),u.has_comparison&&e.jsxs("p",{children:[e.jsx("strong",{children:"Effect Size:"})," Cohen's d = ",u.effect_size_cohens_d,u.effect_size_cohens_d>.8?" (Large effect - strong intervention impact)":u.effect_size_cohens_d>.5?" (Medium effect)":" (Small effect)"]}),e.jsx("p",{className:"text-xs text-gray-600 italic mt-3",children:"💡 Export data above for statistical analysis in SPSS, R, or Python. Use temporal progression to analyze spaced repetition effects."})]})]})]})]})}const ps=Object.freeze(Object.defineProperty({__proto__:null,default:ls},Symbol.toStringTag,{value:"Module"}));export{cs as C,xs as I,ms as P,hs as U,ps as a};
