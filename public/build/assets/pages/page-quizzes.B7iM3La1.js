import{u as U,r as g,j as e,a7 as Y,V as K,ac as B,at as Z,au as I,av as H,a8 as E,y as z,L as J,a2 as q,M as ee,aw as te,B as se,U as re,S as ae,ax as ne,R as le}from"../vendor/vendor-common.Cf4BX4gl.js";import{A as X}from"./page-articles.-KnxBbWD.js";import{a as G,Q as oe,H as ie,p as ce,F as de,c as ue,M as V}from"../components/components-common.BSByLPoS.js";function he(){const{datas:p}=U().props,C=p&&p.id,M=C?"Edit Quiz":"New Quiz",[x,_]=g.useState({title:p?.title||"",subject:p?.subject||"",groups:p?.groups||[],status:p?.status||"Draft",description:p?.description||""}),[c,w]=g.useState([]);g.useEffect(()=>{p?.questions?w(p.questions.map(t=>{if(t.type==="Matching"){let r=[];try{Array.isArray(t.options)?r=t.options.map(a=>typeof a=="object"&&a.left!==void 0&&a.right!==void 0?a:{left:a.left||"",right:a.right||""}):t.options&&(r=JSON.parse(t.options))}catch{r=[{left:"",right:""}]}(!r||r.length===0)&&(r=[{left:"",right:""}]);let s=[];try{Array.isArray(t.correct_answer)?s=t.correct_answer.map(a=>typeof a=="object"&&a.left!==void 0&&a.right!==void 0?a:{left:a.left||"",right:a.right||""}):t.correct_answer&&(s=JSON.parse(t.correct_answer))}catch{s=[]}return s||(s=[]),{...t,options:r,correct_answer:s}}return{...t,options:Array.isArray(t.options)?t.options:t.options?JSON.parse(t.options):["","","",""],correct_answer:t.type==="Checkboxes"?Array.isArray(t.correct_answer)?t.correct_answer:t.correct_answer?JSON.parse(t.correct_answer):[]:t.type==="True/False"?t.correct_answer===!0||t.correct_answer==="true"||t.correct_answer==="True"?"True":"False":t.correct_answer||""}})):w([{type:"Multiple Choice",text:"",options:["","","",""],correct_answer:""}])},[p]);const v=()=>{w([...c,{type:"Multiple Choice",text:"",options:["","","",""],correct_answer:""}])},S=t=>{w(c.filter((r,s)=>s!==t))},k=(t,r)=>{if(r<0||r>=c.length)return;const s=[...c],[a]=s.splice(t,1);s.splice(r,0,a),w(s)},y=(t,r,s)=>{w(c.map((a,h)=>h!==t?a:r==="type"&&s==="Matching"?{...a,type:s,options:a.options&&a.options.length?a.options:[{left:"",right:""}],correct_answer:a.correct_answer&&a.correct_answer.length?a.correct_answer:[]}:r==="type"&&s==="Multiple Choice"?{...a,type:s,options:["","","",""],correct_answer:""}:r==="type"&&s==="Checkboxes"?{...a,type:s,options:["","","",""],correct_answer:[]}:r==="type"&&s==="True/False"?{...a,type:s,options:[],correct_answer:""}:r==="type"&&s==="Fill-in-the-blank"?{...a,type:s,options:[],correct_answer:""}:{...a,[r]:s}))},A=(t,r,s)=>{w(c.map((a,h)=>{if(h!==t)return a;if(a.type==="Matching"){const u=[...a.options];return u[r]=s,{...a,options:u}}return{...a,options:a.options.map((u,Q)=>Q===r?s:u)}}))},j=(t,r)=>{w(c.map((s,a)=>{if(a!==t)return s;if(s.type==="Checkboxes"){let h=Array.isArray(s.correct_answer)?s.correct_answer:[];return h.includes(r)?h=h.filter(u=>u!==r):h=[...h,r],{...s,correct_answer:h}}else return s.type==="True/False"?{...s,correct_answer:r}:{...s,correct_answer:r}}))},m=t=>{t.preventDefault();const r={...x,questions:c.map(s=>s.type==="Matching"?{type:s.type,text:s.text,options:Array.isArray(s.options)?s.options.map(a=>({left:a.left||"",right:a.right||""})):[{left:"",right:""}],correct_answer:Array.isArray(s.correct_answer)?s.correct_answer.map(a=>({left:a.left||"",right:a.right||""})):[]}:{type:s.type,text:s.text,description:s.description,options:s.options,correct_answer:(s.type==="Checkboxes"||s.type==="True/False",s.correct_answer)})};C?E.patch(route("quizzes.update",p.id),r):E.post(route("quizzes.store"),r)},T=[{title:"Home",url:"/"},{title:"Quiz",url:route("quizzes.index")},{title:M,url:""}];return e.jsxs(X,{breadcrumb:e.jsx(G,{header:M,links:T}),children:[e.jsx(Y,{title:M}),e.jsxs("form",{className:"min-h-screen w-full mx-auto space-y-6 mb-12",onSubmit:m,children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm px-6 md:px-8 py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 md:gap-6",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Quiz Name"}),e.jsx("input",{type:"text",value:x.title,onChange:t=>_({...x,title:t.target.value}),placeholder:"Enter name",className:"w-full py-2.5 px-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",required:!0})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Status"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[e.jsx("input",{type:"radio",name:"status",value:"Published",checked:x.status==="Published",onChange:()=>_({...x,status:"Published"}),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 accent-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-700 bg-blue-100/80 px-3 py-1.5 rounded-full",children:"Publish"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[e.jsx("input",{type:"radio",name:"status",value:"Draft",checked:x.status==="Draft",onChange:()=>_({...x,status:"Draft"}),className:"h-4 w-4 text-red-500 border-gray-300 focus:ring-red-400 accent-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-600 bg-gray-100 px-3 py-1.5 rounded-full",children:"Draft"})]})]})]}),e.jsx("div",{className:"flex items-end gap-2",children:e.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 px-6 w-36 py-2.5 text-white bg-blue-600 hover:bg-blue-700 hover:scale-105 hover:shadow-lg rounded-xl shadow-sm transition-all duration-200 ease-in-out",children:[e.jsx(K,{className:"w-4 h-4"})," ",C?"Update":"Create"]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:t=>_({...x,description:t.target.value}),placeholder:"Enter quiz description",className:"w-full px-3.5 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",rows:"3"})]})]}),e.jsxs("div",{className:"space-y-6",children:[c.map((t,r)=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 shadow-sm px-6 md:px-8 py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-5",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Question ",r+1]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"flex items-center justify-center w-10 h-10 text-red-600 border border-red-200 rounded-xl hover:bg-red-50 transition-all duration-200 ease-in-out","aria-label":"Delete",onClick:()=>S(r),disabled:c.length===1,children:e.jsx(B,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",className:"flex items-center justify-center w-10 h-10 text-gray-600 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all duration-200 ease-in-out disabled:opacity-40",onClick:()=>k(r,r-1),disabled:r===0,children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",className:"flex items-center justify-center w-10 h-10 text-gray-600 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all duration-200 ease-in-out disabled:opacity-40",onClick:()=>k(r,r+1),disabled:r===c.length-1,children:e.jsx(I,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Question Type"}),e.jsxs("select",{value:t.type,onChange:s=>y(r,"type",s.target.value),className:"w-full md:w-1/3 py-2.5 px-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",children:[e.jsx("option",{value:"Multiple Choice",children:"Multiple Choice"}),e.jsx("option",{value:"Checkboxes",children:"Checkboxes"}),e.jsx("option",{value:"True/False",children:"True/False"}),e.jsx("option",{value:"Fill-in-the-blank",children:"Fill-in-the-blank"}),e.jsx("option",{value:"Matching",children:"Matching"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Question"}),e.jsx("input",{type:"text",value:t.text,onChange:s=>y(r,"text",s.target.value),placeholder:"Enter your question",className:"w-full px-3.5 py-2.5 rounded-xl bg-gray-50 border border-gray-200 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95"})]}),(t.type==="Multiple Choice"||t.type==="Checkboxes")&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Options"}),t.options.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{type:t.type==="Multiple Choice"?"radio":"checkbox",name:`correctOption-${r}`,checked:t.type==="Checkboxes"?Array.isArray(t.correct_answer)&&t.correct_answer.includes(s):t.correct_answer===s,onChange:()=>j(r,s),className:"text-blue-600 focus:ring-blue-400 cursor-pointer"}),e.jsx("input",{type:"text",value:s,placeholder:`Option ${a+1}`,onChange:h=>A(r,a,h.target.value),className:"flex-1 px-3.5 py-2.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95"}),e.jsx("button",{type:"button",onClick:()=>y(r,"options",t.options.filter((h,u)=>u!==a)),className:"text-red-500  transition-all duration-200 ease-in-out",disabled:t.options.length<=2,children:e.jsx(B,{className:"w-5 h-5"})})]},a)),e.jsxs("button",{type:"button",onClick:()=>y(r,"options",[...t.options,""]),className:"mt-2 inline-flex items-center gap-2 text-blue-700 ",children:[e.jsx(H,{className:"w-4 h-4"})," Add Option"]}),e.jsxs("div",{className:"mt-2 text-sm text-green-700",children:[t.type==="Checkboxes"&&Array.isArray(t.correct_answer)&&t.correct_answer.length>0&&e.jsxs(e.Fragment,{children:["Correct Answers: ",e.jsx("strong",{children:t.correct_answer.join(", ")})]}),t.type==="Multiple Choice"&&t.correct_answer&&e.jsxs(e.Fragment,{children:["Correct Answer: ",e.jsx("strong",{children:t.correct_answer})]})]})]}),t.type==="True/False"&&e.jsxs("div",{className:"flex gap-6 mt-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`correctOption-${r}`,value:"True",checked:t.correct_answer==="True",onChange:s=>j(r,s.target.value),className:"cursor-pointer text-blue-600 focus:ring-blue-400"}),"True"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:`correctOption-${r}`,value:"False",checked:t.correct_answer==="False",onChange:s=>j(r,s.target.value),className:"cursor-pointer text-blue-600 focus:ring-blue-400"}),"False"]}),e.jsx("div",{className:"ml-4 text-sm text-green-700",children:t.correct_answer&&e.jsxs(e.Fragment,{children:["Correct Answer: ",e.jsx("strong",{children:t.correct_answer})]})})]}),t.type==="Matching"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Matching Pairs"}),(t.options&&t.options.length>0?t.options:[{left:"",right:""}]).map((s,a)=>e.jsxs("div",{className:"flex gap-3 items-center mb-3",children:[e.jsx("input",{type:"text",value:s.left||"",onChange:h=>{const u=[...t.options||[]];u[a]={...u[a],left:h.target.value},y(r,"options",u)},placeholder:`Left item ${a+1}`,className:"w-1/3 px-3.5 py-2.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95"}),e.jsx("input",{type:"text",value:s.right||"",onChange:h=>{const u=[...t.options||[]];u[a]={...u[a],right:h.target.value},y(r,"options",u)},placeholder:`Right item ${a+1}`,className:"w-1/3 px-3.5 py-2.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95"}),e.jsx("button",{type:"button",onClick:()=>{const h=t.options.filter((u,Q)=>Q!==a);y(r,"options",h)},className:"text-red-500  transition-all duration-200 ease-in-out",disabled:(t.options||[]).length<=1,children:e.jsx(B,{className:"w-5 h-5"})})]},a)),e.jsxs("button",{type:"button",onClick:()=>{const s=[...t.options||[],{left:"",right:""}];y(r,"options",s)},className:"mt-2 inline-flex items-center gap-2 text-blue-700 ",children:[e.jsx(H,{className:"w-4 h-4"})," Add matching pair"]}),e.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"The matching pairs will be shuffled when taking the quiz"})]}),t.type==="Fill-in-the-blank"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-gray-700 mb-2 font-medium",children:"Correct Answer"}),e.jsx("input",{type:"text",value:t.correct_answer,onChange:s=>j(r,s.target.value),className:"w-full md:w-1/2 px-3.5 py-2.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95"}),e.jsx("div",{className:"mt-2 text-sm text-green-700",children:t.correct_answer&&e.jsxs(e.Fragment,{children:["Correct Answer: ",e.jsx("strong",{children:t.correct_answer})]})})]})]},r)),e.jsxs("button",{type:"button",onClick:v,className:"inline-flex items-center gap-2 px-5 py-2.5 text-blue-700 border border-blue-200 rounded-xl hover:bg-blue-50 transition-all duration-200 ease-in-out",children:[e.jsx(H,{className:"w-4 h-4"})," Add Question"]})]})]})]})}const fe=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));function xe(){const{quizData:p,auth:C}=U().props,M=p?.data||[],[x,_]=g.useState(!1),[c,w]=g.useState(null),[v,S]=g.useState(0),[k,y]=g.useState(!1),[A,j]=g.useState(!1),[m,T]=g.useState([]),[t,r]=g.useState(0),[s,a]=g.useState(()=>C?.can?.student?!0:typeof window<"u"&&window.__canAccessLibrary!==void 0?window.__canAccessLibrary:null);g.useEffect(()=>{if(s===!0||!C?.user)return;let n=!1;return(async()=>{try{const l=(await fetch(route("api.user.can-access-library"),{headers:{"X-Requested-With":"XMLHttpRequest"}})).ok;n||(a(l),typeof window<"u"&&(window.__canAccessLibrary=l))}catch{n||(a(!1),typeof window<"u"&&(window.__canAccessLibrary=!1))}})(),()=>{n=!0}},[C?.user,s]);const h=n=>{w(n),_(!0),S(0),y(!1),T(new Array(n.questions.length).fill(null)),j(!1),r(0)},u=(n,o)=>{T(l=>{const d=[...l];return d[n]={answer:o},d})},Q=()=>{t<c.questions.length-1&&r(t+1)},L=()=>{t>0&&r(t-1)},$=()=>{let n=0;c.questions.forEach((o,l)=>{const d=m[l]||{};let b=!1;if(o.type==="Checkboxes")b=Array.isArray(o.correct_answer)&&Array.isArray(d.answer)&&d.answer.length===o.correct_answer.length&&d.answer.every(f=>o.correct_answer.includes(f));else if(o.type==="True/False"){const f=o.correct_answer===!0||o.correct_answer==="True"?"True":"False";b=d.answer===f}else o.type==="Matching"?b=Array.isArray(o.correct_answer)&&Array.isArray(d.answer)&&o.correct_answer.length===d.answer.length&&o.correct_answer.every(f=>d.answer.some(N=>N.left===f.left&&N.right===f.right)):b=d.answer===o.correct_answer;b&&n++,m[l]&&(m[l].isCorrect=b)}),S(n),y(!0),E.post(route("quizzes.submit"),{quiz_id:c.id,score:n,answers:m},{onSuccess:()=>alert("Quiz submitted successfully! ✅"),preserveState:!0})},D=()=>{_(!1),w(null),y(!1),T([]),j(!1),r(0)},P=()=>D(),i=(n,o)=>{const l=Math.round(n/o*100);return l===100?"Perfect score!":l>=80?"Excellent work!":l>=70?"Well done!":l>=60?"Good effort!":l>=40?"Keep trying!":"Better luck next time!"},F=(n,o)=>{const l=Math.round(n/o*100);return l>=80?"from-green-500 to-emerald-600":l>=60?"from-blue-500 to-blue-600":l>=40?"from-orange-500 to-orange-600":"from-red-500 to-red-600"},R=n=>{if(!n)return"";const o=new Date(n),d=Math.floor((new Date-o)/1e3),b=Math.floor(d/60),f=Math.floor(b/60),N=Math.floor(f/24),O=Math.floor(N/30),W=Math.floor(N/365);return W>0?`${W} year${W>1?"s":""} ago`:O>0?`${O} month${O>1?"s":""} ago`:N>0?`${N} day${N>1?"s":""} ago`:f>0?`${f} hour${f>1?"s":""} ago`:b>0?`${b} minute${b>1?"s":""} ago`:"just now"};return e.jsxs("div",{div:!0,className:"bg-[#f7f8fa]",children:[e.jsx(Y,{title:"Quiz"}),x&&c&&e.jsx(oe,{currentQuiz:c,currentQuestionIdx:t,userAnswers:m,showResult:k,reviewMode:A,score:v,onAnswerChange:u,onNext:Q,onPrev:L,onSubmit:$,onRestart:D,onDone:P,onStartAgain:()=>{D(),setTimeout(()=>h(c),150)},setCurrentQuestionIdx:r,setReviewMode:j,setQuizStarted:_}),!x&&e.jsx(ie,{}),e.jsxs("div",{className:`min-h-screen w-full py-12 max-w-7xl mx-auto ${x?"hidden":""}`,children:[e.jsx(ce,{}),s!==!0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-between items-center text-md",children:[e.jsxs("span",{className:"text-gray-500 text-md",children:["Try it out above by using"," ",e.jsx("span",{className:"font-semibold",children:"handwritten notes."})]}),e.jsxs("span",{className:"text-gray-500 text-md",children:["Don't have any content? ","",e.jsx("button",{className:"text-blue-500 text-md hover:underline transition-all duration-200 ease-in-out hover:scale-105",children:"Create from scratch"})]})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-2",children:[!x&&e.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12"}),!x&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 mt-3",children:M.map(n=>e.jsx(z.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},whileHover:{translateY:-6},className:"rounded-xl bg-white border border-gray-100 shadow-sm hover:shadow-md transition-all",children:e.jsxs("div",{className:"p-4 md:p-6 flex flex-col justify-between h-full",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-gray-900 font-semibold text-lg truncate",children:n.title}),e.jsx("p",{className:"text-gray-500 text-sm mt-1 truncate",children:`${n.questions?.length||0} question${(n.questions?.length||0)===1?"":"s"} • ${R(n.updated_at||n.created_at)}`})]}),e.jsx("button",{type:"button",className:"p-1.5 text-gray-400  rounded-xl hover:bg-gray-100",children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10 6a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm0 5a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm0 5a1.5 1.5 0 110-3 1.5 1.5 0 010 3z"})})})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-end",children:[C?.can?.teacher&&e.jsx(J,{href:route("quizzes.edit",n.id),className:"px-4 py-1.5 rounded-xl border border-blue-500 text-blue-600 font-medium text-sm hover:bg-blue-50",children:"Edit"}),e.jsx("button",{onClick:()=>h(n),className:"px-4 py-1.5 rounded-xl bg-blue-600 hover:bg-blue-700 hover:scale-105 hover:shadow-lg text-white font-semibold text-sm",children:"Start"})]})]})},n.id))}),x&&c&&!k&&e.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white shadow-lg",style:{borderRadius:"20px"},children:[e.jsxs("div",{className:"bg-blue-600 text-white p-4",style:{borderRadius:"20px 20px 0 0"},children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:c.title}),e.jsxs("p",{className:"text-sm text-white opacity-90 mt-1",children:["Question"," ",t+1," /"," ",c.questions.length]})]})}),e.jsx("div",{className:"w-full bg-white bg-opacity-30 h-2 overflow-hidden",style:{borderRadius:"20px"},children:e.jsx(z.div,{className:"bg-white h-2",style:{borderRadius:"20px"},initial:{width:0},animate:{width:`${(t+1)/c.questions.length*100}%`},transition:{duration:.5}})})]}),e.jsxs("div",{className:"p-5",children:[c.questions.map((n,o)=>o===t&&e.jsxs(z.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-blue-600 mb-3",children:n.text}),n.description&&e.jsx("p",{className:"text-sm text-blue-500 mb-3",children:n.description})]}),e.jsxs("div",{className:"space-y-2",children:[n.type==="Multiple Choice"&&n.options.map((l,d)=>e.jsxs("label",{className:"flex items-center p-3 bg-white border-2 border-blue-200 hover:border-blue-600 cursor-pointer transition-all",style:{borderRadius:"20px"},children:[e.jsx("input",{type:"radio",name:`q-${o}`,value:l,checked:m[o]?.answer===l,onChange:()=>u(o,l),className:"w-4 h-4 accent-blue-600 cursor-pointer"}),e.jsx("span",{className:"ml-3 text-blue-900 text-sm",children:l})]},d)),n.type==="Checkboxes"&&n.options.map((l,d)=>{const b=Array.isArray(m[o]?.answer)?m[o].answer:[];return e.jsxs("label",{className:"flex items-center p-3 bg-white border-2 border-blue-200 hover:border-blue-600 cursor-pointer transition-all",style:{borderRadius:"20px"},children:[e.jsx("input",{type:"checkbox",value:l,checked:b.includes(l),onChange:f=>{let N=[...b];f.target.checked?N.push(l):N=N.filter(O=>O!==l),u(o,N)},className:"w-4 h-4 accent-blue-600 cursor-pointer"}),e.jsx("span",{className:"ml-3 text-blue-900 text-sm",children:l})]},d)}),n.type==="True/False"&&["True","False"].map((l,d)=>e.jsxs("label",{className:"flex items-center p-3 bg-white border-2 border-blue-200 hover:border-blue-600 cursor-pointer transition-all",style:{borderRadius:"20px"},children:[e.jsx("input",{type:"radio",name:`q-${o}`,value:l,checked:m[o]?.answer===l,onChange:()=>u(o,l),className:"w-4 h-4 accent-blue-600 cursor-pointer"}),e.jsx("span",{className:"ml-3 text-blue-900 text-sm",children:l})]},d)),n.type==="Fill-in-the-blank"&&e.jsx("input",{type:"text",value:m[o]?.answer||"",onChange:l=>u(o,l.target.value),className:"w-full px-4 py-3 border-2 border-blue-300 focus:border-blue-600 bg-white text-blue-900 text-sm focus:outline-none transition-all",style:{borderRadius:"20px"},placeholder:"Type your answer here"}),n.type==="Matching"&&e.jsx("div",{className:"space-y-2",children:n.options.map((l,d)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 px-3 py-2 bg-blue-100 text-blue-900 text-sm border border-blue-300",style:{borderRadius:"20px"},children:l.left}),e.jsxs("select",{value:m[o]?.answer?.[d]?.right||"",onChange:b=>{const f=[...m[o]?.answer||[]];f[d]={left:l.left,right:b.target.value},u(o,f)},className:"flex-1 px-3 py-2 border-2 border-blue-300 bg-white text-blue-900 text-sm focus:outline-none focus:border-blue-600",style:{borderRadius:"20px"},children:[e.jsx("option",{value:"",children:"Select answer"}),n.options.map(b=>b.right).sort(()=>Math.random()-.5).map((b,f)=>e.jsx("option",{value:b,children:b},f))]})]},d))})]})]},o)),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4 p-3 bg-blue-50",style:{borderRadius:"20px"},children:c.questions.map((n,o)=>e.jsx("button",{onClick:()=>r(o),className:`w-8 h-8 font-semibold transition-all text-xs ${o===t?"bg-blue-600 text-white":m[o]?.answer!==void 0?"bg-blue-400 text-white hover:bg-blue-500":"bg-white text-blue-600 border border-blue-300 hover:bg-blue-100"}`,style:{borderRadius:"20px"},children:o+1},o))}),e.jsxs("div",{className:"flex justify-between items-center gap-3 mt-4",children:[e.jsx("button",{onClick:L,disabled:t===0,className:`px-5 py-2 font-semibold transition-all text-sm ${t===0?"bg-blue-100 text-blue-300 cursor-not-allowed":"bg-white border-2 border-blue-600 text-blue-600 hover:bg-blue-600 "}`,style:{borderRadius:"20px"},children:"Previous"}),t===c.questions.length-1?e.jsx("button",{onClick:$,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 hover:scale-105 hover:shadow-lg text-white font-semibold transition-all text-sm",style:{borderRadius:"20px"},children:"Submit Quiz"}):e.jsx("button",{onClick:Q,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 hover:scale-105 hover:shadow-lg text-white font-semibold transition-all text-sm",style:{borderRadius:"20px"},children:"Next"})]})]})]}),x&&k&&!A&&e.jsxs(z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white shadow-2xl rounded-xl p-8 md:p-12 text-center border border-gray-200 max-w-2xl mx-auto",children:[e.jsx(z.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},className:"inline-block mb-6",children:e.jsx("div",{className:`w-24 h-24 rounded-full bg-gradient-to-br ${F(v,c.questions.length)} flex items-center justify-center`,children:e.jsx(q,{className:"w-12 h-12 text-white"})})}),e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Quiz Completed!"}),e.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your Score"}),e.jsxs("p",{className:"text-5xl font-bold text-blue-600 mb-2",children:[v,"/",c.questions.length]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:[Math.round(v/c.questions.length*100),"%"]})]}),e.jsx("p",{className:`text-2xl font-bold mb-8 bg-gradient-to-r ${F(v,c.questions.length)} bg-clip-text text-transparent`,children:i(v,c.questions.length)}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[e.jsx("button",{onClick:()=>j(!0),className:"px-6 py-3 rounded-xl bg-gray-600 hover:bg-gray-700 hover:scale-105 hover:shadow-lg text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Review Answers"}),e.jsx("button",{onClick:()=>{D(),setTimeout(()=>h(c),150)},className:"px-6 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 hover:scale-105 hover:shadow-lg text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Try Again"}),e.jsx("button",{onClick:P,className:"px-6 py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Done (Exit Quiz)"})]})]}),x&&k&&A&&e.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white shadow-xl rounded-xl overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-600 text-white p-6 md:p-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Review Answers"}),e.jsx("p",{className:"text-orange-100 mt-2",children:"Check your responses and learn"})]}),e.jsx("div",{className:"p-6 md:p-8 space-y-6",children:c.questions.map((n,o)=>{const l=m[o]||{};return e.jsxs(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`p-6 rounded-xl border-2 ${l.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"font-semibold text-gray-800",children:["Q",o+1,": ",n.text]})}),e.jsx("div",{className:"flex items-center gap-2",children:l.isCorrect?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-6 h-6 text-green-600"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold text-white bg-green-600",children:"Correct"})]}):e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold text-white bg-red-600",children:"Incorrect"})})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-xl",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:["Your Answer:"," "]}),e.jsx("span",{className:"text-gray-700",children:n.type==="Checkboxes"?Array.isArray(l.answer)&&l.answer.join(", ")||"Not answered":n.type==="Matching"?Array.isArray(l.answer)&&l.answer.map(d=>`${d.left} = ${d.right}`).join(", ")||"Not answered":l.answer!==void 0&&l.answer!==null?l.answer.toString():"Not answered"})]}),!l.isCorrect&&e.jsxs("div",{className:"p-3 bg-white rounded-xl border-l-4 border-green-500",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:["Correct Answer:"," "]}),e.jsx("span",{className:"text-green-700 font-medium",children:n.type==="Checkboxes"?Array.isArray(n.correct_answer)?n.correct_answer.join(", "):"":n.type==="Matching"?Array.isArray(n.correct_answer)?n.correct_answer.map(d=>`${d.left} = ${d.right}`).join(", "):"":n.correct_answer!==void 0&&n.correct_answer!==null?n.correct_answer.toString():""})]})]})]},o)})}),e.jsxs("div",{className:"px-6 md:px-8 py-6 border-t border-gray-200 bg-gray-50 flex flex-col sm:flex-row justify-center gap-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-6 py-2 rounded-xl border-2 border-gray-300 text-gray-700 hover:bg-gray-100 font-semibold transition-all",children:"Back to Result"}),e.jsx("button",{onClick:D,className:"px-6 py-2 rounded-xl bg-blue-600 hover:bg-blue-700 hover:scale-105 hover:shadow-lg text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Try Another"}),e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Done"})]})]})]})]}),!x&&e.jsx(de,{})]})}const ye=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));function me(){const{quizData:p}=U().props,C=p.data||[],[M,x]=g.useState(""),[_,c]=g.useState(""),[w,v]=g.useState(null),[S,k]=g.useState(null),[y,A]=g.useState(!1),[j,m]=g.useState(!1),[T,t]=g.useState(!1),[r,s]=g.useState(!1),a=C.filter(i=>{const F=i.title.toLowerCase().includes(M.toLowerCase()),R=_?i.status===_:!0;return F&&R}),h=i=>{v(i),t(!0)},u=()=>{w&&(A(!0),E.delete(route("quizzes.destroy",w.id),{onFinish:()=>{A(!1),t(!1),v(null)}}))},Q=i=>{k(i),s(!0)},L=()=>{if(!S)return;m(!0);const i=S.status==="Published"?"Draft":"Published";E.put(route("quizzes.update",S.id),{status:i},{preserveScroll:!0,onFinish:()=>{m(!1),s(!1),k(null)}})},$="Quiz List",D=[{title:"Home",url:"/"},{title:$,url:""}],P=[{label:"Total Quizzes",value:p.total||0,icon:te,color:"text-blue-500",borderColor:"border-blue-100",bgColor:"bg-blue-50",description:"All quizzes in the system"},{label:"Published",value:C.filter(i=>i.status==="Published").length||0,icon:se,color:"text-green-500",borderColor:"border-green-100",bgColor:"bg-green-50",description:"Active and available quizzes"},{label:"Draft",value:C.filter(i=>i.status==="Draft").length||0,icon:re,color:"text-orange-500",borderColor:"border-orange-100",bgColor:"bg-orange-50",description:"Quizzes in draft mode"}];return e.jsxs(X,{breadcrumb:e.jsx(G,{header:$,links:D}),children:[e.jsx(Y,{title:$}),e.jsx("section",{className:"content",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:P.map((i,F)=>{const R=i.icon;return e.jsxs("div",{className:`bg-white px-3 pb-2 pt-3 border-l-4 ${i.borderColor} shadow-sm rounded-xl flex flex-col hover:shadow-md transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-gray-800 text-base font-semibold",children:i.label}),e.jsx("div",{className:`${i.color}`,children:e.jsx(R,{className:"w-7 h-7"})})]}),e.jsxs("div",{className:"",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:i.value}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]})]},F)})}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl overflow-hidden border border-gray-200 mb-12",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex flex-col md:flex-row justify-between items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Quiz Management"}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsx("form",{className:"inline-block",onSubmit:i=>i.preventDefault(),children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 rounded-xl border hover:shadow-lg transition text-sm bg-white",children:[e.jsx(ae,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by title...",className:"px-2 outline-none border-none bg-transparent text-sm placeholder-gray-400 w-full min-w-[150px]",value:M,onChange:i=>x(i.target.value)})]})}),e.jsxs("select",{className:"px-3 py-2 rounded-xl border border-gray-300 bg-white hover:shadow-lg transition text-sm font-medium",value:_,onChange:i=>c(i.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Published",children:"Published"}),e.jsx("option",{value:"Draft",children:"Draft"})]}),e.jsxs(J,{href:route("quizzes.create"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-sm text-white bg-green-600 hover:bg-green-500 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",children:[e.jsx(H,{className:"w-4 h-4"}),"Add Quiz"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4",children:"#ID"}),e.jsx("th",{className:"py-3 px-4",children:"Title"}),e.jsx("th",{className:"py-3 px-4",children:"Questions"}),e.jsx("th",{className:"py-3 px-4",children:"Status"}),e.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"text-sm text-gray-700",children:a.length>0?a.map(i=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",children:[e.jsx("td",{className:"py-3 px-4 font-semibold",children:i.id}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("p",{className:"font-medium text-gray-900",children:i.title})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:i.questions?.length||0})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.status==="Published"?"bg-green-600 text-white":"bg-orange-400 text-white"}`,children:i.status})}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(J,{href:route("quizzes.edit",i.id),className:"inline-flex items-center gap-1.5 px-2 py-2 text-sm font-medium rounded-xl bg-blue-500 text-white hover:bg-blue-600 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-white text-gray-800 text-xs px-3 py-1 rounded-xl shadow-md border",children:"Edit Quiz"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>Q(i),className:"inline-flex items-center gap-1.5 px-2 py-2 text-sm font-medium rounded-xl bg-purple-500 text-white hover:bg-purple-600 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-white text-gray-800 text-xs px-3 py-1 rounded-xl shadow-md border",children:"Toggle Status"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>h(i),className:"inline-flex items-center gap-1.5 px-2 py-2 text-sm font-medium rounded-xl bg-red-500 text-white hover:bg-red-400 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-white text-gray-800 text-xs px-3 py-1 rounded-xl shadow-md border",children:"Delete Quiz"})]})]})})]},i.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-500",children:"No quizzes found"})})})]})}),p.total>10&&e.jsx("div",{className:"px-6 py-3 border-t flex justify-center",children:e.jsx(ue,{links:p.links,currentPage:p.current_page,perPage:p.per_page})})]}),e.jsx(V,{show:T,onClose:()=>{t(!1),v(null),A(!1)},maxWidth:"lg",children:e.jsxs("form",{onSubmit:i=>{i.preventDefault(),y||u()},className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Delete Quiz"}),e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete ",e.jsxs("span",{className:"font-semibold",children:['"',w?.title,'"']}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{t(!1),v(null),A(!1)},className:"rounded-xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",disabled:y,children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-xl px-9 py-1 bg-red-600 text-white font-semibold hover:bg-red-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",disabled:y,children:y?"Deleting...":"Delete"})]})]})}),e.jsx(V,{show:r,onClose:()=>{s(!1),k(null),m(!1)},maxWidth:"lg",children:e.jsxs("form",{onSubmit:i=>{i.preventDefault(),j||L()},className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Change Quiz Status"}),e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to change status of ",e.jsxs("span",{className:"font-semibold",children:['"',S?.title,'"']})," from ",e.jsx("span",{className:"font-semibold",children:S?.status}),"?"]}),e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{s(!1),k(null),m(!1)},className:"rounded-xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",disabled:j,children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-xl px-9 py-1 bg-purple-600 text-white font-semibold hover:bg-purple-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg active:scale-95",disabled:j,children:j?"Processing...":"Confirm"})]})]})})]})})]})}const we=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{fe as C,ye as D,we as I};
