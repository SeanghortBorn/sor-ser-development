import{r as e,j as s}from"../vendor/vendor-react.CSh4geB6.js";import{a as r}from"./page-articles.BtzFlrUy.js";import{u as t,H as o}from"../vendor/vendor-inertia.HwN2lMYo.js";import{f as a,N as l,U as d,d as n,e as i}from"../vendor/vendor-ui.wXUDVBjR.js";import{R as c,A as m,b as x,X as h,Y as b,T as g,L as p,c as j,P as u,a as y,C as f,d as v,e as N,B as C,f as k}from"../vendor/vendor-charts.30OvePoC.js";import"../vendor/vendor-common.B_9lrMAm.js";import"../components/components-common.mFbUzjoH.js";import"../vendor/vendor-utils.BR2dU08x.js";import"../components/components-homophone.BmTr8BPi.js";import"../vendor/vendor-animation.B6GxcyWq.js";const w=()=>{const{props:w}=t(),{auth:S,isAdmin:A=!1}=w,R=A||S?.user?.roles?.some(e=>"Admin"===e.name),z=e.useMemo(()=>{const e=w?.stats||{};return R?[{id:"homophones",value:e?.homophones?.count??"—",label:"Total Homophones",trend:e?.homophones?.change??"+0%",icon:a,color:"text-blue-500",borderColor:"border-blue-100",bgColor:"bg-blue-50"},{id:"quizzes",value:e?.quizzes?.count??"—",label:"Quizzes Created",trend:e?.quizzes?.change??"+0%",icon:l,color:"text-green-500",borderColor:"border-green-100",bgColor:"bg-green-50"},{id:"students",value:e?.students?.count??"—",label:"Students Registered",trend:e?.students?.change??"+0%",icon:d,color:"text-orange-500",borderColor:"border-orange-100",bgColor:"bg-orange-50"},{id:"sessions",value:e?.sessions?.count??"—",label:"Student Vs No-Permission",trend:e?.sessions?.change??"+0%",icon:n,color:"text-purple-500",borderColor:"border-purple-100",bgColor:"bg-purple-50"},{id:"activeUsers",value:e?.activeUsers?.count??"—",label:"Active Users (7d)",trend:e?.activeUsers?.change??"+0%",icon:d,color:"text-sky-500",borderColor:"border-sky-100",bgColor:"bg-sky-50"},{id:"avgWords",value:e?.avgWords?.count??"—",label:"Avg Words/Check (7d)",trend:e?.avgWords?.change??"+0%",icon:l,color:"text-emerald-500",borderColor:"border-emerald-100",bgColor:"bg-emerald-50"}]:[{id:"completed",value:e?.articles_completed??"0",label:"Articles Completed",trend:"+0%",icon:a,color:"text-blue-500",borderColor:"border-blue-100",bgColor:"bg-blue-50"},{id:"total",value:e?.total_articles??"0",label:"Total Articles",trend:"+0%",icon:a,color:"text-green-500",borderColor:"border-green-100",bgColor:"bg-green-50"},{id:"rate",value:`${e?.completion_rate??"0"}%`,label:"Completion Rate",trend:"+0%",icon:l,color:"text-purple-500",borderColor:"border-purple-100",bgColor:"bg-purple-50"}]},[w?.stats,R]),K=e.useMemo(()=>R?w?.weeklyData??[]:[],[w?.weeklyData,R]),W=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#ef4444","#06b6d4"],$=e.useMemo(()=>(w?.topArticles??[]).map((e,s)=>({name:e.name,value:e.attempts??e.value??0,color:W[s%W.length]})),[w?.topArticles]),D=w?.comparison||{},M=e.useMemo(()=>R&&D.trend7d||[],[D.trend7d,R]),U=e.useMemo(()=>R?(D.distribution||[]).map((e,s)=>({...e,color:0===s?"#2563eb":"#f97316"})):[],[D.distribution,R]),O=e.useMemo(()=>{if(!R)return[];const e=D?.avgWordPerCheck||{},s=D?.avgChecksPerUser||{};return[{metric:"Avg Words/Check",Student:Number(e.student??0),"No Role":Number(e.norole??0)},{metric:"Avg Checks/User",Student:Number(s.student??0),"No Role":Number(s.norole??0)}]},[D?.avgWordPerCheck,D?.avgChecksPerUser,R]),P=e.useMemo(()=>w?.recentActivity??[],[w?.recentActivity]),T=({stat:e})=>{const r=e.icon;return s.jsxs("div",{className:`bg-white px-3 pb-2 pt-3 border-l-4 ${e.borderColor} shadow-sm rounded-xl flex flex-col hover:shadow-md transition-shadow duration-200`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-gray-800 text-sm font-semibold",children:e.label}),s.jsx("div",{className:`${e.color}`,children:s.jsx(r,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"mt-1",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.value}),s.jsxs("p",{className:"text-xs text-green-600 font-medium mt-1 flex items-center",children:[s.jsx(i,{className:"w-3 h-3 mr-1"}),e.trend," vs last month"]})]})]})};return s.jsxs(r,{children:[s.jsx(o,{title:"Dashboard"}),s.jsxs("div",{className:"bg-gray-50 min-h-screen p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:R?"Admin Dashboard":"My Dashboard"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:R?"Welcome back! Here's your homophone learning analytics.":"Welcome back! Here's your personal learning progress."})]}),s.jsx("div",{className:`grid grid-cols-1 ${R?"md:grid-cols-2 lg:grid-cols-3":"md:grid-cols-3"} gap-4 mb-6`,children:z.map(e=>s.jsx(T,{stat:e},e.id))}),R?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activity Overview"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Sessions and engagement last 7 days"})]}),s.jsx(c,{width:"100%",height:300,children:s.jsxs(m,{data:K,margin:{top:10,right:30,left:0,bottom:0},children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"colorSessions",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),s.jsxs("linearGradient",{id:"colorEngagement",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})]}),s.jsx(x,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(h,{dataKey:"day",stroke:"#9ca3af",style:{fontSize:"12px"}}),s.jsx(b,{stroke:"#9ca3af",style:{fontSize:"12px"}}),s.jsx(g,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"12px"}}),s.jsx(p,{wrapperStyle:{fontSize:"12px"}}),s.jsx(j,{type:"monotone",dataKey:"sessions",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorSessions)"}),s.jsx(j,{type:"monotone",dataKey:"engagement",stroke:"#10b981",fillOpacity:1,fill:"url(#colorEngagement)"})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Top Articles"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"By checks"})]}),s.jsx(c,{width:"100%",height:300,children:s.jsxs(u,{children:[s.jsx(y,{data:$,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:s})=>`${e.split("/")[0]}: ${s}`,outerRadius:80,fill:"#8884d8",dataKey:"value",style:{fontSize:"11px"},children:$.map((e,r)=>s.jsx(f,{fill:e.color},`cell-${r}`))}),s.jsx(g,{formatter:e=>`${e} checks`,contentStyle:{fontSize:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"}})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Engagement Trend (7d)"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Student vs No-Role checks"})]}),s.jsx(c,{width:"100%",height:280,children:s.jsxs(v,{data:M,margin:{top:5,right:30,left:0,bottom:5},children:[s.jsx(x,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(h,{dataKey:"day",stroke:"#9ca3af"}),s.jsx(b,{stroke:"#9ca3af"}),s.jsx(g,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),s.jsx(p,{}),s.jsx(N,{type:"monotone",dataKey:"student",stroke:"#2563eb",strokeWidth:2,dot:{r:3},name:"Student"}),s.jsx(N,{type:"monotone",dataKey:"norole",stroke:"#f97316",strokeWidth:2,dot:{r:3},name:"No Role"})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Checks Distribution"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Share of checks by group"})]}),s.jsx(c,{width:"100%",height:280,children:s.jsxs(u,{children:[s.jsx(y,{data:U,cx:"50%",cy:"50%",outerRadius:90,dataKey:"value",labelLine:!1,label:({name:e,value:s})=>`${e}: ${s}`,children:U.map((e,r)=>s.jsx(f,{fill:e.color},`cmp-${r}`))}),s.jsx(g,{formatter:(e,s)=>[`${e}`,s]}),s.jsx(p,{})]})})]})]}),s.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"KPI Comparison"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Student vs No-Role on Avg Words/Check and Avg Checks/User"})]}),s.jsx(c,{width:"100%",height:320,children:s.jsxs(C,{data:O,margin:{top:5,right:20,left:0,bottom:5},children:[s.jsx(x,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(h,{dataKey:"metric",stroke:"#9ca3af"}),s.jsx(b,{stroke:"#9ca3af"}),s.jsx(g,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),s.jsx(p,{}),s.jsx(k,{dataKey:"Student",fill:"#2563eb",radius:[4,4,0,0]}),s.jsx(k,{dataKey:"No Role",fill:"#f97316",radius:[4,4,0,0]})]})})]})]}):s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"My Recent Activity"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Your learning progress"})]}),s.jsx("div",{className:"space-y-3",children:P&&P.length>0?P.map((e,r)=>s.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-b-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(a,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:e.article?.title||"Article"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Completed on ",new Date(e.completed_at).toLocaleDateString()]})]})]}),s.jsx("div",{className:"text-green-600 font-semibold",children:"✓ Completed"})]},r)):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(a,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No activity yet. Start learning!"})]})})]})]})]})};export{w as default};
