import{v as G,r as u,j as e,a9 as Q,ao as L,a7 as X,ar as J,ad as Z,ae as B,U as te,L as U,aj as re,av as V,B as W,aD as ae,u as le,S as ne,a6 as ie,as as H,aa as F}from"../vendor/vendor-common.DkKXL0Tk.js";import{e as $,b as K,d as oe,M as q}from"../components/components-common.Cz_RKLYJ.js";import{A as ee}from"./page-articles.CWa6oHJj.js";function ce({role:c,permissions:h,pages:v=[]}){const{data:n,setData:m,post:D,patch:C,errors:b,reset:x,processing:k}=G({name:c?.name||"",permissions:[],page_permissions:{}}),[g,S]=u.useState(""),[P,f]=u.useState("permissions"),[E,N]=u.useState("");u.useEffect(()=>{if(c!==void 0){const s=c.permissions.map(t=>t.id);m("permissions",s),c.page_permissions&&m("page_permissions",c.page_permissions)}},[c]);const _={"nlp-only":{label:"NLP-only (Basic)",description:"Can view article list and check homophones",permissions:["article-list","homophone-list"],pages:{dashboard:["view"],articles:["view"],"user-progress":["own"]}},"nlp-la":{label:"NLP+LA (Full Features)",description:"Everything NLP-only has + learning analytics",permissions:["article-list","homophone-list","quiz-list"],pages:{dashboard:["view"],articles:["view"],"user-progress":["view","own"]}},instructor:{label:"Instructor",description:"Can manage groups, view all progress, create articles",permissions:["article-list","article-create","article-edit","homophone-list","quiz-list","user-list","role-list"],pages:{dashboard:["view"],articles:["view","create","update"],"user-progress":["view"],users:["view","create","update"],roles:["view"]}},admin:{label:"Admin (Full Access)",description:"Complete system access",permissions:"all",pages:"all"}},T=s=>{const t=_[s];if(t){if(t.permissions==="all"){const r=h.map(i=>i.id);m("permissions",r)}else{const r=h.filter(i=>t.permissions.includes(i.name)).map(i=>i.id);m("permissions",r)}if(t.pages==="all"){const r={};(v||[]).forEach(i=>{r[i.page_name]={view:!0,create:!0,update:!0,delete:!0}}),m("page_permissions",r)}else{const r={};Object.entries(t.pages).forEach(([i,a])=>{r[i]={},a.forEach(o=>{r[i][o]=!0})}),m("page_permissions",r)}N(s)}},M=s=>{const t=parseInt(s.target.value);s.target.checked?n.permissions.includes(t)||m("permissions",[...n.permissions,t]):m("permissions",n.permissions.filter(r=>r!==t)),N("")},O=(s,t)=>{const r=t.map(a=>a.id);if(r.every(a=>n.permissions.includes(a)))m("permissions",n.permissions.filter(a=>!r.includes(a)));else{const a=[...n.permissions];r.forEach(o=>{a.includes(o)||a.push(o)}),m("permissions",a)}N("")},A=(s,t)=>{const r=n.page_permissions[s]||{},i={...n.page_permissions,[s]:{...r,[t]:!r[t]}};m("page_permissions",i),N("")},I=s=>{s.preventDefault(),c==null?D(route("roles.store"),{preserveState:!0,onFinish:()=>x()}):C(route("roles.update",c.id),{preserveState:!0,onFinish:()=>x()})},w=s=>s.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "),j=(()=>{const s={};return h.forEach(t=>{const r=t.name.split("-"),i=["list","create","edit","delete","export","import","view","manage","own"];let a,o;const R=r[r.length-1];i.includes(R)?(o=R,a=r.slice(0,-1).join("-")):(a=r[0],o=r.slice(1).join("-")),s[a]||(s[a]=[]),s[a].push({...t,action:o,displayAction:w(o)})}),Object.keys(s).forEach(t=>{s[t].sort((r,i)=>{const a=["list","view","create","edit","update","delete","own","manage"];return a.indexOf(r.action)-a.indexOf(i.action)})}),s})(),z=Object.keys(j).filter(s=>s.toLowerCase().includes(g.toLowerCase())||j[s].some(t=>t.displayAction.toLowerCase().includes(g.toLowerCase()))),l=[{key:"view",label:"View",icon:X,color:"blue"},{key:"create",label:"Create",icon:J,color:"green"},{key:"update",label:"Update",icon:Z,color:"yellow"},{key:"delete",label:"Delete",icon:B,color:"red"},{key:"own",label:"Own Data",icon:te,color:"purple"}],d=s=>({dashboard:ae,"user-progress":V,articles:W,roles:L,users:V,settings:re})[s]||W,p=c?.id?"Edit Role":"Create Role",y=[{title:"Home",url:"/"},{title:"Roles",url:route("roles.index")},{title:p,url:""}];return e.jsxs(ee,{breadcrumb:e.jsx(K,{header:p,links:y}),children:[e.jsx(Q,{title:p}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-blue-50/30 mb-12",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:p}),e.jsx("p",{className:"text-gray-500",children:c?.id?"Update role details, permissions, and page access":"Create a new role with permissions and page access"})]}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Role Name"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"name",name:"name",type:"text",placeholder:"Enter role name (e.g., Group A: NLP-only)",value:n.name,onChange:s=>m("name",s.target.value),className:`block mt-2 w-full px-3 py-[11px] text-sm rounded-xl border ${b.name?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"} placeholder-gray-400 shadow-sm focus:outline-none focus:ring-2`}),b.name&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),e.jsx($,{message:b.name,className:"mt-1 text-sm text-red-600"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Quick Templates"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:Object.entries(_).map(([s,t])=>e.jsxs("button",{type:"button",onClick:()=>T(s),className:`p-3 rounded-xl border-2 transition-all text-left ${E===s?"border-blue-500 bg-blue-100":"border-blue-200 bg-white hover:border-blue-400 hover:bg-blue-50"}`,children:[e.jsx("div",{className:"font-semibold text-sm text-gray-900 mb-1",children:t.label}),e.jsx("div",{className:"text-xs text-gray-600",children:t.description})]},s))}),e.jsx("p",{className:"text-xs text-blue-700 mt-3",children:"ðŸ’¡ Select a template to quickly configure permissions, or customize manually below"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>f("permissions"),className:`pb-3 px-1 border-b-2 font-medium text-sm transition-all duration-200 ease-in-out ${P==="permissions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500  hover:border-gray-300"}`,children:["Feature Permissions",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs bg-gray-100",children:n.permissions.length})]}),e.jsxs("button",{type:"button",onClick:()=>f("pages"),className:`pb-3 px-1 border-b-2 font-medium text-sm transition-all duration-200 ease-in-out ${P==="pages"?"border-blue-500 text-blue-600":"border-transparent text-gray-500  hover:border-gray-300"}`,children:["Page Access Control",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs bg-gray-100",children:Object.keys(n.page_permissions).length})]})]})}),P==="permissions"?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Feature Permissions"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"relative w-full max-w-xs",children:[e.jsx("input",{type:"text",placeholder:"Search modules...",value:g,onChange:s=>S(s.target.value),className:"pl-10 pr-16 py-2 border border-gray-300 rounded-xl focus:ring-0 w-full"}),e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:z.map(s=>{const t=j[s],r=t.filter(o=>n.permissions.includes(o.id)).length,i=r===t.length,a=r>0&&r<t.length;return e.jsxs("div",{className:"bg-white border border-blue-100 rounded-xl shadow-sm hover:shadow-sm transition-shadow",children:[e.jsx("div",{className:"p-4 border-b border-blue-100 bg-gradient-to-r from-blue-50 to-blue-50 rounded-t-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-blue-700 capitalize flex items-center",children:w(s)}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${i?"bg-blue-100 text-blue-800":a?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"}`,children:[r,"/",t.length]}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i,ref:o=>{o&&(o.indeterminate=a)},onChange:()=>O(s,t),className:"form-checkbox mt-2 h-4 w-4 text-blue-500 rounded border-gray-300 focus:ring-blue-500 focus:ring-1"}),e.jsx("span",{className:"ml-2 mt-2 text-xs text-gray-600",children:"All"})]})]})]})}),e.jsx("div",{className:"p-3",children:t.map(o=>e.jsxs("label",{className:"flex items-center space-x-4 cursor-pointer group hover:bg-blue-50 p-2 rounded",children:[e.jsx("input",{type:"checkbox",value:o.id,checked:n.permissions.includes(o.id),onChange:M,className:"form-checkbox h-4 w-4 text-blue-500 rounded border-gray-300 focus:ring-1 focus:ring-blue-500"}),e.jsx("div",{className:"flex items-center space-x-2 flex-1",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:o.displayAction})})]},o.id))})]},s)})}),e.jsx($,{className:"mt-4 text-sm text-red-600",message:b.permissions})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Page Access Control"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Control which pages this role can access and what actions they can perform."}),e.jsx("div",{className:"space-y-4",children:v&&v.length>0?v.map(s=>{const t=d(s.page_name),r=n.page_permissions[s.page_name]||{},i=Object.values(r).filter(Boolean).length;return e.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 hover:border-blue-300 transition-all duration-200 ease-in-out",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(t,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 capitalize",children:w(s.page_name)}),e.jsx("p",{className:"text-xs text-gray-500",children:s.description||"Page access control"})]})]}),i>0&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:[i," enabled"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(a=>{const o=a.icon,R=r[a.key],se={blue:"bg-blue-100 text-blue-700 border-blue-300",green:"bg-green-100 text-green-700 border-green-300",yellow:"bg-yellow-100 text-yellow-700 border-yellow-300",red:"bg-red-100 text-red-700 border-red-300",purple:"bg-purple-100 text-purple-700 border-purple-300"};return e.jsxs("button",{type:"button",onClick:()=>A(s.page_name,a.key),className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl border-2 text-sm font-medium transition-all ${R?se[a.color]:"bg-gray-50 text-gray-400 border-gray-200"} hover:scale-105`,children:[e.jsx(o,{className:"w-4 h-4"}),a.label,R&&e.jsx("span",{className:"ml-1",children:"âœ“"})]},a.key)})})]},s.id)}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(L,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No pages available for access control"}),e.jsx("p",{className:"text-sm",children:"Run migrations to create page permissions"})]})})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsxs(U,{href:route("roles.index"),className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-xl text-gray-700 border hover:bg-gray-200 hover:border-gray-400  transition duration-200",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Cancel"]}),e.jsx("button",{type:"submit",disabled:k,className:"inline-flex items-center justify-center px-6 py-2 text-sm font-medium rounded-xl text-white bg-gradient-to-r from-blue-500 to-blue-500 shadow-sm transition duration-200 hover:from-blue-500 hover:to-blue-500 disabled:opacity-70 disabled:cursor-not-allowed",children:k?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c?.id?"Updating...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),c?.id?"Update Role":"Create Role"]})})]})]})]})})})})})]})}const he=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));function de({roles:c,search:h=""}){const{auth:v}=le().props,n=v?.can??{},[m,D]=u.useState(!1),[C,b]=u.useState(null),[x,k]=u.useState(null),[g,S]=u.useState(h||""),{delete:P,processing:f,reset:E}=G(),N=l=>l.reduce((d,p)=>{const y=p.name.split("-")[0];return d[y]||(d[y]=[]),d[y].push(p),d},{}),_=l=>l.split("-").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ");u.useEffect(()=>{S(h||"")},[h]);const T=l=>{const d=l.target.value;S(d),F.get(route("roles.index"),{search:d},{preserveState:!0,replace:!0})},M=()=>{S(""),F.get(route("roles.index"),{},{preserveState:!0})},O=l=>{b(l),D(!0)},A=()=>{D(!1),b(null),E()},I=l=>{k(l)},w=()=>{k(null)},Y=l=>{l.preventDefault(),C&&P(route("roles.destroy",C.id),{preserveScroll:!0,onSuccess:()=>{A(),F.reload({only:["roles"]})},onError:d=>{console.error("Delete error:",d)},onFinish:()=>E()})},j="Role List",z=[{title:"Home",url:"/"},{title:j,url:""}];return e.jsxs(ee,{breadcrumb:e.jsx(K,{header:j,links:z}),children:[e.jsx(Q,{title:j}),e.jsxs("div",{className:"bg-white shadow-sm rounded-2xl overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b flex flex-col sm:flex-row justify-between items-center gap-3",children:[e.jsx("h3",{className:"text-xl sm:text-lg font-semibold text-gray-800",children:"Role Management"}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("div",{className:"relative flex-1 sm:flex-none",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 rounded-xl border border-gray-300 hover:shadow-sm transition text-sm bg-white w-full sm:w-auto",children:[e.jsx(ne,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search roles...",className:"px-2 outline-none border-none bg-transparent text-sm placeholder-gray-400 w-full focus:outline-none focus:ring-0",value:g,onChange:T}),g&&e.jsx("button",{onClick:M,className:"text-gray-400  transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:e.jsx(ie,{className:"w-4 h-4"})})]})}),n["role-create"]&&e.jsxs(U,{href:route("roles.create"),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold text-sm rounded-xl hover:bg-green-700 transition whitespace-nowrap",children:[e.jsx(J,{className:"w-4 h-4"}),"Add Role"]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-200",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-4 px-6 font-semibold whitespace-nowrap",children:"#ID"}),e.jsx("th",{className:"py-4 px-6 font-semibold whitespace-nowrap",children:"Name"}),e.jsx("th",{className:"py-4 px-6 font-semibold text-right whitespace-nowrap",children:"Created At"}),(n["role-edit"]||n["role-delete"])&&e.jsx("th",{className:"py-4 px-6 font-semibold text-center whitespace-nowrap",children:"Actions"})]})}),e.jsx("tbody",{className:"text-gray-700 bg-white divide-y divide-gray-200",children:c.data.length>0?c.data.map(l=>e.jsxs("tr",{className:"hover:bg-blue-50 transition-all duration-200",children:[e.jsx("td",{className:"py-4 px-6 font-medium text-gray-900",children:l.id}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:l.name})}),e.jsx("td",{className:"py-4 px-6 text-gray-600 text-right",children:l.created_at?H(l.created_at).format("DD/MM/YYYY"):"N/A"}),(n["role-edit"]||n["role-delete"])&&e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:()=>I(l),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-cyan-600 rounded-xl hover:bg-cyan-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:e.jsx(X,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 hidden group-hover:block bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"View"})]}),n["role-edit"]&&e.jsxs("div",{className:"group relative",children:[e.jsx(U,{href:route("roles.edit",l.id),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-xl hover:bg-blue-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",children:e.jsx(Z,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 hidden group-hover:block bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Edit"})]}),n["role-delete"]&&e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:()=>O(l),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded-xl hover:bg-red-700 transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-sm active:scale-95",disabled:f,children:e.jsx(B,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 hidden group-hover:block bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Delete"})]})]})})]},l.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:n["role-edit"]||n["role-delete"]?4:3,className:"py-10 text-center text-gray-500 text-sm",children:g?"No roles found matching your search":"No roles found"})})})]})}),c.total>c.per_page&&e.jsx("div",{className:"px-6 py-3 border-t flex justify-center",children:e.jsx(oe,{links:c.links})})]}),e.jsx(q,{show:!!x,onClose:w,maxWidth:"2xl",children:x&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-900 flex items-center gap-2",children:"Role Details"}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-x-8 gap-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Role Name:"}),e.jsx("span",{className:"text-gray-800",children:x.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),e.jsx("span",{className:"text-gray-800",children:H(x.created_at).format("DD/MM/YYYY HH:mm")})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700 block mb-3",children:"Permissions:"}),e.jsx("div",{className:"max-h-64 overflow-y-auto bg-gray-50 rounded-xl p-3",children:Array.isArray(x.permissions)&&x.permissions.length>0?Object.entries(N(x.permissions)).map(([l,d])=>e.jsxs("div",{className:"mb-3 last:mb-0",children:[e.jsx("div",{className:"font-semibold text-gray-800 text-sm mb-2",children:_(l)}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((p,y)=>e.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 rounded-xl px-2.5 py-1 text-xs font-medium",children:_(p.name)},p.id||y))})]},l)):e.jsx("span",{className:"text-gray-400 text-sm",children:"No permissions assigned"})})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-2",children:e.jsx("button",{type:"button",onClick:w,className:"rounded-xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",children:"Close"})})]})}),e.jsx(q,{show:m,onClose:A,maxWidth:"xl",children:e.jsxs("form",{onSubmit:Y,className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(B,{className:"w-5 h-5 text-red-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Delete Role"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Are you sure you want to delete"," ",e.jsxs("span",{className:"font-semibold text-gray-900",children:['"',C?.name,'"']}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:A,className:"rounded-xl border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-5 py-1 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition disabled:opacity-60",children:f?"Deleting...":"Delete"})]})]})})]})}const be=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"}));export{he as C,be as I};
