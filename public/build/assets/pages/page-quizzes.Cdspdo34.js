import{r as e,j as t}from"../vendor/vendor-react.CSh4geB6.js";import{u as s,H as r,r as a,L as l}from"../vendor/vendor-inertia.HwN2lMYo.js";import{a as n}from"./page-articles.BtzFlrUy.js";import{B as o,Q as i,H as c,j as d,F as u,P as x,M as h}from"../components/components-common.mFbUzjoH.js";import{o as m,Q as p,V as b,W as g,Y as y,s as f,l as j,_ as w,f as N,n as v,S as C,$ as _,b as k}from"../vendor/vendor-ui.wXUDVBjR.js";import{m as A}from"../vendor/vendor-animation.B6GxcyWq.js";const z=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{datas:l}=s().props,i=l&&l.id,c=i?"Edit Quiz":"New Quiz",[d,u]=e.useState({title:l?.title||"",subject:l?.subject||"",groups:l?.groups||[],status:l?.status||"Draft",description:l?.description||""}),[x,h]=e.useState([]);e.useEffect(()=>{h(l?.questions?l.questions.map(e=>{if("Matching"===e.type){let t=[];try{Array.isArray(e.options)?t=e.options.map(e=>"object"==typeof e&&void 0!==e.left&&void 0!==e.right?e:{left:e.left||"",right:e.right||""}):e.options&&(t=JSON.parse(e.options))}catch{t=[{left:"",right:""}]}t&&0!==t.length||(t=[{left:"",right:""}]);let s=[];try{Array.isArray(e.correct_answer)?s=e.correct_answer.map(e=>"object"==typeof e&&void 0!==e.left&&void 0!==e.right?e:{left:e.left||"",right:e.right||""}):e.correct_answer&&(s=JSON.parse(e.correct_answer))}catch{s=[]}return s||(s=[]),{...e,options:t,correct_answer:s}}return{...e,options:Array.isArray(e.options)?e.options:e.options?JSON.parse(e.options):["","","",""],correct_answer:"Checkboxes"===e.type?Array.isArray(e.correct_answer)?e.correct_answer:e.correct_answer?JSON.parse(e.correct_answer):[]:"True/False"===e.type?!0===e.correct_answer||"true"===e.correct_answer||"True"===e.correct_answer?"True":"False":e.correct_answer||""}}):[{type:"Multiple Choice",text:"",options:["","","",""],correct_answer:""}])},[l]);const f=(e,t)=>{if(t<0||t>=x.length)return;const s=[...x],[r]=s.splice(e,1);s.splice(t,0,r),h(s)},j=(e,t,s)=>{h(x.map((r,a)=>a!==e?r:"type"===t&&"Matching"===s?{...r,type:s,options:r.options&&r.options.length?r.options:[{left:"",right:""}],correct_answer:r.correct_answer&&r.correct_answer.length?r.correct_answer:[]}:"type"===t&&"Multiple Choice"===s?{...r,type:s,options:["","","",""],correct_answer:""}:"type"===t&&"Checkboxes"===s?{...r,type:s,options:["","","",""],correct_answer:[]}:"type"===t&&"True/False"===s||"type"===t&&"Fill-in-the-blank"===s?{...r,type:s,options:[],correct_answer:""}:{...r,[t]:s}))},w=(e,t)=>{h(x.map((s,r)=>{if(r!==e)return s;if("Checkboxes"===s.type){let e=Array.isArray(s.correct_answer)?s.correct_answer:[];return e=e.includes(t)?e.filter(e=>e!==t):[...e,t],{...s,correct_answer:e}}return s.type,{...s,correct_answer:t}}))},N=[{title:"Home",url:"/"},{title:"Quiz",url:route("quizzes.index")},{title:c,url:""}];return t.jsxs(n,{breadcrumb:t.jsx(o,{header:c,links:N}),children:[t.jsx(r,{title:c}),t.jsxs("form",{className:"min-h-screen w-full mx-auto space-y-6 mb-12",onSubmit:e=>{e.preventDefault();const t={...d,questions:x.map(e=>"Matching"===e.type?{type:e.type,text:e.text,options:Array.isArray(e.options)?e.options.map(e=>({left:e.left||"",right:e.right||""})):[{left:"",right:""}],correct_answer:Array.isArray(e.correct_answer)?e.correct_answer.map(e=>({left:e.left||"",right:e.right||""})):[]}:{type:e.type,text:e.text,description:e.description,options:e.options,correct_answer:("Checkboxes"===e.type||e.type,e.correct_answer)})};i?a.patch(route("quizzes.update",l.id),t):a.post(route("quizzes.store"),t)},children:[t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm px-6 md:px-8 py-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 md:gap-6",children:[t.jsxs("div",{className:"w-full md:w-1/2",children:[t.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Quiz Name"}),t.jsx("input",{type:"text",value:d.title,onChange:e=>u({...d,title:e.target.value}),placeholder:"Enter name",className:"w-full py-2.5 px-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition",required:!0})]}),t.jsxs("div",{className:"w-full md:w-1/3",children:[t.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Status"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[t.jsx("input",{type:"radio",name:"status",value:"Published",checked:"Published"===d.status,onChange:()=>u({...d,status:"Published"}),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500 accent-blue-600"}),t.jsx("span",{className:"text-sm font-medium text-blue-700 bg-blue-100/80 px-3 py-1.5 rounded-full",children:"Publish"})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none",children:[t.jsx("input",{type:"radio",name:"status",value:"Draft",checked:"Draft"===d.status,onChange:()=>u({...d,status:"Draft"}),className:"h-4 w-4 text-red-500 border-gray-300 focus:ring-red-400 accent-red-500"}),t.jsx("span",{className:"text-sm font-medium text-red-600 bg-gray-100 px-3 py-1.5 rounded-full",children:"Draft"})]})]})]}),t.jsx("div",{className:"flex items-end gap-2",children:t.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 px-6 w-36 py-2.5 text-white bg-blue-600 hover:bg-blue-700 rounded-xl shadow-sm transition-colors",children:[t.jsx(m,{className:"w-4 h-4"})," ",i?"Update":"Create"]})})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Description"}),t.jsx("textarea",{value:d.description,onChange:e=>u({...d,description:e.target.value}),placeholder:"Enter quiz description",className:"w-full px-3.5 py-3 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition",rows:"3"})]})]}),t.jsxs("div",{className:"space-y-6",children:[x.map((e,s)=>t.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm px-6 md:px-8 py-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-5",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Question ",s+1]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"button",className:"flex items-center justify-center w-10 h-10 text-red-600 border border-red-200 rounded-xl hover:bg-red-50 transition-colors","aria-label":"Delete",onClick:()=>(e=>{h(x.filter((t,s)=>s!==e))})(s),disabled:1===x.length,children:t.jsx(p,{className:"w-5 h-5"})}),t.jsx("button",{type:"button",className:"flex items-center justify-center w-10 h-10 text-gray-600 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-40",onClick:()=>f(s,s-1),disabled:0===s,children:t.jsx(b,{className:"w-5 h-5"})}),t.jsx("button",{type:"button",className:"flex items-center justify-center w-10 h-10 text-gray-600 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-40",onClick:()=>f(s,s+1),disabled:s===x.length-1,children:t.jsx(g,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Question Type"}),t.jsxs("select",{value:e.type,onChange:e=>j(s,"type",e.target.value),className:"w-full md:w-1/3 py-2.5 px-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition",children:[t.jsx("option",{value:"Multiple Choice",children:"Multiple Choice"}),t.jsx("option",{value:"Checkboxes",children:"Checkboxes"}),t.jsx("option",{value:"True/False",children:"True/False"}),t.jsx("option",{value:"Fill-in-the-blank",children:"Fill-in-the-blank"}),t.jsx("option",{value:"Matching",children:"Matching"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-800 mb-2 font-medium",children:"Question"}),t.jsx("input",{type:"text",value:e.text,onChange:e=>j(s,"text",e.target.value),placeholder:"Enter your question",className:"w-full px-3.5 py-2.5 rounded-xl bg-gray-50 border border-gray-200 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition"})]}),("Multiple Choice"===e.type||"Checkboxes"===e.type)&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Options"}),e.options.map((r,a)=>t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{type:"Multiple Choice"===e.type?"radio":"checkbox",name:`correctOption-${s}`,checked:"Checkboxes"===e.type?Array.isArray(e.correct_answer)&&e.correct_answer.includes(r):e.correct_answer===r,onChange:()=>w(s,r),className:"text-blue-600 focus:ring-blue-400 cursor-pointer"}),t.jsx("input",{type:"text",value:r,placeholder:`Option ${a+1}`,onChange:e=>((e,t,s)=>{h(x.map((r,a)=>{if(a!==e)return r;if("Matching"===r.type){const e=[...r.options];return e[t]=s,{...r,options:e}}return{...r,options:r.options.map((e,r)=>r===t?s:e)}}))})(s,a,e.target.value),className:"flex-1 px-3.5 py-2.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition"}),t.jsx("button",{type:"button",onClick:()=>j(s,"options",e.options.filter((e,t)=>t!==a)),className:"text-red-500 hover:text-red-600 transition-colors",disabled:e.options.length<=2,children:t.jsx(p,{className:"w-5 h-5"})})]},a)),t.jsxs("button",{type:"button",onClick:()=>j(s,"options",[...e.options,""]),className:"mt-2 inline-flex items-center gap-2 text-blue-700 hover:text-blue-800",children:[t.jsx(y,{className:"w-4 h-4"})," Add Option"]}),t.jsxs("div",{className:"mt-2 text-sm text-green-700",children:["Checkboxes"===e.type&&Array.isArray(e.correct_answer)&&e.correct_answer.length>0&&t.jsxs(t.Fragment,{children:["Correct Answers: ",t.jsx("strong",{children:e.correct_answer.join(", ")})]}),"Multiple Choice"===e.type&&e.correct_answer&&t.jsxs(t.Fragment,{children:["Correct Answer: ",t.jsx("strong",{children:e.correct_answer})]})]})]}),"True/False"===e.type&&t.jsxs("div",{className:"flex gap-6 mt-4",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:`correctOption-${s}`,value:"True",checked:"True"===e.correct_answer,onChange:e=>w(s,e.target.value),className:"cursor-pointer text-blue-600 focus:ring-blue-400"}),"True"]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:`correctOption-${s}`,value:"False",checked:"False"===e.correct_answer,onChange:e=>w(s,e.target.value),className:"cursor-pointer text-blue-600 focus:ring-blue-400"}),"False"]}),t.jsx("div",{className:"ml-4 text-sm text-green-700",children:e.correct_answer&&t.jsxs(t.Fragment,{children:["Correct Answer: ",t.jsx("strong",{children:e.correct_answer})]})})]}),"Matching"===e.type&&t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"Matching Pairs"}),(e.options&&e.options.length>0?e.options:[{left:"",right:""}]).map((r,a)=>t.jsxs("div",{className:"flex gap-3 items-center mb-3",children:[t.jsx("input",{type:"text",value:r.left||"",onChange:t=>{const r=[...e.options||[]];r[a]={...r[a],left:t.target.value},j(s,"options",r)},placeholder:`Left item ${a+1}`,className:"w-1/3 px-3.5 py-2.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition"}),t.jsx("input",{type:"text",value:r.right||"",onChange:t=>{const r=[...e.options||[]];r[a]={...r[a],right:t.target.value},j(s,"options",r)},placeholder:`Right item ${a+1}`,className:"w-1/3 px-3.5 py-2.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition"}),t.jsx("button",{type:"button",onClick:()=>{const t=e.options.filter((e,t)=>t!==a);j(s,"options",t)},className:"text-red-500 hover:text-red-600 transition-colors",disabled:(e.options||[]).length<=1,children:t.jsx(p,{className:"w-5 h-5"})})]},a)),t.jsxs("button",{type:"button",onClick:()=>{const t=[...e.options||[],{left:"",right:""}];j(s,"options",t)},className:"mt-2 inline-flex items-center gap-2 text-blue-700 hover:text-blue-800",children:[t.jsx(y,{className:"w-4 h-4"})," Add matching pair"]}),t.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"The matching pairs will be shuffled when taking the quiz"})]}),"Fill-in-the-blank"===e.type&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-gray-700 mb-2 font-medium",children:"Correct Answer"}),t.jsx("input",{type:"text",value:e.correct_answer,onChange:e=>w(s,e.target.value),className:"w-full md:w-1/2 px-3.5 py-2.5 rounded-xl border border-gray-200 bg-gray-50 focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500 outline-none transition"}),t.jsx("div",{className:"mt-2 text-sm text-green-700",children:e.correct_answer&&t.jsxs(t.Fragment,{children:["Correct Answer: ",t.jsx("strong",{children:e.correct_answer})]})})]})]},s)),t.jsxs("button",{type:"button",onClick:()=>{h([...x,{type:"Multiple Choice",text:"",options:["","","",""],correct_answer:""}])},className:"inline-flex items-center gap-2 px-5 py-2.5 text-blue-700 border border-blue-200 rounded-xl hover:bg-blue-50 transition-colors",children:[t.jsx(y,{className:"w-4 h-4"})," Add Question"]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));const S=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{quizData:n,auth:o}=s().props,x=n?.data||[],[h,m]=e.useState(!1),[p,b]=e.useState(null),[g,y]=e.useState(0),[w,N]=e.useState(!1),[v,C]=e.useState(!1),[_,k]=e.useState([]),[z,S]=e.useState(0),[q,M]=e.useState(()=>!!o?.can?.student||("undefined"!=typeof window&&void 0!==window.__canAccessLibrary?window.__canAccessLibrary:null));e.useEffect(()=>{if(!0===q||!o?.user)return;let e=!1;return(async()=>{try{const t=(await fetch(route("api.user.can-access-library"),{headers:{"X-Requested-With":"XMLHttpRequest"}})).ok;e||(M(t),"undefined"!=typeof window&&(window.__canAccessLibrary=t))}catch{e||(M(!1),"undefined"!=typeof window&&(window.__canAccessLibrary=!1))}})(),()=>{e=!0}},[o?.user,q]);const Q=e=>{b(e),m(!0),y(0),N(!1),k(new Array(e.questions.length).fill(null)),C(!1),S(0)},D=(e,t)=>{k(s=>{const r=[...s];return r[e]={answer:t},r})},T=()=>{z<p.questions.length-1&&S(z+1)},$=()=>{z>0&&S(z-1)},F=()=>{let e=0;p.questions.forEach((t,s)=>{const r=_[s]||{};let a=!1;if("Checkboxes"===t.type)a=Array.isArray(t.correct_answer)&&Array.isArray(r.answer)&&r.answer.length===t.correct_answer.length&&r.answer.every(e=>t.correct_answer.includes(e));else if("True/False"===t.type){const e=!0===t.correct_answer||"True"===t.correct_answer?"True":"False";a=r.answer===e}else a="Matching"===t.type?Array.isArray(t.correct_answer)&&Array.isArray(r.answer)&&t.correct_answer.length===r.answer.length&&t.correct_answer.every(e=>r.answer.some(t=>t.left===e.left&&t.right===e.right)):r.answer===t.correct_answer;a&&e++,_[s]&&(_[s].isCorrect=a)}),y(e),N(!0),a.post(route("quizzes.submit"),{quiz_id:p.id,score:e,answers:_},{onSuccess:()=>alert("Quiz submitted successfully! ✅"),preserveState:!0})},R=()=>{m(!1),b(null),N(!1),k([]),C(!1),S(0)},P=()=>R(),O=(e,t)=>{const s=Math.round(e/t*100);return s>=80?"from-green-500 to-emerald-600":s>=60?"from-blue-500 to-blue-600":s>=40?"from-orange-500 to-orange-600":"from-red-500 to-red-600"},E=e=>{if(!e)return"";const t=new Date(e),s=new Date,r=Math.floor((s-t)/1e3),a=Math.floor(r/60),l=Math.floor(a/60),n=Math.floor(l/24),o=Math.floor(n/30),i=Math.floor(n/365);return i>0?`${i} year${i>1?"s":""} ago`:o>0?`${o} month${o>1?"s":""} ago`:n>0?`${n} day${n>1?"s":""} ago`:l>0?`${l} hour${l>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"just now"};return t.jsxs("div",{div:!0,className:"bg-[#f7f8fa]",children:[t.jsx(r,{title:"Quiz"}),h&&p&&t.jsx(i,{currentQuiz:p,currentQuestionIdx:z,userAnswers:_,showResult:w,reviewMode:v,score:g,onAnswerChange:D,onNext:T,onPrev:$,onSubmit:F,onRestart:R,onDone:P,onStartAgain:()=>{R(),setTimeout(()=>Q(p),150)},setCurrentQuestionIdx:S,setReviewMode:C,setQuizStarted:m}),!h&&t.jsx(c,{}),t.jsxs("div",{className:"min-h-screen w-full py-12 max-w-7xl mx-auto "+(h?"hidden":""),children:[t.jsx(d,{}),!0!==q?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex justify-between items-center text-md",children:[t.jsxs("span",{className:"text-gray-500 text-md",children:["Try it out above by using"," ",t.jsx("span",{className:"font-semibold",children:"handwritten notes."})]}),t.jsxs("span",{className:"text-gray-500 text-md",children:["Don't have any content? ","",t.jsx("button",{className:"text-blue-500 text-md hover:underline",children:"Create from scratch"})]})]})}):t.jsxs("div",{className:"max-w-7xl mx-auto px-2",children:[!h&&t.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12"}),!h&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 mt-3",children:x.map(e=>t.jsx(A.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},whileHover:{translateY:-6},className:"rounded-2xl bg-white border border-gray-100 shadow-sm hover:shadow-md transition-all",children:t.jsxs("div",{className:"p-4 md:p-6 flex flex-col justify-between h-full",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("h3",{className:"text-gray-900 font-semibold text-lg truncate",children:e.title}),t.jsx("p",{className:"text-gray-500 text-sm mt-1 truncate",children:`${e.questions?.length||0} question${1===(e.questions?.length||0)?"":"s"} • ${E(e.updated_at||e.created_at)}`})]}),t.jsx("button",{type:"button",className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:t.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{d:"M10 6a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm0 5a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm0 5a1.5 1.5 0 110-3 1.5 1.5 0 010 3z"})})})]}),t.jsxs("div",{className:"mt-2 flex items-center justify-end",children:[o?.can?.teacher&&t.jsx(l,{href:route("quizzes.edit",e.id),className:"px-4 py-1.5 rounded-xl border border-blue-500 text-blue-600 font-medium text-sm hover:bg-blue-50",children:"Edit"}),t.jsx("button",{onClick:()=>Q(e),className:"px-4 py-1.5 rounded-xl bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm",children:"Start"})]})]})},e.id))}),h&&p&&!w&&t.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white shadow-lg",style:{borderRadius:"20px"},children:[t.jsxs("div",{className:"bg-blue-600 text-white p-4",style:{borderRadius:"20px 20px 0 0"},children:[t.jsx("div",{className:"flex items-center justify-between mb-3",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold",children:p.title}),t.jsxs("p",{className:"text-sm text-white opacity-90 mt-1",children:["Question"," ",z+1," /"," ",p.questions.length]})]})}),t.jsx("div",{className:"w-full bg-white bg-opacity-30 h-2 overflow-hidden",style:{borderRadius:"20px"},children:t.jsx(A.div,{className:"bg-white h-2",style:{borderRadius:"20px"},initial:{width:0},animate:{width:(z+1)/p.questions.length*100+"%"},transition:{duration:.5}})})]}),t.jsxs("div",{className:"p-5",children:[p.questions.map((e,s)=>s===z&&t.jsxs(A.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-blue-600 mb-3",children:e.text}),e.description&&t.jsx("p",{className:"text-sm text-blue-500 mb-3",children:e.description})]}),t.jsxs("div",{className:"space-y-2",children:["Multiple Choice"===e.type&&e.options.map((e,r)=>t.jsxs("label",{className:"flex items-center p-3 bg-white border-2 border-blue-200 hover:border-blue-600 cursor-pointer transition-all",style:{borderRadius:"20px"},children:[t.jsx("input",{type:"radio",name:`q-${s}`,value:e,checked:_[s]?.answer===e,onChange:()=>D(s,e),className:"w-4 h-4 accent-blue-600 cursor-pointer"}),t.jsx("span",{className:"ml-3 text-blue-900 text-sm",children:e})]},r)),"Checkboxes"===e.type&&e.options.map((e,r)=>{const a=Array.isArray(_[s]?.answer)?_[s].answer:[];return t.jsxs("label",{className:"flex items-center p-3 bg-white border-2 border-blue-200 hover:border-blue-600 cursor-pointer transition-all",style:{borderRadius:"20px"},children:[t.jsx("input",{type:"checkbox",value:e,checked:a.includes(e),onChange:t=>{let r=[...a];t.target.checked?r.push(e):r=r.filter(t=>t!==e),D(s,r)},className:"w-4 h-4 accent-blue-600 cursor-pointer"}),t.jsx("span",{className:"ml-3 text-blue-900 text-sm",children:e})]},r)}),"True/False"===e.type&&["True","False"].map((e,r)=>t.jsxs("label",{className:"flex items-center p-3 bg-white border-2 border-blue-200 hover:border-blue-600 cursor-pointer transition-all",style:{borderRadius:"20px"},children:[t.jsx("input",{type:"radio",name:`q-${s}`,value:e,checked:_[s]?.answer===e,onChange:()=>D(s,e),className:"w-4 h-4 accent-blue-600 cursor-pointer"}),t.jsx("span",{className:"ml-3 text-blue-900 text-sm",children:e})]},r)),"Fill-in-the-blank"===e.type&&t.jsx("input",{type:"text",value:_[s]?.answer||"",onChange:e=>D(s,e.target.value),className:"w-full px-4 py-3 border-2 border-blue-300 focus:border-blue-600 bg-white text-blue-900 text-sm focus:outline-none transition-all",style:{borderRadius:"20px"},placeholder:"Type your answer here"}),"Matching"===e.type&&t.jsx("div",{className:"space-y-2",children:e.options.map((r,a)=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex-1 px-3 py-2 bg-blue-100 text-blue-900 text-sm border border-blue-300",style:{borderRadius:"20px"},children:r.left}),t.jsxs("select",{value:_[s]?.answer?.[a]?.right||"",onChange:e=>{const t=[..._[s]?.answer||[]];t[a]={left:r.left,right:e.target.value},D(s,t)},className:"flex-1 px-3 py-2 border-2 border-blue-300 bg-white text-blue-900 text-sm focus:outline-none focus:border-blue-600",style:{borderRadius:"20px"},children:[t.jsx("option",{value:"",children:"Select answer"}),e.options.map(e=>e.right).sort(()=>Math.random()-.5).map((e,s)=>t.jsx("option",{value:e,children:e},s))]})]},a))})]})]},s)),t.jsx("div",{className:"flex flex-wrap gap-2 mt-4 p-3 bg-blue-50",style:{borderRadius:"20px"},children:p.questions.map((e,s)=>t.jsx("button",{onClick:()=>S(s),className:"w-8 h-8 font-semibold transition-all text-xs "+(s===z?"bg-blue-600 text-white":void 0!==_[s]?.answer?"bg-blue-400 text-white hover:bg-blue-500":"bg-white text-blue-600 border border-blue-300 hover:bg-blue-100"),style:{borderRadius:"20px"},children:s+1},s))}),t.jsxs("div",{className:"flex justify-between items-center gap-3 mt-4",children:[t.jsx("button",{onClick:$,disabled:0===z,className:"px-5 py-2 font-semibold transition-all text-sm "+(0===z?"bg-blue-100 text-blue-300 cursor-not-allowed":"bg-white border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white"),style:{borderRadius:"20px"},children:"Previous"}),z===p.questions.length-1?t.jsx("button",{onClick:F,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold transition-all text-sm",style:{borderRadius:"20px"},children:"Submit Quiz"}):t.jsx("button",{onClick:T,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold transition-all text-sm",style:{borderRadius:"20px"},children:"Next"})]})]})]}),h&&w&&!v&&t.jsxs(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white shadow-2xl rounded-2xl p-8 md:p-12 text-center border border-gray-200 max-w-2xl mx-auto",children:[t.jsx(A.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},className:"inline-block mb-6",children:t.jsx("div",{className:`w-24 h-24 rounded-full bg-gradient-to-br ${O(g,p.questions.length)} flex items-center justify-center`,children:t.jsx(f,{className:"w-12 h-12 text-white"})})}),t.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Quiz Completed!"}),t.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your Score"}),t.jsxs("p",{className:"text-5xl font-bold text-blue-600 mb-2",children:[g,"/",p.questions.length]}),t.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:[Math.round(g/p.questions.length*100),"%"]})]}),t.jsx("p",{className:`text-2xl font-bold mb-8 bg-gradient-to-r ${O(g,p.questions.length)} bg-clip-text text-transparent`,children:((e,t)=>{const s=Math.round(e/t*100);return 100===s?"Perfect score!":s>=80?"Excellent work!":s>=70?"Well done!":s>=60?"Good effort!":s>=40?"Keep trying!":"Better luck next time!"})(g,p.questions.length)}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[t.jsx("button",{onClick:()=>C(!0),className:"px-6 py-3 rounded-lg bg-gray-600 hover:bg-gray-700 text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Review Answers"}),t.jsx("button",{onClick:()=>{R(),setTimeout(()=>Q(p),150)},className:"px-6 py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Try Again"}),t.jsx("button",{onClick:P,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Done (Exit Quiz)"})]})]}),h&&w&&v&&t.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white shadow-xl rounded-2xl overflow-hidden border border-gray-200",children:[t.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-amber-600 text-white p-6 md:p-8",children:[t.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Review Answers"}),t.jsx("p",{className:"text-orange-100 mt-2",children:"Check your responses and learn"})]}),t.jsx("div",{className:"p-6 md:p-8 space-y-6",children:p.questions.map((e,s)=>{const r=_[s]||{};return t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 rounded-xl border-2 "+(r.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("p",{className:"font-semibold text-gray-800",children:["Q",s+1,": ",e.text]})}),t.jsx("div",{className:"flex items-center gap-2",children:r.isCorrect?t.jsxs(t.Fragment,{children:[t.jsx(j,{className:"w-6 h-6 text-green-600"}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold text-white bg-green-600",children:"Correct"})]}):t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold text-white bg-red-600",children:"Incorrect"})})]}),t.jsxs("div",{className:"space-y-3 text-sm",children:[t.jsxs("div",{className:"p-3 bg-white rounded-lg",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:["Your Answer:"," "]}),t.jsx("span",{className:"text-gray-700",children:"Checkboxes"===e.type?Array.isArray(r.answer)&&r.answer.join(", ")||"Not answered":"Matching"===e.type?Array.isArray(r.answer)&&r.answer.map(e=>`${e.left} = ${e.right}`).join(", ")||"Not answered":void 0!==r.answer&&null!==r.answer?r.answer.toString():"Not answered"})]}),!r.isCorrect&&t.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-green-500",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:["Correct Answer:"," "]}),t.jsx("span",{className:"text-green-700 font-medium",children:"Checkboxes"===e.type?Array.isArray(e.correct_answer)?e.correct_answer.join(", "):"":"Matching"===e.type?Array.isArray(e.correct_answer)?e.correct_answer.map(e=>`${e.left} = ${e.right}`).join(", "):"":void 0!==e.correct_answer&&null!==e.correct_answer?e.correct_answer.toString():""})]})]})]},s)})}),t.jsxs("div",{className:"px-6 md:px-8 py-6 border-t border-gray-200 bg-gray-50 flex flex-col sm:flex-row justify-center gap-3",children:[t.jsx("button",{onClick:()=>C(!1),className:"px-6 py-2 rounded-lg border-2 border-gray-300 text-gray-700 hover:bg-gray-100 font-semibold transition-all",children:"Back to Result"}),t.jsx("button",{onClick:R,className:"px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Try Another"}),t.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-gradient-to-r from-emerald-500 to-green-600 hover:from-emerald-600 hover:to-green-700 text-white font-semibold transition-all shadow-md hover:shadow-lg",children:"Done"})]})]})]})]}),!h&&t.jsx(u,{})]})}},Symbol.toStringTag,{value:"Module"}));const q=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{quizData:i}=s().props,c=i.data||[],[d,u]=e.useState(""),[m,b]=e.useState(""),[g,f]=e.useState(null),[j,A]=e.useState(null),[z,S]=e.useState(!1),[q,M]=e.useState(!1),[Q,D]=e.useState(!1),[T,$]=e.useState(!1),F=c.filter(e=>{const t=e.title.toLowerCase().includes(d.toLowerCase()),s=!m||e.status===m;return t&&s}),R="Quiz List",P=[{title:"Home",url:"/"},{title:R,url:""}],O=[{label:"Total Quizzes",value:i.total||0,icon:w,color:"text-blue-500",borderColor:"border-blue-100",bgColor:"bg-blue-50",description:"All quizzes in the system"},{label:"Published",value:c.filter(e=>"Published"===e.status).length||0,icon:N,color:"text-green-500",borderColor:"border-green-100",bgColor:"bg-green-50",description:"Active and available quizzes"},{label:"Draft",value:c.filter(e=>"Draft"===e.status).length||0,icon:v,color:"text-orange-500",borderColor:"border-orange-100",bgColor:"bg-orange-50",description:"Quizzes in draft mode"}];return t.jsxs(n,{breadcrumb:t.jsx(o,{header:R,links:P}),children:[t.jsx(r,{title:R}),t.jsx("section",{className:"content",children:t.jsxs("div",{className:"container-fluid",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:O.map((e,s)=>{const r=e.icon;return t.jsxs("div",{className:`bg-white px-3 pb-2 pt-3 border-l-4 ${e.borderColor} shadow-sm rounded-xl flex flex-col hover:shadow-md transition-all duration-200`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-gray-800 text-base font-semibold",children:e.label}),t.jsx("div",{className:`${e.color}`,children:t.jsx(r,{className:"w-7 h-7"})})]}),t.jsxs("div",{className:"",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:e.value}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},s)})}),t.jsxs("div",{className:"bg-white shadow-md rounded-xl overflow-hidden border border-gray-200 mb-12",children:[t.jsxs("div",{className:"px-6 py-4 border-b flex flex-col md:flex-row justify-between items-center gap-3",children:[t.jsx("h3",{className:"text-xl font-semibold",children:"Quiz Management"}),t.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[t.jsx("form",{className:"inline-block",onSubmit:e=>e.preventDefault(),children:t.jsxs("div",{className:"inline-flex items-center gap-2 px-3 rounded-xl border hover:shadow-lg transition text-sm bg-white",children:[t.jsx(C,{className:"w-4 h-4 text-gray-500"}),t.jsx("input",{type:"text",placeholder:"Search by title...",className:"px-2 outline-none border-none bg-transparent text-sm placeholder-gray-400 w-full min-w-[150px]",value:d,onChange:e=>u(e.target.value)})]})}),t.jsxs("select",{className:"px-3 py-2 rounded-xl border border-gray-300 bg-white hover:shadow-lg transition text-sm font-medium",value:m,onChange:e=>b(e.target.value),children:[t.jsx("option",{value:"",children:"All Status"}),t.jsx("option",{value:"Published",children:"Published"}),t.jsx("option",{value:"Draft",children:"Draft"})]}),t.jsxs(l,{href:route("quizzes.create"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-sm text-white bg-green-600 hover:bg-green-500 transition",children:[t.jsx(y,{className:"w-4 h-4"}),"Add Quiz"]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left border-collapse",children:[t.jsx("thead",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"#ID"}),t.jsx("th",{className:"py-3 px-4",children:"Title"}),t.jsx("th",{className:"py-3 px-4",children:"Questions"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),t.jsx("tbody",{className:"text-sm text-gray-700",children:F.length>0?F.map(e=>t.jsxs("tr",{className:"border-t hover:bg-gray-50 transition",children:[t.jsx("td",{className:"py-3 px-4 font-semibold",children:e.id}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("p",{className:"font-medium text-gray-900",children:e.title})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.questions?.length||0})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("Published"===e.status?"bg-green-600 text-white":"bg-orange-400 text-white"),children:e.status})}),t.jsx("td",{className:"py-3 px-4 text-center",children:t.jsxs("div",{className:"flex justify-center gap-2",children:[t.jsxs("div",{className:"relative group",children:[t.jsx(l,{href:route("quizzes.edit",e.id),className:"inline-flex items-center gap-1.5 px-2 py-2 text-sm font-medium rounded-xl bg-blue-500 text-white hover:bg-blue-600 transition",children:t.jsx(_,{className:"w-4 h-4"})}),t.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-white text-gray-800 text-xs px-3 py-1 rounded-lg shadow-md border",children:"Edit Quiz"})]}),t.jsxs("div",{className:"relative group",children:[t.jsx("button",{onClick:()=>(e=>{A(e),$(!0)})(e),className:"inline-flex items-center gap-1.5 px-2 py-2 text-sm font-medium rounded-xl bg-purple-500 text-white hover:bg-purple-600 transition",children:t.jsx(k,{className:"w-4 h-4"})}),t.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-white text-gray-800 text-xs px-3 py-1 rounded-lg shadow-md border",children:"Toggle Status"})]}),t.jsxs("div",{className:"relative group",children:[t.jsx("button",{onClick:()=>(e=>{f(e),D(!0)})(e),className:"inline-flex items-center gap-1.5 px-2 py-2 text-sm font-medium rounded-xl bg-red-500 text-white hover:bg-red-400 transition",children:t.jsx(p,{className:"w-4 h-4"})}),t.jsx("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-white text-gray-800 text-xs px-3 py-1 rounded-lg shadow-md border",children:"Delete Quiz"})]})]})})]},e.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-500",children:"No quizzes found"})})})]})}),i.total>10&&t.jsx("div",{className:"px-6 py-3 border-t flex justify-center",children:t.jsx(x,{links:i.links,currentPage:i.current_page,perPage:i.per_page})})]}),t.jsx(h,{show:Q,onClose:()=>{D(!1),f(null),S(!1)},maxWidth:"lg",children:t.jsxs("form",{onSubmit:e=>{e.preventDefault(),z||g&&(S(!0),a.delete(route("quizzes.destroy",g.id),{onFinish:()=>{S(!1),D(!1),f(null)}}))},className:"p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Delete Quiz"}),t.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete ",t.jsxs("span",{className:"font-semibold",children:['"',g?.title,'"']}),"? This action cannot be undone."]}),t.jsxs("div",{className:"flex justify-between gap-3",children:[t.jsx("button",{type:"button",onClick:()=>{D(!1),f(null),S(!1)},className:"rounded-[10px] border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",disabled:z,children:"Cancel"}),t.jsx("button",{type:"submit",className:"rounded-[10px] px-9 py-1 bg-red-600 text-white font-semibold hover:bg-red-700 transition",disabled:z,children:z?"Deleting...":"Delete"})]})]})}),t.jsx(h,{show:T,onClose:()=>{$(!1),A(null),M(!1)},maxWidth:"lg",children:t.jsxs("form",{onSubmit:e=>{e.preventDefault(),q||(()=>{if(!j)return;M(!0);const e="Published"===j.status?"Draft":"Published";a.put(route("quizzes.update",j.id),{status:e},{preserveScroll:!0,onFinish:()=>{M(!1),$(!1),A(null)}})})()},className:"p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Change Quiz Status"}),t.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to change status of ",t.jsxs("span",{className:"font-semibold",children:['"',j?.title,'"']})," from ",t.jsx("span",{className:"font-semibold",children:j?.status}),"?"]}),t.jsxs("div",{className:"flex justify-between gap-3",children:[t.jsx("button",{type:"button",onClick:()=>{$(!1),A(null),M(!1)},className:"rounded-[10px] border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",disabled:q,children:"Cancel"}),t.jsx("button",{type:"submit",className:"rounded-[10px] px-9 py-1 bg-purple-600 text-white font-semibold hover:bg-purple-700 transition",disabled:q,children:q?"Processing...":"Confirm"})]})]})})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{z as C,S as D,q as I};
