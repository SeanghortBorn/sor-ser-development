import{r as e,j as t}from"../vendor/vendor-react.CSh4geB6.js";import{H as s,h as n,F as a}from"../components/components-common.mFbUzjoH.js";import{u as r,H as i}from"../vendor/vendor-inertia.HwN2lMYo.js";import{a as o}from"../vendor/vendor-common.B_9lrMAm.js";import"../vendor/vendor-ui.wXUDVBjR.js";import"../vendor/vendor-utils.BR2dU08x.js";import"../components/components-homophone.BmTr8BPi.js";import"../vendor/vendor-charts.30OvePoC.js";import"../vendor/vendor-animation.B6GxcyWq.js";function l(){const[l,d]=e.useState([]),[c,u]=e.useState(!0),{auth:m}=r().props,b=m?.user?.id,[x,p]=e.useState(!1),[f,h]=e.useState(null),[y,g]=e.useState(null),j=e.useRef({}),[v,w]=e.useState(!1),[N,S]=e.useState(null),[k,D]=e.useState(""),[C,E]=e.useState(!1),_=e.useRef(null),[M,A]=e.useState(!1),[T,$]=e.useState(null),[z,L]=e.useState([]),[P,R]=e.useState([]),[H,W]=e.useState(!1),[q,F]=e.useState(null),[K,B]=e.useState(!0);e.useEffect(()=>{u(!0),o.get("/grammar-checkers",{headers:{Accept:"application/json"}}).then(e=>{const t=Array.isArray(e.data)?e.data:e.data.data||[];d(b?t.filter(e=>e.user_id===b):[])}).catch(()=>d([])).finally(()=>u(!1))},[b]),e.useEffect(()=>{(()=>{if(!b)return L([]),void B(!1);B(!0),o.get("/tags",{headers:{Accept:"application/json"}}).then(e=>{const t=e.data.data||[];L(t.filter(e=>e.user_id===b))}).catch(()=>L([])).finally(()=>B(!1))})()},[b]);e.useEffect(()=>{function e(e){null!==y&&j.current[y]&&!j.current[y].contains(e.target)&&g(null)}return null!==y&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[y]);const G=()=>{w(!1),S(null),D("")},I=()=>{A(!1),$(null),R([])};return q&&l.filter(e=>e.tags&&e.tags.some(e=>e.id===q)),e.useEffect(()=>{v&&_.current&&_.current.focus()},[v]),t.jsxs("div",{className:"bg-[#f7f8fa]",children:[t.jsx(i,{title:"Library"}),t.jsx(s,{}),t.jsxs("div",{className:"min-h-screen w-full max-w-7xl mx-auto py-8",children:[t.jsx(n,{}),v&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",onMouseDown:e=>{e.target===e.currentTarget&&G()},children:t.jsxs("form",{onSubmit:async e=>{if(e&&e.preventDefault(),k.trim()&&N){E(!0);try{await o.patch(`/grammar-checkers/${N.id}`,{title:k,word_count:0,incorrect_word_count:0,reading_time:0}),d(e=>e.map(e=>e.id===N.id?{...e,title:k}:e)),G()}finally{E(!1)}}},className:"bg-white rounded-2xl w-full max-w-lg",onMouseDown:e=>e.stopPropagation(),children:[t.jsx("div",{className:"flex justify-between items-center px-6 py-3",children:t.jsx("h2",{className:"text-2xl font-semibold text-blue-900",children:"Rename Document"})}),t.jsx("div",{className:"px-6 pb-1",children:t.jsx("input",{ref:_,type:"text",value:k,onChange:e=>D(e.target.value),className:"w-full rounded-xl border-none px-3 py-2.5 bg-blue-50 text-gray-700 placeholder-gray-400 focus:ring-2 focus:ring-blue-300 hover:bg-blue-100 focus:outline-none text-base font-semibold mb-4",placeholder:"Document Name",required:!0,disabled:C,onKeyDown:e=>{"Escape"===e.key&&G()}})}),t.jsxs("div",{className:"flex justify-between items-center px-6 pb-6",children:[t.jsx("button",{type:"button",onClick:G,disabled:C,className:"rounded-[15px] border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold disabled:opacity-60",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:C||!k.trim(),className:"rounded-[15px] px-9 py-1 bg-blue-600 text-white font-semibold hover:bg-blue-700 transition disabled:opacity-60",children:C?"Saving...":"Save"})]})]})}),x&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",onMouseDown:e=>{e.target===e.currentTarget&&p(!1)},children:t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),f&&(await o.delete(`/grammar-checkers/${f.id}`),p(!1),h(null),d(e=>e.filter(e=>e.id!==f.id)))},className:"bg-white rounded-xl shadow-xl p-4 w-full max-w-xl",onMouseDown:e=>e.stopPropagation(),children:[t.jsx("div",{className:"flex justify-between items-center mb-2",children:t.jsx("h2",{className:"text-2xl font-semibold text-blue-900",children:"Delete this document"})}),t.jsx("p",{className:"text-gray-500 mb-6 mt-2 text-base",children:"Are you sure you want to delete this document? This cannot be undone."}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("button",{type:"button",onClick:()=>p(!1),className:"rounded-[15px] border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold disabled:opacity-60",children:"Cancel"}),t.jsx("button",{type:"submit",className:"rounded-[15px] px-9 py-1 bg-red-500 text-white font-semibold hover:bg-red-600 transition disabled:opacity-60",children:"Delete"})]})]})}),M&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",onMouseDown:e=>{e.target===e.currentTarget&&I()},children:t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),T){W(!0);try{await o.post(`/grammar-checkers/${T.id}/tags`,{tag_ids:P}),d(e=>e.map(e=>e.id===T.id?{...e,tags:z.filter(e=>P.includes(e.id))}:e)),I()}finally{W(!1)}}},className:"bg-white rounded-2xl w-full max-w-md shadow-xl",onMouseDown:e=>e.stopPropagation(),children:[t.jsx("div",{className:"flex justify-between items-center px-6 py-3",children:t.jsx("h2",{className:"text-2xl font-semibold text-blue-900",children:"Edit Tags"})}),t.jsx("div",{className:"px-6 pb-1",children:z.map(e=>t.jsxs("button",{type:"button",className:`flex items-center w-full mb-3 rounded-xl border px-4 py-3 gap-3 transition text-base font-medium\n                                ${P.includes(e.id)?"border-blue-500 ring-2 ring-blue-400":"border-gray-200 hover:bg-gray-50"}\n                            `,style:{boxShadow:P.includes(e.id)?"0 0 0 2px #2563eb":void 0},onClick:()=>{R(t=>t.includes(e.id)?[]:[e.id])},children:[t.jsx("span",{className:"w-6 h-6 rounded-md",style:{backgroundColor:e.color,display:"inline-block"}}),t.jsx("span",{className:"font-medium",children:e.name})]},e.id))}),t.jsxs("div",{className:"flex justify-between items-center px-6 pb-6 mt-2",children:[t.jsx("button",{type:"button",onClick:I,className:"rounded-[15px] border-2 border-gray-200 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",disabled:H,style:{minWidth:110},children:"Cancel"}),t.jsx("button",{type:"submit",className:"rounded-[15px] px-9 py-1 bg-blue-600 text-white font-semibold hover:bg-blue-700 transition disabled:opacity-60",disabled:H,style:{minWidth:110},children:"Save"})]})]})})]}),t.jsx(a,{})]})}export{l as default};
