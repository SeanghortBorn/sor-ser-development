import{X as D,r as a,j as e,S as U}from"./app-KEIty8Lx.js";import{A as H}from"./AdminLayout-CUYN-qse.js";import{B as W}from"./Breadcrumb-CI46WJ-m.js";import{M as q}from"./Modal-BLrhsiV1.js";import{S as z}from"./search-c5wHb8HD.js";import{c as K}from"./createLucideIcon-BgsI43ph.js";import"./transition-6vBYcWvX.js";import"./with-selector-BzVJ7vfU.js";const J=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],X=K("file-up",J);function le(){const{analytics:L=[]}=D().props,k=[{value:"",label:"All Experience"},{value:"None",label:"None"},{value:"Beginner",label:"Beginner"},{value:"Intermediate",label:"Intermediate"},{value:"Advanced",label:"Advanced"},{value:"Expert",label:"Expert"}],E=[{value:"",label:"All Education"},{value:"Primary",label:"Primary"},{value:"Secondary",label:"Secondary"},{value:"High School",label:"High School"},{value:"Bachelor",label:"Bachelor"},{value:"Master",label:"Master"},{value:"Doctorate",label:"Doctorate"},{value:"Other",label:"Other"}],[y,A]=a.useState(""),[o,M]=a.useState(""),[i,O]=a.useState(""),[g,f]=a.useState(!1),[j,v]=a.useState(!1),[T,x]=a.useState(!1),[_,B]=a.useState("Student_Analytics"),[m,F]=a.useState("json"),N=a.useRef(null),w=a.useRef(null);a.useEffect(()=>{const t=l=>{N.current&&!N.current.contains(l.target)&&f(!1),w.current&&!w.current.contains(l.target)&&v(!1)};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[]);const p=L.filter(t=>{const l=y.trim().toLowerCase();if(l){const d=String(t.name||"").toLowerCase().includes(l),n=String(t.email||"").toLowerCase().includes(l);if(!d&&!n)return!1}return!(o&&String(t.experience||"")!==String(o)||i&&String(t.education||"")!==String(i))}),S=15,[c,h]=a.useState(1);a.useEffect(()=>h(1),[y,o,i]);const u=Math.max(1,Math.ceil(p.length/S)),C=p.slice((c-1)*S,c*S),R=(t,l,d)=>{try{const n=d||"application/octet-stream",s=new Blob([t],{type:n}),$=URL.createObjectURL(s),r=document.createElement("a");r.style.display="none",r.href=$,r.download=l||"download",document.body.appendChild(r),r.click(),setTimeout(()=>{try{document.body.removeChild(r)}catch{}URL.revokeObjectURL($)},150)}catch(n){console.error("downloadFile failed:",n)}},I=()=>{let t;const d=`${_}.${m==="json"?"json":"xml"}`;m==="json"?t=JSON.stringify(p,null,2):t=`<?xml version="1.0" encoding="UTF-8"?>
            <Students>
                ${p.map(s=>`<Student>
                        <id>${s.id}</id>
                        <name>${s.name}</name>
                        <email>${s.email}</email>
                        <role>${s.role}</role>
                        <age>${s.age}</age>
                        <education>${s.education}</education>
                        <experience>${s.experience}</experience>
                        <total_articles>${s.total_articles}</total_articles>
                        <accepts>${s.accepts}</accepts>
                        <dismiss>${s.dismiss}</dismiss>
                        <total_typings>${s.total_typings}</total_typings>
                        <incorrect_typings>${s.incorrect_typings}</incorrect_typings>
                        <homo_avg>${s.homo_avg}</homo_avg>
                        <avg_pause>${s.avg_pause}</avg_pause>
                    </Student>`).join("")}
            </Students>`,R(t,d,m==="json"?"application/json;charset=utf-8":"application/xml;charset=utf-8"),x(!1)},b="Student Analytics",P=[{title:"Home",url:"/"},{title:b,url:""}];return e.jsxs(H,{breadcrumb:e.jsx(W,{header:b,links:P}),children:[e.jsx(U,{title:b}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"bg-white shadow-md rounded-xl overflow-hidden border border-gray-200 mb-12",children:[e.jsxs("div",{className:"px-6 py-4 border-b flex flex-col md:flex-row justify-between items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-semibold",children:b}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[e.jsxs("div",{className:"relative",ref:N,children:[e.jsxs("button",{type:"button",className:"w-[180px] px-3 py-2 text-sm rounded-xl border bg-white shadow-sm flex justify-between items-center focus:outline-none",onClick:()=>f(!g),children:[k.find(t=>t.value===o)?.label||"Select Experience Level",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${g?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"absolute left-0 top-full mt-2 w-[180px] bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-44 overflow-y-auto hide-scrollbar",children:e.jsx("div",{className:"px-2 py-2 space-y-1",children:k.map(t=>e.jsx("button",{type:"button",className:`flex w-full text-left px-4 py-2 text-[14px] rounded-lg transition ${o===t.value?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>{M(t.value),f(!1)},children:t.label},t.value))})})]}),e.jsxs("div",{className:"relative",ref:w,children:[e.jsxs("button",{type:"button",className:"w-[180px] px-3 py-2 text-sm rounded-xl border bg-white shadow-sm flex justify-between items-center focus:outline-none",onClick:()=>v(!j),children:[E.find(t=>t.value===i)?.label||"Select Education Level",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${j?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&e.jsx("div",{className:"absolute left-0 top-full mt-2 w-[180px] bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-44 overflow-y-auto hide-scrollbar",children:e.jsx("div",{className:"px-2 py-2 space-y-1",children:E.map(t=>e.jsx("button",{type:"button",className:`flex w-full text-left px-4 py-2 text-[14px] rounded-lg transition ${i===t.value?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>{O(t.value),v(!1)},children:t.label},t.value))})})]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 rounded-xl border hover:shadow-lg transition text-sm bg-white",children:[e.jsx(z,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{value:y,onChange:t=>A(t.target.value),type:"text",placeholder:"Search by name or email",className:"px-2 outline-none border-none bg-transparent text-sm placeholder-gray-400 w-full min-w-[150px] focus:outline-none focus:ring-0"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-sm text-white bg-green-600 hover:bg-green-500 transition",children:[e.jsx(X,{className:"w-4 h-4"})," Export"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-max text-left border-collapse",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-16",children:"#ID"}),e.jsx("th",{className:"py-3 px-16",children:"Name"}),e.jsx("th",{className:"py-3 px-16",children:"Email"}),e.jsx("th",{className:"py-3 px-16",children:"Role"}),e.jsx("th",{className:"py-3 px-16",children:"Age"}),e.jsx("th",{className:"py-3 px-16",children:"Education"}),e.jsx("th",{className:"py-3 px-16",children:"Experience"}),e.jsx("th",{className:"py-3 px-16",children:"Total Articles"}),e.jsx("th",{className:"py-3 px-16",children:"Accepts"}),e.jsx("th",{className:"py-3 px-16",children:"Dismiss"}),e.jsx("th",{className:"py-3 px-16",children:"Total Typings"}),e.jsx("th",{className:"py-3 px-16",children:"Incorrect Typings"}),e.jsx("th",{className:"py-3 px-16",children:"Avg Accuracy (%)"}),e.jsx("th",{className:"py-3 px-16",children:"Avg Pause (s)"})]})}),e.jsx("tbody",{className:"text-gray-700",children:C.length===0?e.jsx("tr",{className:"border-t",children:e.jsx("td",{colSpan:14,className:"py-12 px-6 text-center text-sm text-gray-500",children:"No analytics data available."})}):C.map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition",children:[e.jsx("td",{className:"py-3 px-16",children:t.id}),e.jsx("td",{className:"py-3 px-16",children:t.name}),e.jsx("td",{className:"py-3 px-16",children:t.email}),e.jsx("td",{className:"py-3 px-16",children:t.role}),e.jsx("td",{className:"py-3 px-16",children:t.age}),e.jsx("td",{className:"py-3 px-16",children:t.education}),e.jsx("td",{className:"py-3 px-16",children:t.experience}),e.jsx("td",{className:"py-3 px-16",children:t.total_articles}),e.jsx("td",{className:"py-3 px-16",children:t.accepts}),e.jsx("td",{className:"py-3 px-16",children:t.dismiss}),e.jsx("td",{className:"py-3 px-16",children:t.total_typings}),e.jsx("td",{className:"py-3 px-16",children:t.incorrect_typings}),e.jsx("td",{className:"py-3 px-16",children:t.homo_avg}),e.jsx("td",{className:"py-3 px-16",children:t.avg_pause})]},t.id))})]})}),e.jsx("div",{className:"mt-4 px-6 py-3 border-t border-gray-100",children:u>1&&e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{className:"px-3 py-1 rounded-md border bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition",onClick:()=>h(t=>Math.max(1,t-1)),disabled:c===1,children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:u},(t,l)=>l+1).map(t=>e.jsx("button",{className:`px-3 py-1 rounded-md border transition ${t===c?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 hover:bg-gray-100"}`,onClick:()=>h(t),children:t},t))}),e.jsx("button",{className:"px-3 py-1 rounded-md border bg-white text-gray-700 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition",onClick:()=>h(t=>Math.min(u,t+1)),disabled:c===u,children:"Next"})]})})]})})}),e.jsx(q,{show:T,onClose:()=>x(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export Student Analytics Data"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"filename",className:"block text-sm font-medium text-gray-700 mb-2",children:"File Name"}),e.jsx("input",{id:"filename",type:"text",value:_,onChange:t=>B(t.target.value),className:"w-full px-3 py-2 text-sm rounded-md border focus:ring-1 focus:ring-blue-500 focus:outline-none",placeholder:"Enter file name"})]}),e.jsxs("div",{className:"w-40",children:[e.jsx("label",{htmlFor:"filetype",className:"block text-sm font-medium text-gray-700 mb-2",children:"File Type"}),e.jsxs("select",{id:"filetype",value:m,onChange:t=>F(t.target.value),className:"w-full px-3 py-2 text-sm rounded-md border focus:ring-1 focus:ring-blue-500 focus:outline-none",children:[e.jsx("option",{value:"json",children:"JSON"}),e.jsx("option",{value:"xml",children:"XML"})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("button",{onClick:()=>x(!1),className:"rounded-[10px] border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold disabled:opacity-60",children:"Cancel"}),e.jsx("button",{onClick:I,className:"rounded-[10px] px-9 py-1 bg-green-600 text-white font-semibold hover:bg-green-700 transition disabled:opacity-60",children:"Export"})]})]})})]})}export{le as default};
