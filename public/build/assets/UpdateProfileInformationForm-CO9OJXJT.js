import{X as E,r,G as _,j as e,x as C}from"./app-BlP1oyqg.js";import{M as S}from"./Modal-DAFCMiRc.js";import{I as l}from"./InputError-C-GebbNX.js";import{I as x}from"./InputLabel-B88SN0_A.js";import{T as h}from"./TextInput-yF2nIT6V.js";import{K as L}from"./transition-BJRBwuAD.js";import"./with-selector-BsJARvNf.js";function P({mustVerifyEmail:j,status:y,className:N=""}){const a=E().props.auth.user,[b,o]=r.useState(!1),[w,f]=r.useState({info:!1}),[d,n]=r.useState(!1),[c,i]=r.useState(!1),m=r.useRef(null),u=r.useRef(null),s=_({name:a.name||"",email:a.email,age:a.age||"",education_level:a.education_level||"",khmer_experience:a.khmer_experience||""}),k=t=>{t.preventDefault(),s.patch(route("profile.update"),{onSuccess:()=>{o(!1),f({info:!0}),setTimeout(()=>f({info:!1}),2e3)}})};r.useEffect(()=>{function t(g){m.current&&!m.current.contains(g.target)&&u.current&&!u.current.contains(g.target)&&(n(!1),i(!1))}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const p=[{value:"",label:"Select Experience Level"},{value:"None",label:"None"},{value:"Beginner",label:"Beginner"},{value:"Intermediate",label:"Intermediate"},{value:"Advanced",label:"Advanced"},{value:"Expert",label:"Expert"}],v=[{value:"",label:"Select Education Level"},{value:"Primary",label:"Primary"},{value:"Secondary",label:"Secondary"},{value:"High School",label:"High School"},{value:"Bachelor",label:"Bachelor"},{value:"Master",label:"Master"},{value:"Doctorate",label:"Doctorate"},{value:"Other",label:"Other"}];return e.jsx("section",{className:N,children:e.jsxs("div",{className:"pt-2 mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Noted: "}),"To update your personal information, please verify your email address first."]})]}),e.jsxs("button",{onClick:()=>o(t=>!t),className:"flex items-center space-x-2 px-4 py-2 border-2 border-blue-500 rounded-xl font-semibold text-blue-600 hover:bg-blue-50 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{className:"text-sm",children:b?"Cancel":"Edit"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Full Name"}),e.jsx("div",{className:"text-gray-900 font-medium",children:a.name?a.name:"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Email Address"}),e.jsx("div",{className:"text-gray-900 font-medium",children:a.email?a.email:"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Age"}),e.jsx("div",{className:"text-gray-900 font-medium",children:a.age?a.age:"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Education Level"}),e.jsx("div",{className:"text-gray-900 font-medium",children:a.education_level?a.education_level:"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Khmer Writing Experience"}),e.jsx("div",{className:"text-gray-900 font-medium",children:a.khmer_experience?a.khmer_experience:"N/A"})]})]}),e.jsx(S,{show:b,onClose:()=>o(!1),maxWidth:"2xl",children:e.jsxs("form",{onSubmit:k,className:"bg-white w-full max-w-2xl p-8 shadow-xl border border-gray-200",onMouseDown:t=>t.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Edit Personal Information"}),e.jsx("p",{className:"text-gray-500 mb-6 text-sm",children:"Update your details to keep your profile up-to-date."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"email",value:"Email Address"}),e.jsx(h,{id:"email",type:"email",value:s.data.email,placeholder:"Enter your email",onChange:t=>s.setData("email",t.target.value),className:"mt-1 block w-full rounded-xl border border-gray-300 shadow-sm"}),e.jsx(l,{className:"mt-1 text-sm text-red-500",message:s.errors.email})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",value:"Full Name"}),e.jsx(h,{id:"name",value:s.data.name,placeholder:"Enter your full name",onChange:t=>s.setData("name",t.target.value),className:"mt-1 block w-full rounded-xl border border-gray-300 shadow-sm"}),e.jsx(l,{className:"mt-1 text-sm text-red-500",message:s.errors.name})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"age",value:"Age"}),e.jsx(h,{id:"age",type:"number",value:s.data.age,placeholder:"Enter your age",onChange:t=>s.setData("age",t.target.value),className:"mt-1 block w-full rounded-xl border border-gray-300 shadow-sm"}),e.jsx(l,{className:"mt-1 text-sm text-red-500",message:s.errors.age})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",ref:m,children:[e.jsx("label",{htmlFor:"khmer_experience",className:"block text-md text-[#222a54] font-semibold mb-2",children:"Khmer Writing Experience"}),e.jsxs("button",{type:"button",className:`w-full px-3 py-2 text-[18px] rounded-xl border bg-white shadow-sm text-left flex justify-between items-center focus:outline-none focus:ring-2 ${s.errors.khmer_experience?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"}`,onClick:()=>{n(!d),i(!1)},children:[p.find(t=>t.value===s.data.khmer_experience)?.label||"Select Experience Level",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${d?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&e.jsx("div",{className:"absolute right-0 bottom-full mb-0 w-full bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-60 overflow-y-auto hide-scrollbar",children:e.jsx("div",{className:"px-2 py-2 space-y-1",children:p.map(t=>e.jsx("button",{type:"button",className:`flex items-center w-full text-left px-4 py-2 text-[16px] rounded-lg transition ${s.data.khmer_experience===t.value?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>{s.setData("khmer_experience",t.value),n(!1)},children:t.label},t.value))})}),e.jsx(l,{message:s.errors.khmer_experience,className:"mt-1"})]}),e.jsxs("div",{className:"relative",ref:u,children:[e.jsx("label",{htmlFor:"education_level",className:"block text-md text-[#222a54] font-semibold mb-2",children:"Education Level"}),e.jsxs("button",{type:"button",className:`w-full px-3 py-2 text-[18px] rounded-xl border bg-white shadow-sm text-left flex justify-between items-center focus:outline-none focus:ring-2 ${s.errors.education_level?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-gray-300 focus:ring-blue-200 focus:border-blue-400"}`,onClick:()=>{i(!c),n(!1)},children:[v.find(t=>t.value===s.data.education_level)?.label||"Select Education Level",e.jsx("svg",{className:`w-4 h-4 ml-2 transition-transform ${c?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&e.jsx("div",{className:"absolute right-0 bottom-full mb-1 w-full bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-60 overflow-y-auto hide-scrollbar",children:e.jsx("div",{className:"px-2 py-2 space-y-1",children:v.map(t=>e.jsx("button",{type:"button",className:`flex items-center w-full text-left px-4 py-2 text-[16px] rounded-lg transition ${s.data.education_level===t.value?"bg-blue-100 text-blue-700 font-bold":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>{s.setData("education_level",t.value),i(!1)},children:t.label},t.value))})}),e.jsx(l,{message:s.errors.education_level,className:"mt-1"})]})]})]}),j&&a.email_verified_at===null&&e.jsxs("div",{className:"text-sm mt-2",children:[e.jsxs("p",{className:"text-blue-700",children:["Your email address is unverified."," ",e.jsx(C,{href:route("verification.send"),method:"post",as:"button",className:"font-medium underline hover:text-blue-900",children:"Click here to re-send the verification email."})]}),y==="verification-link-sent"&&e.jsx("p",{className:" font-medium text-green-600",children:"A new verification link has been sent."})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),disabled:s.processing,className:"rounded-[10px] border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold disabled:opacity-60",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s.processing,className:"rounded-[10px] px-9 py-1 bg-blue-600 text-white font-semibold hover:bg-blue-700 transition disabled:opacity-60",children:s.processing?"Saving...":"Save"})]}),e.jsx(L,{show:w.info,enter:"transition ease-in-out duration-150",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in-out duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-green-600 font-medium mt-2",children:"Profile updated successfully."})})]})})]})})}export{P as default};
