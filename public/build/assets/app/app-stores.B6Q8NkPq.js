import{c as e,p as t}from"../vendor/vendor-state.By7zzaww.js";const s=e(t((e,t)=>({user:null,permissions:[],roles:[],isAuthenticated:!1,setUser:t=>e({user:t,permissions:t?.permissions||[],roles:t?.roles||[],isAuthenticated:!!t}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null})),setPermissions:t=>e({permissions:t}),setRoles:t=>e({roles:t}),can:e=>{const{permissions:s}=t();return s.includes(e)},canAny:e=>{const{permissions:s}=t();return e.some(e=>s.includes(e))},canAll:e=>{const{permissions:s}=t();return e.every(e=>s.includes(e))},hasRole:e=>{const{roles:s}=t();return s.some(t=>t.name===e||t===e)},hasAnyRole:e=>{const{roles:s}=t();return e.some(e=>s.some(t=>t.name===e||t===e))},isAdmin:()=>{const{roles:e}=t();return e.some(e=>"Admin"===e.name||"Admin"===e)},isStudent:()=>{const{roles:e}=t();return e.some(e=>"Student"===e.name||"Student"===e)},logout:()=>e({user:null,permissions:[],roles:[],isAuthenticated:!1}),getUserName:()=>{const{user:e}=t();return e?.name||"Guest"},getUserEmail:()=>{const{user:e}=t();return e?.email||""}}),{name:"auth-storage",partialize:e=>({user:e.user,permissions:e.permissions,roles:e.roles,isAuthenticated:e.isAuthenticated})}));e((e,t)=>({articles:[],selectedArticle:null,filters:{search:"",category:null,status:"all"},loading:!1,error:null,setArticles:t=>e({articles:t,loading:!1}),setSelectedArticle:t=>e({selectedArticle:t}),clearSelectedArticle:()=>e({selectedArticle:null}),setLoading:t=>e({loading:t}),setError:t=>e({error:t,loading:!1}),clearError:()=>e({error:null}),setFilters:t=>e(e=>({filters:{...e.filters,...t}})),resetFilters:()=>e({filters:{search:"",category:null,status:"all"}}),getFilteredArticles:()=>{const{articles:e,filters:s}=t();return e.filter(e=>!(s.search&&!e.title.toLowerCase().includes(s.search.toLowerCase()))&&((!s.category||e.category_id===s.category)&&(!("completed"===s.status&&!e.is_completed)&&("incomplete"!==s.status||!e.is_completed))))},getArticleById:e=>{const{articles:s}=t();return s.find(t=>t.id===e)},markAsCompleted:t=>e(e=>({articles:e.articles.map(e=>e.id===t?{...e,is_completed:!0}:e)})),updateArticle:(t,s)=>e(e=>({articles:e.articles.map(e=>e.id===t?{...e,...s}:e)})),addArticle:t=>e(e=>({articles:[...e.articles,t]})),removeArticle:t=>e(e=>({articles:e.articles.filter(e=>e.id!==t)})),getNextArticle:()=>{const{articles:e}=t();return e.find(e=>!e.is_completed&&e.can_access)},getStats:()=>{const{articles:e}=t(),s=e.length,r=e.filter(e=>e.is_completed).length,n=s>0?r/s*100:0;return{total:s,completed:r,remaining:s-r,percentage:Math.round(n)}}}));const r=e((e,t)=>({articleId:null,userText:"",originalText:"",comparisonResults:null,metrics:{totalWords:0,correctWords:0,incorrectWords:0,accuracy:0,timeSpent:0,startTime:null},isChecking:!1,hasChanges:!1,autoSaveEnabled:!0,initializeSession:(t,s)=>e({articleId:t,originalText:s,userText:"",comparisonResults:null,metrics:{totalWords:0,correctWords:0,incorrectWords:0,accuracy:0,timeSpent:0,startTime:Date.now()},hasChanges:!1}),setUserText:t=>e({userText:t,hasChanges:!0}),setComparisonResults:t=>e({comparisonResults:t,isChecking:!1}),setIsChecking:t=>e({isChecking:t}),updateMetrics:t=>e(e=>({metrics:{...e.metrics,...t}})),calculateAccuracy:()=>{const{metrics:s}=t(),{totalWords:r,correctWords:n}=s;if(0===r)return 0;const i=n/r*100;return e(e=>({metrics:{...e.metrics,accuracy:Math.round(100*i)/100}})),i},calculateTimeSpent:()=>{const{metrics:s}=t();if(!s.startTime)return 0;const r=Math.floor((Date.now()-s.startTime)/1e3);return e(e=>({metrics:{...e.metrics,timeSpent:r}})),r},markAsSaved:()=>e({hasChanges:!1}),toggleAutoSave:()=>e(e=>({autoSaveEnabled:!e.autoSaveEnabled})),resetSession:()=>e({articleId:null,userText:"",originalText:"",comparisonResults:null,metrics:{totalWords:0,correctWords:0,incorrectWords:0,accuracy:0,timeSpent:0,startTime:null},isChecking:!1,hasChanges:!1}),getSessionSummary:()=>{const{articleId:e,userText:s,metrics:r,comparisonResults:n}=t();return{article_id:e,user_text:s,accuracy:r.accuracy,total_words:r.totalWords,correct_words:r.correctWords,incorrect_words:r.incorrectWords,time_spent:r.timeSpent,comparison_results:n}},getProgress:()=>{const{userText:e,originalText:s}=t();if(!s)return 0;const r=e.length/s.length*100;return Math.min(r,100)},isComplete:()=>{const{comparisonResults:e,metrics:s}=t();return null!==e&&s.accuracy>0},getCompletionStatus:()=>{const{metrics:e}=t();return e.accuracy>=90?"excellent":e.accuracy>=80?"good":e.accuracy>=70?"fair":"needs-improvement"}}));e((e,t)=>({quiz:null,questions:[],currentQuestionIndex:0,answers:{},score:0,isSubmitting:!1,isComplete:!1,startTime:null,endTime:null,initializeQuiz:(t,s)=>e({quiz:t,questions:s,currentQuestionIndex:0,answers:{},score:0,isSubmitting:!1,isComplete:!1,startTime:Date.now(),endTime:null}),setCurrentQuestion:t=>e({currentQuestionIndex:t}),nextQuestion:()=>e(e=>{const{currentQuestionIndex:t,questions:s}=e;return t<s.length-1?{currentQuestionIndex:t+1}:e}),previousQuestion:()=>e(e=>{const{currentQuestionIndex:t}=e;return t>0?{currentQuestionIndex:t-1}:e}),setAnswer:(t,s)=>e(e=>({answers:{...e.answers,[t]:s}})),clearAnswer:t=>e(e=>{const s={...e.answers};return delete s[t],{answers:s}}),setIsSubmitting:t=>e({isSubmitting:t}),completeQuiz:t=>e({score:t,isComplete:!0,isSubmitting:!1,endTime:Date.now()}),resetQuiz:()=>e({quiz:null,questions:[],currentQuestionIndex:0,answers:{},score:0,isSubmitting:!1,isComplete:!1,startTime:null,endTime:null}),getCurrentQuestion:()=>{const{questions:e,currentQuestionIndex:s}=t();return e[s]},getAnswer:e=>{const{answers:s}=t();return s[e]},isQuestionAnswered:e=>{const{answers:s}=t();return void 0!==s[e]},getAnsweredCount:()=>{const{answers:e}=t();return Object.keys(e).length},getProgress:()=>{const{questions:e,answers:s}=t();return 0===e.length?0:Math.round(Object.keys(s).length/e.length*100)},areAllQuestionsAnswered:()=>{const{questions:e,answers:s}=t();return e.length>0&&Object.keys(s).length===e.length},getTimeSpent:()=>{const{startTime:e,endTime:s}=t();if(!e)return 0;const r=s||Date.now();return Math.floor((r-e)/1e3)},getSummary:()=>{const{quiz:e,questions:s,answers:r,score:n,isComplete:i}=t();return{quiz_id:e?.id,quiz_title:e?.title,total_questions:s.length,answered_questions:Object.keys(r).length,score:n,percentage:s.length>0?Math.round(n/s.length*100):0,is_complete:i,time_spent:t().getTimeSpent(),answers:r}},canSubmit:()=>{const{areAllQuestionsAnswered:e,isSubmitting:s,isComplete:r}=t();return e()&&!s&&!r}}));const n=e((e,t)=>({notifications:[],nextId:1,addNotification:s=>{const{nextId:r}=t(),n=r,i={id:n,type:s.type||"info",title:s.title||"",message:s.message,duration:s.duration||5e3,autoClose:!1!==s.autoClose,createdAt:Date.now()};return e(e=>({notifications:[...e.notifications,i],nextId:r+1})),i.autoClose&&setTimeout(()=>{t().removeNotification(n)},i.duration),n},removeNotification:t=>e(e=>({notifications:e.notifications.filter(e=>e.id!==t)})),clearAll:()=>e({notifications:[]}),success:(e,s="Success",r={})=>t().addNotification({type:"success",title:s,message:e,...r}),error:(e,s="Error",r={})=>t().addNotification({type:"error",title:s,message:e,duration:7e3,...r}),warning:(e,s="Warning",r={})=>t().addNotification({type:"warning",title:s,message:e,...r}),info:(e,s="Info",r={})=>t().addNotification({type:"info",title:s,message:e,...r}),loading:(e,s="Loading",r={})=>t().addNotification({type:"info",title:s,message:e,autoClose:!1,...r}),updateNotification:(t,s)=>e(e=>({notifications:e.notifications.map(e=>e.id===t?{...e,...s}:e)})),getNotification:e=>{const{notifications:s}=t();return s.find(t=>t.id===e)},getByType:e=>{const{notifications:s}=t();return s.filter(t=>t.type===e)}}));export{n as a,r as b,s as u};
