import{c as a,p as c}from"../vendor/vendor-common.CH-fBE_6.js";const u=a(c((r,n)=>({user:null,permissions:[],roles:[],isAuthenticated:!1,setUser:e=>r({user:e,permissions:e?.permissions||[],roles:e?.roles||[],isAuthenticated:!!e}),updateUser:e=>r(t=>({user:t.user?{...t.user,...e}:null})),setPermissions:e=>r({permissions:e}),setRoles:e=>r({roles:e}),can:e=>{const{permissions:t}=n();return t.includes(e)},canAny:e=>{const{permissions:t}=n();return e.some(s=>t.includes(s))},canAll:e=>{const{permissions:t}=n();return e.every(s=>t.includes(s))},hasRole:e=>{const{roles:t}=n();return t.some(s=>s.name===e||s===e)},hasAnyRole:e=>{const{roles:t}=n();return e.some(s=>t.some(i=>i.name===s||i===s))},isAdmin:()=>{const{roles:e}=n();return e.some(t=>t.name==="Admin"||t==="Admin")},isStudent:()=>{const{roles:e}=n();return e.some(t=>t.name==="Student"||t==="Student")},logout:()=>r({user:null,permissions:[],roles:[],isAuthenticated:!1}),getUserName:()=>{const{user:e}=n();return e?.name||"Guest"},getUserEmail:()=>{const{user:e}=n();return e?.email||""}}),{name:"auth-storage",partialize:r=>({user:r.user,permissions:r.permissions,roles:r.roles,isAuthenticated:r.isAuthenticated})}));a((r,n)=>({articles:[],selectedArticle:null,filters:{search:"",category:null,status:"all"},loading:!1,error:null,setArticles:e=>r({articles:e,loading:!1}),setSelectedArticle:e=>r({selectedArticle:e}),clearSelectedArticle:()=>r({selectedArticle:null}),setLoading:e=>r({loading:e}),setError:e=>r({error:e,loading:!1}),clearError:()=>r({error:null}),setFilters:e=>r(t=>({filters:{...t.filters,...e}})),resetFilters:()=>r({filters:{search:"",category:null,status:"all"}}),getFilteredArticles:()=>{const{articles:e,filters:t}=n();return e.filter(s=>!(t.search&&!s.title.toLowerCase().includes(t.search.toLowerCase())||t.category&&s.category_id!==t.category||t.status==="completed"&&!s.is_completed||t.status==="incomplete"&&s.is_completed))},getArticleById:e=>{const{articles:t}=n();return t.find(s=>s.id===e)},markAsCompleted:e=>r(t=>({articles:t.articles.map(s=>s.id===e?{...s,is_completed:!0}:s)})),updateArticle:(e,t)=>r(s=>({articles:s.articles.map(i=>i.id===e?{...i,...t}:i)})),addArticle:e=>r(t=>({articles:[...t.articles,e]})),removeArticle:e=>r(t=>({articles:t.articles.filter(s=>s.id!==e)})),getNextArticle:()=>{const{articles:e}=n();return e.find(t=>!t.is_completed&&t.can_access)},getStats:()=>{const{articles:e}=n(),t=e.length,s=e.filter(o=>o.is_completed).length,i=t>0?s/t*100:0;return{total:t,completed:s,remaining:t-s,percentage:Math.round(i)}}}));const d=a((r,n)=>({articleId:null,userText:"",originalText:"",comparisonResults:null,metrics:{totalWords:0,correctWords:0,incorrectWords:0,accuracy:0,timeSpent:0,startTime:null},isChecking:!1,hasChanges:!1,autoSaveEnabled:!0,initializeSession:(e,t)=>r({articleId:e,originalText:t,userText:"",comparisonResults:null,metrics:{totalWords:0,correctWords:0,incorrectWords:0,accuracy:0,timeSpent:0,startTime:Date.now()},hasChanges:!1}),setUserText:e=>r({userText:e,hasChanges:!0}),setComparisonResults:e=>r({comparisonResults:e,isChecking:!1}),setIsChecking:e=>r({isChecking:e}),updateMetrics:e=>r(t=>({metrics:{...t.metrics,...e}})),calculateAccuracy:()=>{const{metrics:e}=n(),{totalWords:t,correctWords:s}=e;if(t===0)return 0;const i=s/t*100;return r(o=>({metrics:{...o.metrics,accuracy:Math.round(i*100)/100}})),i},calculateTimeSpent:()=>{const{metrics:e}=n();if(!e.startTime)return 0;const t=Math.floor((Date.now()-e.startTime)/1e3);return r(s=>({metrics:{...s.metrics,timeSpent:t}})),t},markAsSaved:()=>r({hasChanges:!1}),toggleAutoSave:()=>r(e=>({autoSaveEnabled:!e.autoSaveEnabled})),resetSession:()=>r({articleId:null,userText:"",originalText:"",comparisonResults:null,metrics:{totalWords:0,correctWords:0,incorrectWords:0,accuracy:0,timeSpent:0,startTime:null},isChecking:!1,hasChanges:!1}),getSessionSummary:()=>{const{articleId:e,userText:t,metrics:s,comparisonResults:i}=n();return{article_id:e,user_text:t,accuracy:s.accuracy,total_words:s.totalWords,correct_words:s.correctWords,incorrect_words:s.incorrectWords,time_spent:s.timeSpent,comparison_results:i}},getProgress:()=>{const{userText:e,originalText:t}=n();if(!t)return 0;const s=e.length/t.length*100;return Math.min(s,100)},isComplete:()=>{const{comparisonResults:e,metrics:t}=n();return e!==null&&t.accuracy>0},getCompletionStatus:()=>{const{metrics:e}=n();return e.accuracy>=90?"excellent":e.accuracy>=80?"good":e.accuracy>=70?"fair":"needs-improvement"}}));a((r,n)=>({quiz:null,questions:[],currentQuestionIndex:0,answers:{},score:0,isSubmitting:!1,isComplete:!1,startTime:null,endTime:null,initializeQuiz:(e,t)=>r({quiz:e,questions:t,currentQuestionIndex:0,answers:{},score:0,isSubmitting:!1,isComplete:!1,startTime:Date.now(),endTime:null}),setCurrentQuestion:e=>r({currentQuestionIndex:e}),nextQuestion:()=>r(e=>{const{currentQuestionIndex:t,questions:s}=e;return t<s.length-1?{currentQuestionIndex:t+1}:e}),previousQuestion:()=>r(e=>{const{currentQuestionIndex:t}=e;return t>0?{currentQuestionIndex:t-1}:e}),setAnswer:(e,t)=>r(s=>({answers:{...s.answers,[e]:t}})),clearAnswer:e=>r(t=>{const s={...t.answers};return delete s[e],{answers:s}}),setIsSubmitting:e=>r({isSubmitting:e}),completeQuiz:e=>r({score:e,isComplete:!0,isSubmitting:!1,endTime:Date.now()}),resetQuiz:()=>r({quiz:null,questions:[],currentQuestionIndex:0,answers:{},score:0,isSubmitting:!1,isComplete:!1,startTime:null,endTime:null}),getCurrentQuestion:()=>{const{questions:e,currentQuestionIndex:t}=n();return e[t]},getAnswer:e=>{const{answers:t}=n();return t[e]},isQuestionAnswered:e=>{const{answers:t}=n();return t[e]!==void 0},getAnsweredCount:()=>{const{answers:e}=n();return Object.keys(e).length},getProgress:()=>{const{questions:e,answers:t}=n();return e.length===0?0:Math.round(Object.keys(t).length/e.length*100)},areAllQuestionsAnswered:()=>{const{questions:e,answers:t}=n();return e.length>0&&Object.keys(t).length===e.length},getTimeSpent:()=>{const{startTime:e,endTime:t}=n();if(!e)return 0;const s=t||Date.now();return Math.floor((s-e)/1e3)},getSummary:()=>{const{quiz:e,questions:t,answers:s,score:i,isComplete:o}=n();return{quiz_id:e?.id,quiz_title:e?.title,total_questions:t.length,answered_questions:Object.keys(s).length,score:i,percentage:t.length>0?Math.round(i/t.length*100):0,is_complete:o,time_spent:n().getTimeSpent(),answers:s}},canSubmit:()=>{const{areAllQuestionsAnswered:e,isSubmitting:t,isComplete:s}=n();return e()&&!t&&!s}}));const m=a((r,n)=>({notifications:[],nextId:1,addNotification:e=>{const{nextId:t}=n(),s=t,i={id:s,type:e.type||"info",title:e.title||"",message:e.message,duration:e.duration||5e3,autoClose:e.autoClose!==!1,createdAt:Date.now()};return r(o=>({notifications:[...o.notifications,i],nextId:t+1})),i.autoClose&&setTimeout(()=>{n().removeNotification(s)},i.duration),s},removeNotification:e=>r(t=>({notifications:t.notifications.filter(s=>s.id!==e)})),clearAll:()=>r({notifications:[]}),success:(e,t="Success",s={})=>n().addNotification({type:"success",title:t,message:e,...s}),error:(e,t="Error",s={})=>n().addNotification({type:"error",title:t,message:e,duration:7e3,...s}),warning:(e,t="Warning",s={})=>n().addNotification({type:"warning",title:t,message:e,...s}),info:(e,t="Info",s={})=>n().addNotification({type:"info",title:t,message:e,...s}),loading:(e,t="Loading",s={})=>n().addNotification({type:"info",title:t,message:e,autoClose:!1,...s}),updateNotification:(e,t)=>r(s=>({notifications:s.notifications.map(i=>i.id===e?{...i,...t}:i)})),getNotification:e=>{const{notifications:t}=n();return t.find(s=>s.id===e)},getByType:e=>{const{notifications:t}=n();return t.filter(s=>s.type===e)}}));export{m as a,d as b,u};
