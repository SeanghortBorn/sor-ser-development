import{X as V,r as o,G as H,j as e,S as L,x as w,A as v}from"./app-CILFAaJc.js";import{B as W}from"./Breadcrumb-y_e7_eK7.js";import{M as k}from"./Modal-ByRztOPt.js";import{P as X}from"./Pagination-BVegndgU.js";import{A as I}from"./AdminLayout-DKBYSkTK.js";import{h as S}from"./moment-DgIkdrus.js";import{S as F}from"./search-DOC51GNB.js";import{c as G}from"./createLucideIcon-B1CUg5AK.js";import{P as O,T as D}from"./trash-2-CLmeJ9Kt.js";import{E as U}from"./eye-BGov8adA.js";import{P as $}from"./pencil-C2nB8bq9.js";import"./transition-Aw5_rYI_.js";import"./with-selector-Dmzc-9tC.js";const q=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],z=G("x",q);function ce({roles:l,search:d=""}){const{auth:C}=V().props,a=C?.can??{},[R,f]=o.useState(!1),[x,b]=o.useState(null),[r,g]=o.useState(null),[m,h]=o.useState(d||""),{delete:A,processing:c,reset:j}=H(),M=s=>s.reduce((t,n)=>{const i=n.name.split("-")[0];return t[i]||(t[i]=[]),t[i].push(n),t},{}),y=s=>s.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ");o.useEffect(()=>{h(d||"")},[d]);const P=s=>{const t=s.target.value;h(t),v.get(route("roles.index"),{search:t},{preserveState:!0,replace:!0})},Y=()=>{h(""),v.get(route("roles.index"),{},{preserveState:!0})},T=s=>{b(s),f(!0)},p=()=>{f(!1),b(null),j()},E=s=>{g(s)},N=()=>{g(null)},_=s=>{s.preventDefault(),x&&A(route("roles.destroy",x.id),{preserveScroll:!0,onSuccess:()=>p(),onFinish:()=>j()})},u="Role List",B=[{title:"Home",url:"/"},{title:u,url:""}];return e.jsxs(I,{breadcrumb:e.jsx(W,{header:u,links:B}),children:[e.jsx(L,{title:u}),e.jsx("section",{className:"content",children:e.jsx("div",{className:"container-fluid sm:px-6 lg:px-8 mb-12",children:e.jsxs("div",{className:"bg-white shadow-md rounded-xl overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b flex flex-col sm:flex-row justify-between items-center gap-3",children:[e.jsx("h3",{className:"text-xl sm:text-lg font-semibold text-gray-800",children:"Role Management"}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("div",{className:"relative flex-1 sm:flex-none",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 rounded-xl border border-gray-300 hover:shadow-lg transition text-sm bg-white w-full sm:w-auto",children:[e.jsx(F,{className:"w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search roles...",className:"px-2 outline-none border-none bg-transparent text-sm placeholder-gray-400 w-full focus:outline-none focus:ring-0",value:m,onChange:P}),m&&e.jsx("button",{onClick:Y,className:"text-gray-400 hover:text-gray-600 transition",children:e.jsx(z,{className:"w-4 h-4"})})]})}),a["role-create"]&&e.jsxs(w,{href:route("roles.create"),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white font-semibold text-sm rounded-xl hover:bg-green-700 transition whitespace-nowrap",children:[e.jsx(O,{className:"w-4 h-4"}),"Add Role"]})]})]}),e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 font-medium whitespace-nowrap",children:"#ID"}),e.jsx("th",{className:"py-3 px-4 font-medium whitespace-nowrap",children:"Name"}),e.jsx("th",{className:"py-3 px-4 font-medium text-right whitespace-nowrap",children:"Created At"}),(a["role-edit"]||a["role-delete"])&&e.jsx("th",{className:"py-3 px-4 font-medium text-center whitespace-nowrap",children:"Actions"})]})}),e.jsx("tbody",{className:"text-gray-700",children:l.data.length>0?l.data.map(s=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition",children:[e.jsx("td",{className:"py-3 px-4 font-medium",children:s.id}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:s.name})}),e.jsx("td",{className:"py-3 px-4 text-gray-600 text-right",children:s.created_at?S(s.created_at).format("DD/MM/YYYY"):"N/A"}),(a["role-edit"]||a["role-delete"])&&e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:()=>E(s),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-cyan-600 rounded-lg hover:bg-cyan-700 transition",children:e.jsx(U,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 hidden group-hover:block bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"View"})]}),a["role-edit"]&&e.jsxs("div",{className:"group relative",children:[e.jsx(w,{href:route("roles.edit",s.id),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition",children:e.jsx($,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 hidden group-hover:block bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Edit"})]}),a["role-delete"]&&e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:()=>T(s),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition",disabled:c,children:e.jsx(D,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 hidden group-hover:block bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Delete"})]})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:a["role-edit"]||a["role-delete"]?4:3,className:"py-10 text-center text-gray-500 text-sm",children:m?"No roles found matching your search":"No roles found"})})})]})}),l.total>l.per_page&&e.jsx("div",{className:"px-6 py-3 border-t flex justify-center",children:e.jsx(X,{links:l.links})})]})})}),e.jsx(k,{show:!!r,onClose:N,maxWidth:"2xl",children:r&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-900 flex items-center gap-2",children:"Role Details"}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-x-8 gap-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Role Name:"}),e.jsx("span",{className:"text-gray-800",children:r.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Created At:"}),e.jsx("span",{className:"text-gray-800",children:S(r.created_at).format("DD/MM/YYYY HH:mm")})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700 block mb-3",children:"Permissions:"}),e.jsx("div",{className:"max-h-64 overflow-y-auto bg-gray-50 rounded-lg p-3",children:Array.isArray(r.permissions)&&r.permissions.length>0?Object.entries(M(r.permissions)).map(([s,t])=>e.jsxs("div",{className:"mb-3 last:mb-0",children:[e.jsx("div",{className:"font-semibold text-gray-800 text-sm mb-2",children:y(s)}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((n,i)=>e.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 rounded px-2.5 py-1 text-xs font-medium",children:y(n.name)},n.id||i))})]},s)):e.jsx("span",{className:"text-gray-400 text-sm",children:"No permissions assigned"})})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-2",children:e.jsx("button",{type:"button",onClick:N,className:"rounded-[10px] border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",children:"Cancel"})})]})}),e.jsx(k,{show:R,onClose:p,maxWidth:"xl",children:e.jsxs("form",{onSubmit:_,className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(D,{className:"w-5 h-5 text-red-600"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Delete Role"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Are you sure you want to delete"," ",e.jsxs("span",{className:"font-semibold text-gray-900",children:['"',x?.name,'"']}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:p,className:"rounded-[10px] border-2 border-gray-300 px-8 py-1 text-gray-700 hover:bg-gray-100 transition font-semibold",disabled:c,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-5 py-1 bg-red-600 text-white font-medium rounded-[10px] hover:bg-red-700 transition disabled:opacity-60",children:c?"Deleting...":"Delete"})]})]})})]})}export{ce as default};
